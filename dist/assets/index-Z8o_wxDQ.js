(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function J0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Jc={exports:{}},jo={},Gc={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xm;function ak(){if(Xm)return me;Xm=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function v(A){return A===null||typeof A!="object"?null:(A=g&&A[g]||A["@@iterator"],typeof A=="function"?A:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,S={};function C(A,j,pe){this.props=A,this.context=j,this.refs=S,this.updater=pe||x}C.prototype.isReactComponent={},C.prototype.setState=function(A,j){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,j,"setState")},C.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function M(){}M.prototype=C.prototype;function P(A,j,pe){this.props=A,this.context=j,this.refs=S,this.updater=pe||x}var I=P.prototype=new M;I.constructor=P,k(I,C.prototype),I.isPureReactComponent=!0;var V=Array.isArray,B=Object.prototype.hasOwnProperty,K={current:null},se={key:!0,ref:!0,__self:!0,__source:!0};function de(A,j,pe){var ge,xe={},ke=null,Ae=null;if(j!=null)for(ge in j.ref!==void 0&&(Ae=j.ref),j.key!==void 0&&(ke=""+j.key),j)B.call(j,ge)&&!se.hasOwnProperty(ge)&&(xe[ge]=j[ge]);var be=arguments.length-2;if(be===1)xe.children=pe;else if(1<be){for(var ze=Array(be),_t=0;_t<be;_t++)ze[_t]=arguments[_t+2];xe.children=ze}if(A&&A.defaultProps)for(ge in be=A.defaultProps,be)xe[ge]===void 0&&(xe[ge]=be[ge]);return{$$typeof:n,type:A,key:ke,ref:Ae,props:xe,_owner:K.current}}function ue(A,j){return{$$typeof:n,type:A.type,key:j,ref:A.ref,props:A.props,_owner:A._owner}}function te(A){return typeof A=="object"&&A!==null&&A.$$typeof===n}function ye(A){var j={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(pe){return j[pe]})}var Ce=/\/+/g;function We(A,j){return typeof A=="object"&&A!==null&&A.key!=null?ye(""+A.key):j.toString(36)}function Et(A,j,pe,ge,xe){var ke=typeof A;(ke==="undefined"||ke==="boolean")&&(A=null);var Ae=!1;if(A===null)Ae=!0;else switch(ke){case"string":case"number":Ae=!0;break;case"object":switch(A.$$typeof){case n:case e:Ae=!0}}if(Ae)return Ae=A,xe=xe(Ae),A=ge===""?"."+We(Ae,0):ge,V(xe)?(pe="",A!=null&&(pe=A.replace(Ce,"$&/")+"/"),Et(xe,j,pe,"",function(_t){return _t})):xe!=null&&(te(xe)&&(xe=ue(xe,pe+(!xe.key||Ae&&Ae.key===xe.key?"":(""+xe.key).replace(Ce,"$&/")+"/")+A)),j.push(xe)),1;if(Ae=0,ge=ge===""?".":ge+":",V(A))for(var be=0;be<A.length;be++){ke=A[be];var ze=ge+We(ke,be);Ae+=Et(ke,j,pe,ze,xe)}else if(ze=v(A),typeof ze=="function")for(A=ze.call(A),be=0;!(ke=A.next()).done;)ke=ke.value,ze=ge+We(ke,be++),Ae+=Et(ke,j,pe,ze,xe);else if(ke==="object")throw j=String(A),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.");return Ae}function Mt(A,j,pe){if(A==null)return A;var ge=[],xe=0;return Et(A,ge,"","",function(ke){return j.call(pe,ke,xe++)}),ge}function Ke(A){if(A._status===-1){var j=A._result;j=j(),j.then(function(pe){(A._status===0||A._status===-1)&&(A._status=1,A._result=pe)},function(pe){(A._status===0||A._status===-1)&&(A._status=2,A._result=pe)}),A._status===-1&&(A._status=0,A._result=j)}if(A._status===1)return A._result.default;throw A._result}var Ne={current:null},W={transition:null},ae={ReactCurrentDispatcher:Ne,ReactCurrentBatchConfig:W,ReactCurrentOwner:K};function Q(){throw Error("act(...) is not supported in production builds of React.")}return me.Children={map:Mt,forEach:function(A,j,pe){Mt(A,function(){j.apply(this,arguments)},pe)},count:function(A){var j=0;return Mt(A,function(){j++}),j},toArray:function(A){return Mt(A,function(j){return j})||[]},only:function(A){if(!te(A))throw Error("React.Children.only expected to receive a single React element child.");return A}},me.Component=C,me.Fragment=t,me.Profiler=i,me.PureComponent=P,me.StrictMode=r,me.Suspense=d,me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ae,me.act=Q,me.cloneElement=function(A,j,pe){if(A==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+A+".");var ge=k({},A.props),xe=A.key,ke=A.ref,Ae=A._owner;if(j!=null){if(j.ref!==void 0&&(ke=j.ref,Ae=K.current),j.key!==void 0&&(xe=""+j.key),A.type&&A.type.defaultProps)var be=A.type.defaultProps;for(ze in j)B.call(j,ze)&&!se.hasOwnProperty(ze)&&(ge[ze]=j[ze]===void 0&&be!==void 0?be[ze]:j[ze])}var ze=arguments.length-2;if(ze===1)ge.children=pe;else if(1<ze){be=Array(ze);for(var _t=0;_t<ze;_t++)be[_t]=arguments[_t+2];ge.children=be}return{$$typeof:n,type:A.type,key:xe,ref:ke,props:ge,_owner:Ae}},me.createContext=function(A){return A={$$typeof:a,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},A.Provider={$$typeof:s,_context:A},A.Consumer=A},me.createElement=de,me.createFactory=function(A){var j=de.bind(null,A);return j.type=A,j},me.createRef=function(){return{current:null}},me.forwardRef=function(A){return{$$typeof:u,render:A}},me.isValidElement=te,me.lazy=function(A){return{$$typeof:p,_payload:{_status:-1,_result:A},_init:Ke}},me.memo=function(A,j){return{$$typeof:f,type:A,compare:j===void 0?null:j}},me.startTransition=function(A){var j=W.transition;W.transition={};try{A()}finally{W.transition=j}},me.unstable_act=Q,me.useCallback=function(A,j){return Ne.current.useCallback(A,j)},me.useContext=function(A){return Ne.current.useContext(A)},me.useDebugValue=function(){},me.useDeferredValue=function(A){return Ne.current.useDeferredValue(A)},me.useEffect=function(A,j){return Ne.current.useEffect(A,j)},me.useId=function(){return Ne.current.useId()},me.useImperativeHandle=function(A,j,pe){return Ne.current.useImperativeHandle(A,j,pe)},me.useInsertionEffect=function(A,j){return Ne.current.useInsertionEffect(A,j)},me.useLayoutEffect=function(A,j){return Ne.current.useLayoutEffect(A,j)},me.useMemo=function(A,j){return Ne.current.useMemo(A,j)},me.useReducer=function(A,j,pe){return Ne.current.useReducer(A,j,pe)},me.useRef=function(A){return Ne.current.useRef(A)},me.useState=function(A){return Ne.current.useState(A)},me.useSyncExternalStore=function(A,j,pe){return Ne.current.useSyncExternalStore(A,j,pe)},me.useTransition=function(){return Ne.current.useTransition()},me.version="18.3.1",me}var Zm;function gf(){return Zm||(Zm=1,Gc.exports=ak()),Gc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eg;function uk(){if(eg)return jo;eg=1;var n=gf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(u,d,f){var p,g={},v=null,x=null;f!==void 0&&(v=""+f),d.key!==void 0&&(v=""+d.key),d.ref!==void 0&&(x=d.ref);for(p in d)r.call(d,p)&&!s.hasOwnProperty(p)&&(g[p]=d[p]);if(u&&u.defaultProps)for(p in d=u.defaultProps,d)g[p]===void 0&&(g[p]=d[p]);return{$$typeof:e,type:u,key:v,ref:x,props:g,_owner:i.current}}return jo.Fragment=t,jo.jsx=a,jo.jsxs=a,jo}var tg;function ck(){return tg||(tg=1,Jc.exports=uk()),Jc.exports}var b=ck(),J=gf();const Se=J0(J);var Nl={},Qc={exports:{}},jt={},Yc={exports:{}},Xc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ng;function dk(){return ng||(ng=1,function(n){function e(W,ae){var Q=W.length;W.push(ae);e:for(;0<Q;){var A=Q-1>>>1,j=W[A];if(0<i(j,ae))W[A]=ae,W[Q]=j,Q=A;else break e}}function t(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var ae=W[0],Q=W.pop();if(Q!==ae){W[0]=Q;e:for(var A=0,j=W.length,pe=j>>>1;A<pe;){var ge=2*(A+1)-1,xe=W[ge],ke=ge+1,Ae=W[ke];if(0>i(xe,Q))ke<j&&0>i(Ae,xe)?(W[A]=Ae,W[ke]=Q,A=ke):(W[A]=xe,W[ge]=Q,A=ge);else if(ke<j&&0>i(Ae,Q))W[A]=Ae,W[ke]=Q,A=ke;else break e}}return ae}function i(W,ae){var Q=W.sortIndex-ae.sortIndex;return Q!==0?Q:W.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,u=a.now();n.unstable_now=function(){return a.now()-u}}var d=[],f=[],p=1,g=null,v=3,x=!1,k=!1,S=!1,C=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(W){for(var ae=t(f);ae!==null;){if(ae.callback===null)r(f);else if(ae.startTime<=W)r(f),ae.sortIndex=ae.expirationTime,e(d,ae);else break;ae=t(f)}}function V(W){if(S=!1,I(W),!k)if(t(d)!==null)k=!0,Ke(B);else{var ae=t(f);ae!==null&&Ne(V,ae.startTime-W)}}function B(W,ae){k=!1,S&&(S=!1,M(de),de=-1),x=!0;var Q=v;try{for(I(ae),g=t(d);g!==null&&(!(g.expirationTime>ae)||W&&!ye());){var A=g.callback;if(typeof A=="function"){g.callback=null,v=g.priorityLevel;var j=A(g.expirationTime<=ae);ae=n.unstable_now(),typeof j=="function"?g.callback=j:g===t(d)&&r(d),I(ae)}else r(d);g=t(d)}if(g!==null)var pe=!0;else{var ge=t(f);ge!==null&&Ne(V,ge.startTime-ae),pe=!1}return pe}finally{g=null,v=Q,x=!1}}var K=!1,se=null,de=-1,ue=5,te=-1;function ye(){return!(n.unstable_now()-te<ue)}function Ce(){if(se!==null){var W=n.unstable_now();te=W;var ae=!0;try{ae=se(!0,W)}finally{ae?We():(K=!1,se=null)}}else K=!1}var We;if(typeof P=="function")We=function(){P(Ce)};else if(typeof MessageChannel<"u"){var Et=new MessageChannel,Mt=Et.port2;Et.port1.onmessage=Ce,We=function(){Mt.postMessage(null)}}else We=function(){C(Ce,0)};function Ke(W){se=W,K||(K=!0,We())}function Ne(W,ae){de=C(function(){W(n.unstable_now())},ae)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(W){W.callback=null},n.unstable_continueExecution=function(){k||x||(k=!0,Ke(B))},n.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ue=0<W?Math.floor(1e3/W):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(W){switch(v){case 1:case 2:case 3:var ae=3;break;default:ae=v}var Q=v;v=ae;try{return W()}finally{v=Q}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(W,ae){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var Q=v;v=W;try{return ae()}finally{v=Q}},n.unstable_scheduleCallback=function(W,ae,Q){var A=n.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?A+Q:A):Q=A,W){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=Q+j,W={id:p++,callback:ae,priorityLevel:W,startTime:Q,expirationTime:j,sortIndex:-1},Q>A?(W.sortIndex=Q,e(f,W),t(d)===null&&W===t(f)&&(S?(M(de),de=-1):S=!0,Ne(V,Q-A))):(W.sortIndex=j,e(d,W),k||x||(k=!0,Ke(B))),W},n.unstable_shouldYield=ye,n.unstable_wrapCallback=function(W){var ae=v;return function(){var Q=v;v=ae;try{return W.apply(this,arguments)}finally{v=Q}}}}(Xc)),Xc}var rg;function fk(){return rg||(rg=1,Yc.exports=dk()),Yc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ig;function hk(){if(ig)return jt;ig=1;var n=gf(),e=fk();function t(o){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+o,c=1;c<arguments.length;c++)l+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(o,l){a(o,l),a(o+"Capture",l)}function a(o,l){for(i[o]=l,o=0;o<l.length;o++)r.add(l[o])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},g={};function v(o){return d.call(g,o)?!0:d.call(p,o)?!1:f.test(o)?g[o]=!0:(p[o]=!0,!1)}function x(o,l,c,h){if(c!==null&&c.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return h?!1:c!==null?!c.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function k(o,l,c,h){if(l===null||typeof l>"u"||x(o,l,c,h))return!0;if(h)return!1;if(c!==null)switch(c.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function S(o,l,c,h,m,y,w){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=h,this.attributeNamespace=m,this.mustUseProperty=c,this.propertyName=o,this.type=l,this.sanitizeURL=y,this.removeEmptyString=w}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){C[o]=new S(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var l=o[0];C[l]=new S(l,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){C[o]=new S(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){C[o]=new S(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){C[o]=new S(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){C[o]=new S(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){C[o]=new S(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){C[o]=new S(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){C[o]=new S(o,5,!1,o.toLowerCase(),null,!1,!1)});var M=/[\-:]([a-z])/g;function P(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var l=o.replace(M,P);C[l]=new S(l,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var l=o.replace(M,P);C[l]=new S(l,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var l=o.replace(M,P);C[l]=new S(l,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){C[o]=new S(o,1,!1,o.toLowerCase(),null,!1,!1)}),C.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){C[o]=new S(o,1,!1,o.toLowerCase(),null,!0,!0)});function I(o,l,c,h){var m=C.hasOwnProperty(l)?C[l]:null;(m!==null?m.type!==0:h||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(k(l,c,m,h)&&(c=null),h||m===null?v(l)&&(c===null?o.removeAttribute(l):o.setAttribute(l,""+c)):m.mustUseProperty?o[m.propertyName]=c===null?m.type===3?!1:"":c:(l=m.attributeName,h=m.attributeNamespace,c===null?o.removeAttribute(l):(m=m.type,c=m===3||m===4&&c===!0?"":""+c,h?o.setAttributeNS(h,l,c):o.setAttribute(l,c))))}var V=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,B=Symbol.for("react.element"),K=Symbol.for("react.portal"),se=Symbol.for("react.fragment"),de=Symbol.for("react.strict_mode"),ue=Symbol.for("react.profiler"),te=Symbol.for("react.provider"),ye=Symbol.for("react.context"),Ce=Symbol.for("react.forward_ref"),We=Symbol.for("react.suspense"),Et=Symbol.for("react.suspense_list"),Mt=Symbol.for("react.memo"),Ke=Symbol.for("react.lazy"),Ne=Symbol.for("react.offscreen"),W=Symbol.iterator;function ae(o){return o===null||typeof o!="object"?null:(o=W&&o[W]||o["@@iterator"],typeof o=="function"?o:null)}var Q=Object.assign,A;function j(o){if(A===void 0)try{throw Error()}catch(c){var l=c.stack.trim().match(/\n( *(at )?)/);A=l&&l[1]||""}return`
`+A+o}var pe=!1;function ge(o,l){if(!o||pe)return"";pe=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(D){var h=D}Reflect.construct(o,[],l)}else{try{l.call()}catch(D){h=D}o.call(l.prototype)}else{try{throw Error()}catch(D){h=D}o()}}catch(D){if(D&&h&&typeof D.stack=="string"){for(var m=D.stack.split(`
`),y=h.stack.split(`
`),w=m.length-1,E=y.length-1;1<=w&&0<=E&&m[w]!==y[E];)E--;for(;1<=w&&0<=E;w--,E--)if(m[w]!==y[E]){if(w!==1||E!==1)do if(w--,E--,0>E||m[w]!==y[E]){var N=`
`+m[w].replace(" at new "," at ");return o.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",o.displayName)),N}while(1<=w&&0<=E);break}}}finally{pe=!1,Error.prepareStackTrace=c}return(o=o?o.displayName||o.name:"")?j(o):""}function xe(o){switch(o.tag){case 5:return j(o.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return o=ge(o.type,!1),o;case 11:return o=ge(o.type.render,!1),o;case 1:return o=ge(o.type,!0),o;default:return""}}function ke(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case se:return"Fragment";case K:return"Portal";case ue:return"Profiler";case de:return"StrictMode";case We:return"Suspense";case Et:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case ye:return(o.displayName||"Context")+".Consumer";case te:return(o._context.displayName||"Context")+".Provider";case Ce:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case Mt:return l=o.displayName||null,l!==null?l:ke(o.type)||"Memo";case Ke:l=o._payload,o=o._init;try{return ke(o(l))}catch{}}return null}function Ae(o){var l=o.type;switch(o.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=l.render,o=o.displayName||o.name||"",l.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ke(l);case 8:return l===de?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function be(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function ze(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function _t(o){var l=ze(o)?"checked":"value",c=Object.getOwnPropertyDescriptor(o.constructor.prototype,l),h=""+o[l];if(!o.hasOwnProperty(l)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var m=c.get,y=c.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return m.call(this)},set:function(w){h=""+w,y.call(this,w)}}),Object.defineProperty(o,l,{enumerable:c.enumerable}),{getValue:function(){return h},setValue:function(w){h=""+w},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function ys(o){o._valueTracker||(o._valueTracker=_t(o))}function ih(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var c=l.getValue(),h="";return o&&(h=ze(o)?o.checked?"true":"false":o.value),o=h,o!==c?(l.setValue(o),!0):!1}function vs(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function tu(o,l){var c=l.checked;return Q({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??o._wrapperState.initialChecked})}function oh(o,l){var c=l.defaultValue==null?"":l.defaultValue,h=l.checked!=null?l.checked:l.defaultChecked;c=be(l.value!=null?l.value:c),o._wrapperState={initialChecked:h,initialValue:c,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function sh(o,l){l=l.checked,l!=null&&I(o,"checked",l,!1)}function nu(o,l){sh(o,l);var c=be(l.value),h=l.type;if(c!=null)h==="number"?(c===0&&o.value===""||o.value!=c)&&(o.value=""+c):o.value!==""+c&&(o.value=""+c);else if(h==="submit"||h==="reset"){o.removeAttribute("value");return}l.hasOwnProperty("value")?ru(o,l.type,c):l.hasOwnProperty("defaultValue")&&ru(o,l.type,be(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(o.defaultChecked=!!l.defaultChecked)}function lh(o,l,c){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var h=l.type;if(!(h!=="submit"&&h!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+o._wrapperState.initialValue,c||l===o.value||(o.value=l),o.defaultValue=l}c=o.name,c!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,c!==""&&(o.name=c)}function ru(o,l,c){(l!=="number"||vs(o.ownerDocument)!==o)&&(c==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+c&&(o.defaultValue=""+c))}var Yi=Array.isArray;function ci(o,l,c,h){if(o=o.options,l){l={};for(var m=0;m<c.length;m++)l["$"+c[m]]=!0;for(c=0;c<o.length;c++)m=l.hasOwnProperty("$"+o[c].value),o[c].selected!==m&&(o[c].selected=m),m&&h&&(o[c].defaultSelected=!0)}else{for(c=""+be(c),l=null,m=0;m<o.length;m++){if(o[m].value===c){o[m].selected=!0,h&&(o[m].defaultSelected=!0);return}l!==null||o[m].disabled||(l=o[m])}l!==null&&(l.selected=!0)}}function iu(o,l){if(l.dangerouslySetInnerHTML!=null)throw Error(t(91));return Q({},l,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function ah(o,l){var c=l.value;if(c==null){if(c=l.children,l=l.defaultValue,c!=null){if(l!=null)throw Error(t(92));if(Yi(c)){if(1<c.length)throw Error(t(93));c=c[0]}l=c}l==null&&(l=""),c=l}o._wrapperState={initialValue:be(c)}}function uh(o,l){var c=be(l.value),h=be(l.defaultValue);c!=null&&(c=""+c,c!==o.value&&(o.value=c),l.defaultValue==null&&o.defaultValue!==c&&(o.defaultValue=c)),h!=null&&(o.defaultValue=""+h)}function ch(o){var l=o.textContent;l===o._wrapperState.initialValue&&l!==""&&l!==null&&(o.value=l)}function dh(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ou(o,l){return o==null||o==="http://www.w3.org/1999/xhtml"?dh(l):o==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var xs,fh=function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,c,h,m){MSApp.execUnsafeLocalFunction(function(){return o(l,c,h,m)})}:o}(function(o,l){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=l;else{for(xs=xs||document.createElement("div"),xs.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=xs.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;l.firstChild;)o.appendChild(l.firstChild)}});function Xi(o,l){if(l){var c=o.firstChild;if(c&&c===o.lastChild&&c.nodeType===3){c.nodeValue=l;return}}o.textContent=l}var Zi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fv=["Webkit","ms","Moz","O"];Object.keys(Zi).forEach(function(o){fv.forEach(function(l){l=l+o.charAt(0).toUpperCase()+o.substring(1),Zi[l]=Zi[o]})});function hh(o,l,c){return l==null||typeof l=="boolean"||l===""?"":c||typeof l!="number"||l===0||Zi.hasOwnProperty(o)&&Zi[o]?(""+l).trim():l+"px"}function ph(o,l){o=o.style;for(var c in l)if(l.hasOwnProperty(c)){var h=c.indexOf("--")===0,m=hh(c,l[c],h);c==="float"&&(c="cssFloat"),h?o.setProperty(c,m):o[c]=m}}var hv=Q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function su(o,l){if(l){if(hv[o]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(t(137,o));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(t(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(t(61))}if(l.style!=null&&typeof l.style!="object")throw Error(t(62))}}function lu(o,l){if(o.indexOf("-")===-1)return typeof l.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var au=null;function uu(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var cu=null,di=null,fi=null;function mh(o){if(o=So(o)){if(typeof cu!="function")throw Error(t(280));var l=o.stateNode;l&&(l=$s(l),cu(o.stateNode,o.type,l))}}function gh(o){di?fi?fi.push(o):fi=[o]:di=o}function yh(){if(di){var o=di,l=fi;if(fi=di=null,mh(o),l)for(o=0;o<l.length;o++)mh(l[o])}}function vh(o,l){return o(l)}function xh(){}var du=!1;function kh(o,l,c){if(du)return o(l,c);du=!0;try{return vh(o,l,c)}finally{du=!1,(di!==null||fi!==null)&&(xh(),yh())}}function eo(o,l){var c=o.stateNode;if(c===null)return null;var h=$s(c);if(h===null)return null;c=h[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(o=o.type,h=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!h;break e;default:o=!1}if(o)return null;if(c&&typeof c!="function")throw Error(t(231,l,typeof c));return c}var fu=!1;if(u)try{var to={};Object.defineProperty(to,"passive",{get:function(){fu=!0}}),window.addEventListener("test",to,to),window.removeEventListener("test",to,to)}catch{fu=!1}function pv(o,l,c,h,m,y,w,E,N){var D=Array.prototype.slice.call(arguments,3);try{l.apply(c,D)}catch(F){this.onError(F)}}var no=!1,ks=null,ws=!1,hu=null,mv={onError:function(o){no=!0,ks=o}};function gv(o,l,c,h,m,y,w,E,N){no=!1,ks=null,pv.apply(mv,arguments)}function yv(o,l,c,h,m,y,w,E,N){if(gv.apply(this,arguments),no){if(no){var D=ks;no=!1,ks=null}else throw Error(t(198));ws||(ws=!0,hu=D)}}function Dr(o){var l=o,c=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(c=l.return),o=l.return;while(o)}return l.tag===3?c:null}function wh(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function Sh(o){if(Dr(o)!==o)throw Error(t(188))}function vv(o){var l=o.alternate;if(!l){if(l=Dr(o),l===null)throw Error(t(188));return l!==o?null:o}for(var c=o,h=l;;){var m=c.return;if(m===null)break;var y=m.alternate;if(y===null){if(h=m.return,h!==null){c=h;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===c)return Sh(m),o;if(y===h)return Sh(m),l;y=y.sibling}throw Error(t(188))}if(c.return!==h.return)c=m,h=y;else{for(var w=!1,E=m.child;E;){if(E===c){w=!0,c=m,h=y;break}if(E===h){w=!0,h=m,c=y;break}E=E.sibling}if(!w){for(E=y.child;E;){if(E===c){w=!0,c=y,h=m;break}if(E===h){w=!0,h=y,c=m;break}E=E.sibling}if(!w)throw Error(t(189))}}if(c.alternate!==h)throw Error(t(190))}if(c.tag!==3)throw Error(t(188));return c.stateNode.current===c?o:l}function Ch(o){return o=vv(o),o!==null?bh(o):null}function bh(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var l=bh(o);if(l!==null)return l;o=o.sibling}return null}var Eh=e.unstable_scheduleCallback,Mh=e.unstable_cancelCallback,xv=e.unstable_shouldYield,kv=e.unstable_requestPaint,qe=e.unstable_now,wv=e.unstable_getCurrentPriorityLevel,pu=e.unstable_ImmediatePriority,Nh=e.unstable_UserBlockingPriority,Ss=e.unstable_NormalPriority,Sv=e.unstable_LowPriority,Th=e.unstable_IdlePriority,Cs=null,yn=null;function Cv(o){if(yn&&typeof yn.onCommitFiberRoot=="function")try{yn.onCommitFiberRoot(Cs,o,void 0,(o.current.flags&128)===128)}catch{}}var ln=Math.clz32?Math.clz32:Mv,bv=Math.log,Ev=Math.LN2;function Mv(o){return o>>>=0,o===0?32:31-(bv(o)/Ev|0)|0}var bs=64,Es=4194304;function ro(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function Ms(o,l){var c=o.pendingLanes;if(c===0)return 0;var h=0,m=o.suspendedLanes,y=o.pingedLanes,w=c&268435455;if(w!==0){var E=w&~m;E!==0?h=ro(E):(y&=w,y!==0&&(h=ro(y)))}else w=c&~m,w!==0?h=ro(w):y!==0&&(h=ro(y));if(h===0)return 0;if(l!==0&&l!==h&&(l&m)===0&&(m=h&-h,y=l&-l,m>=y||m===16&&(y&4194240)!==0))return l;if((h&4)!==0&&(h|=c&16),l=o.entangledLanes,l!==0)for(o=o.entanglements,l&=h;0<l;)c=31-ln(l),m=1<<c,h|=o[c],l&=~m;return h}function Nv(o,l){switch(o){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tv(o,l){for(var c=o.suspendedLanes,h=o.pingedLanes,m=o.expirationTimes,y=o.pendingLanes;0<y;){var w=31-ln(y),E=1<<w,N=m[w];N===-1?((E&c)===0||(E&h)!==0)&&(m[w]=Nv(E,l)):N<=l&&(o.expiredLanes|=E),y&=~E}}function mu(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function Ah(){var o=bs;return bs<<=1,(bs&4194240)===0&&(bs=64),o}function gu(o){for(var l=[],c=0;31>c;c++)l.push(o);return l}function io(o,l,c){o.pendingLanes|=l,l!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,l=31-ln(l),o[l]=c}function Av(o,l){var c=o.pendingLanes&~l;o.pendingLanes=l,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=l,o.mutableReadLanes&=l,o.entangledLanes&=l,l=o.entanglements;var h=o.eventTimes;for(o=o.expirationTimes;0<c;){var m=31-ln(c),y=1<<m;l[m]=0,h[m]=-1,o[m]=-1,c&=~y}}function yu(o,l){var c=o.entangledLanes|=l;for(o=o.entanglements;c;){var h=31-ln(c),m=1<<h;m&l|o[h]&l&&(o[h]|=l),c&=~m}}var Ee=0;function Oh(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var Rh,vu,Dh,Ph,Lh,xu=!1,Ns=[],Kn=null,qn=null,Jn=null,oo=new Map,so=new Map,Gn=[],Ov="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ih(o,l){switch(o){case"focusin":case"focusout":Kn=null;break;case"dragenter":case"dragleave":qn=null;break;case"mouseover":case"mouseout":Jn=null;break;case"pointerover":case"pointerout":oo.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":so.delete(l.pointerId)}}function lo(o,l,c,h,m,y){return o===null||o.nativeEvent!==y?(o={blockedOn:l,domEventName:c,eventSystemFlags:h,nativeEvent:y,targetContainers:[m]},l!==null&&(l=So(l),l!==null&&vu(l)),o):(o.eventSystemFlags|=h,l=o.targetContainers,m!==null&&l.indexOf(m)===-1&&l.push(m),o)}function Rv(o,l,c,h,m){switch(l){case"focusin":return Kn=lo(Kn,o,l,c,h,m),!0;case"dragenter":return qn=lo(qn,o,l,c,h,m),!0;case"mouseover":return Jn=lo(Jn,o,l,c,h,m),!0;case"pointerover":var y=m.pointerId;return oo.set(y,lo(oo.get(y)||null,o,l,c,h,m)),!0;case"gotpointercapture":return y=m.pointerId,so.set(y,lo(so.get(y)||null,o,l,c,h,m)),!0}return!1}function zh(o){var l=Pr(o.target);if(l!==null){var c=Dr(l);if(c!==null){if(l=c.tag,l===13){if(l=wh(c),l!==null){o.blockedOn=l,Lh(o.priority,function(){Dh(c)});return}}else if(l===3&&c.stateNode.current.memoizedState.isDehydrated){o.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Ts(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var c=wu(o.domEventName,o.eventSystemFlags,l[0],o.nativeEvent);if(c===null){c=o.nativeEvent;var h=new c.constructor(c.type,c);au=h,c.target.dispatchEvent(h),au=null}else return l=So(c),l!==null&&vu(l),o.blockedOn=c,!1;l.shift()}return!0}function jh(o,l,c){Ts(o)&&c.delete(l)}function Dv(){xu=!1,Kn!==null&&Ts(Kn)&&(Kn=null),qn!==null&&Ts(qn)&&(qn=null),Jn!==null&&Ts(Jn)&&(Jn=null),oo.forEach(jh),so.forEach(jh)}function ao(o,l){o.blockedOn===l&&(o.blockedOn=null,xu||(xu=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Dv)))}function uo(o){function l(m){return ao(m,o)}if(0<Ns.length){ao(Ns[0],o);for(var c=1;c<Ns.length;c++){var h=Ns[c];h.blockedOn===o&&(h.blockedOn=null)}}for(Kn!==null&&ao(Kn,o),qn!==null&&ao(qn,o),Jn!==null&&ao(Jn,o),oo.forEach(l),so.forEach(l),c=0;c<Gn.length;c++)h=Gn[c],h.blockedOn===o&&(h.blockedOn=null);for(;0<Gn.length&&(c=Gn[0],c.blockedOn===null);)zh(c),c.blockedOn===null&&Gn.shift()}var hi=V.ReactCurrentBatchConfig,As=!0;function Pv(o,l,c,h){var m=Ee,y=hi.transition;hi.transition=null;try{Ee=1,ku(o,l,c,h)}finally{Ee=m,hi.transition=y}}function Lv(o,l,c,h){var m=Ee,y=hi.transition;hi.transition=null;try{Ee=4,ku(o,l,c,h)}finally{Ee=m,hi.transition=y}}function ku(o,l,c,h){if(As){var m=wu(o,l,c,h);if(m===null)Fu(o,l,h,Os,c),Ih(o,h);else if(Rv(m,o,l,c,h))h.stopPropagation();else if(Ih(o,h),l&4&&-1<Ov.indexOf(o)){for(;m!==null;){var y=So(m);if(y!==null&&Rh(y),y=wu(o,l,c,h),y===null&&Fu(o,l,h,Os,c),y===m)break;m=y}m!==null&&h.stopPropagation()}else Fu(o,l,h,null,c)}}var Os=null;function wu(o,l,c,h){if(Os=null,o=uu(h),o=Pr(o),o!==null)if(l=Dr(o),l===null)o=null;else if(c=l.tag,c===13){if(o=wh(l),o!==null)return o;o=null}else if(c===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null);return Os=o,null}function Fh(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wv()){case pu:return 1;case Nh:return 4;case Ss:case Sv:return 16;case Th:return 536870912;default:return 16}default:return 16}}var Qn=null,Su=null,Rs=null;function Bh(){if(Rs)return Rs;var o,l=Su,c=l.length,h,m="value"in Qn?Qn.value:Qn.textContent,y=m.length;for(o=0;o<c&&l[o]===m[o];o++);var w=c-o;for(h=1;h<=w&&l[c-h]===m[y-h];h++);return Rs=m.slice(o,1<h?1-h:void 0)}function Ds(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function Ps(){return!0}function _h(){return!1}function Ht(o){function l(c,h,m,y,w){this._reactName=c,this._targetInst=m,this.type=h,this.nativeEvent=y,this.target=w,this.currentTarget=null;for(var E in o)o.hasOwnProperty(E)&&(c=o[E],this[E]=c?c(y):y[E]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Ps:_h,this.isPropagationStopped=_h,this}return Q(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Ps)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Ps)},persist:function(){},isPersistent:Ps}),l}var pi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cu=Ht(pi),co=Q({},pi,{view:0,detail:0}),Iv=Ht(co),bu,Eu,fo,Ls=Q({},co,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nu,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==fo&&(fo&&o.type==="mousemove"?(bu=o.screenX-fo.screenX,Eu=o.screenY-fo.screenY):Eu=bu=0,fo=o),bu)},movementY:function(o){return"movementY"in o?o.movementY:Eu}}),Hh=Ht(Ls),zv=Q({},Ls,{dataTransfer:0}),jv=Ht(zv),Fv=Q({},co,{relatedTarget:0}),Mu=Ht(Fv),Bv=Q({},pi,{animationName:0,elapsedTime:0,pseudoElement:0}),_v=Ht(Bv),Hv=Q({},pi,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),$v=Ht(Hv),Vv=Q({},pi,{data:0}),$h=Ht(Vv),Uv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Kv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qv(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=Kv[o])?!!l[o]:!1}function Nu(){return qv}var Jv=Q({},co,{key:function(o){if(o.key){var l=Uv[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=Ds(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Wv[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nu,charCode:function(o){return o.type==="keypress"?Ds(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Ds(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Gv=Ht(Jv),Qv=Q({},Ls,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vh=Ht(Qv),Yv=Q({},co,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nu}),Xv=Ht(Yv),Zv=Q({},pi,{propertyName:0,elapsedTime:0,pseudoElement:0}),ex=Ht(Zv),tx=Q({},Ls,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),nx=Ht(tx),rx=[9,13,27,32],Tu=u&&"CompositionEvent"in window,ho=null;u&&"documentMode"in document&&(ho=document.documentMode);var ix=u&&"TextEvent"in window&&!ho,Uh=u&&(!Tu||ho&&8<ho&&11>=ho),Wh=" ",Kh=!1;function qh(o,l){switch(o){case"keyup":return rx.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jh(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var mi=!1;function ox(o,l){switch(o){case"compositionend":return Jh(l);case"keypress":return l.which!==32?null:(Kh=!0,Wh);case"textInput":return o=l.data,o===Wh&&Kh?null:o;default:return null}}function sx(o,l){if(mi)return o==="compositionend"||!Tu&&qh(o,l)?(o=Bh(),Rs=Su=Qn=null,mi=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Uh&&l.locale!=="ko"?null:l.data;default:return null}}var lx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gh(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!lx[o.type]:l==="textarea"}function Qh(o,l,c,h){gh(h),l=Bs(l,"onChange"),0<l.length&&(c=new Cu("onChange","change",null,c,h),o.push({event:c,listeners:l}))}var po=null,mo=null;function ax(o){pp(o,0)}function Is(o){var l=ki(o);if(ih(l))return o}function ux(o,l){if(o==="change")return l}var Yh=!1;if(u){var Au;if(u){var Ou="oninput"in document;if(!Ou){var Xh=document.createElement("div");Xh.setAttribute("oninput","return;"),Ou=typeof Xh.oninput=="function"}Au=Ou}else Au=!1;Yh=Au&&(!document.documentMode||9<document.documentMode)}function Zh(){po&&(po.detachEvent("onpropertychange",ep),mo=po=null)}function ep(o){if(o.propertyName==="value"&&Is(mo)){var l=[];Qh(l,mo,o,uu(o)),kh(ax,l)}}function cx(o,l,c){o==="focusin"?(Zh(),po=l,mo=c,po.attachEvent("onpropertychange",ep)):o==="focusout"&&Zh()}function dx(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Is(mo)}function fx(o,l){if(o==="click")return Is(l)}function hx(o,l){if(o==="input"||o==="change")return Is(l)}function px(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var an=typeof Object.is=="function"?Object.is:px;function go(o,l){if(an(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var c=Object.keys(o),h=Object.keys(l);if(c.length!==h.length)return!1;for(h=0;h<c.length;h++){var m=c[h];if(!d.call(l,m)||!an(o[m],l[m]))return!1}return!0}function tp(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function np(o,l){var c=tp(o);o=0;for(var h;c;){if(c.nodeType===3){if(h=o+c.textContent.length,o<=l&&h>=l)return{node:c,offset:l-o};o=h}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=tp(c)}}function rp(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?rp(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function ip(){for(var o=window,l=vs();l instanceof o.HTMLIFrameElement;){try{var c=typeof l.contentWindow.location.href=="string"}catch{c=!1}if(c)o=l.contentWindow;else break;l=vs(o.document)}return l}function Ru(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}function mx(o){var l=ip(),c=o.focusedElem,h=o.selectionRange;if(l!==c&&c&&c.ownerDocument&&rp(c.ownerDocument.documentElement,c)){if(h!==null&&Ru(c)){if(l=h.start,o=h.end,o===void 0&&(o=l),"selectionStart"in c)c.selectionStart=l,c.selectionEnd=Math.min(o,c.value.length);else if(o=(l=c.ownerDocument||document)&&l.defaultView||window,o.getSelection){o=o.getSelection();var m=c.textContent.length,y=Math.min(h.start,m);h=h.end===void 0?y:Math.min(h.end,m),!o.extend&&y>h&&(m=h,h=y,y=m),m=np(c,y);var w=np(c,h);m&&w&&(o.rangeCount!==1||o.anchorNode!==m.node||o.anchorOffset!==m.offset||o.focusNode!==w.node||o.focusOffset!==w.offset)&&(l=l.createRange(),l.setStart(m.node,m.offset),o.removeAllRanges(),y>h?(o.addRange(l),o.extend(w.node,w.offset)):(l.setEnd(w.node,w.offset),o.addRange(l)))}}for(l=[],o=c;o=o.parentNode;)o.nodeType===1&&l.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<l.length;c++)o=l[c],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var gx=u&&"documentMode"in document&&11>=document.documentMode,gi=null,Du=null,yo=null,Pu=!1;function op(o,l,c){var h=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Pu||gi==null||gi!==vs(h)||(h=gi,"selectionStart"in h&&Ru(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),yo&&go(yo,h)||(yo=h,h=Bs(Du,"onSelect"),0<h.length&&(l=new Cu("onSelect","select",null,l,c),o.push({event:l,listeners:h}),l.target=gi)))}function zs(o,l){var c={};return c[o.toLowerCase()]=l.toLowerCase(),c["Webkit"+o]="webkit"+l,c["Moz"+o]="moz"+l,c}var yi={animationend:zs("Animation","AnimationEnd"),animationiteration:zs("Animation","AnimationIteration"),animationstart:zs("Animation","AnimationStart"),transitionend:zs("Transition","TransitionEnd")},Lu={},sp={};u&&(sp=document.createElement("div").style,"AnimationEvent"in window||(delete yi.animationend.animation,delete yi.animationiteration.animation,delete yi.animationstart.animation),"TransitionEvent"in window||delete yi.transitionend.transition);function js(o){if(Lu[o])return Lu[o];if(!yi[o])return o;var l=yi[o],c;for(c in l)if(l.hasOwnProperty(c)&&c in sp)return Lu[o]=l[c];return o}var lp=js("animationend"),ap=js("animationiteration"),up=js("animationstart"),cp=js("transitionend"),dp=new Map,fp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yn(o,l){dp.set(o,l),s(l,[o])}for(var Iu=0;Iu<fp.length;Iu++){var zu=fp[Iu],yx=zu.toLowerCase(),vx=zu[0].toUpperCase()+zu.slice(1);Yn(yx,"on"+vx)}Yn(lp,"onAnimationEnd"),Yn(ap,"onAnimationIteration"),Yn(up,"onAnimationStart"),Yn("dblclick","onDoubleClick"),Yn("focusin","onFocus"),Yn("focusout","onBlur"),Yn(cp,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xx=new Set("cancel close invalid load scroll toggle".split(" ").concat(vo));function hp(o,l,c){var h=o.type||"unknown-event";o.currentTarget=c,yv(h,l,void 0,o),o.currentTarget=null}function pp(o,l){l=(l&4)!==0;for(var c=0;c<o.length;c++){var h=o[c],m=h.event;h=h.listeners;e:{var y=void 0;if(l)for(var w=h.length-1;0<=w;w--){var E=h[w],N=E.instance,D=E.currentTarget;if(E=E.listener,N!==y&&m.isPropagationStopped())break e;hp(m,E,D),y=N}else for(w=0;w<h.length;w++){if(E=h[w],N=E.instance,D=E.currentTarget,E=E.listener,N!==y&&m.isPropagationStopped())break e;hp(m,E,D),y=N}}}if(ws)throw o=hu,ws=!1,hu=null,o}function De(o,l){var c=l[Uu];c===void 0&&(c=l[Uu]=new Set);var h=o+"__bubble";c.has(h)||(mp(l,o,2,!1),c.add(h))}function ju(o,l,c){var h=0;l&&(h|=4),mp(c,o,h,l)}var Fs="_reactListening"+Math.random().toString(36).slice(2);function xo(o){if(!o[Fs]){o[Fs]=!0,r.forEach(function(c){c!=="selectionchange"&&(xx.has(c)||ju(c,!1,o),ju(c,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[Fs]||(l[Fs]=!0,ju("selectionchange",!1,l))}}function mp(o,l,c,h){switch(Fh(l)){case 1:var m=Pv;break;case 4:m=Lv;break;default:m=ku}c=m.bind(null,l,c,o),m=void 0,!fu||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(m=!0),h?m!==void 0?o.addEventListener(l,c,{capture:!0,passive:m}):o.addEventListener(l,c,!0):m!==void 0?o.addEventListener(l,c,{passive:m}):o.addEventListener(l,c,!1)}function Fu(o,l,c,h,m){var y=h;if((l&1)===0&&(l&2)===0&&h!==null)e:for(;;){if(h===null)return;var w=h.tag;if(w===3||w===4){var E=h.stateNode.containerInfo;if(E===m||E.nodeType===8&&E.parentNode===m)break;if(w===4)for(w=h.return;w!==null;){var N=w.tag;if((N===3||N===4)&&(N=w.stateNode.containerInfo,N===m||N.nodeType===8&&N.parentNode===m))return;w=w.return}for(;E!==null;){if(w=Pr(E),w===null)return;if(N=w.tag,N===5||N===6){h=y=w;continue e}E=E.parentNode}}h=h.return}kh(function(){var D=y,F=uu(c),_=[];e:{var z=dp.get(o);if(z!==void 0){var q=Cu,Y=o;switch(o){case"keypress":if(Ds(c)===0)break e;case"keydown":case"keyup":q=Gv;break;case"focusin":Y="focus",q=Mu;break;case"focusout":Y="blur",q=Mu;break;case"beforeblur":case"afterblur":q=Mu;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=Hh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=jv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=Xv;break;case lp:case ap:case up:q=_v;break;case cp:q=ex;break;case"scroll":q=Iv;break;case"wheel":q=nx;break;case"copy":case"cut":case"paste":q=$v;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=Vh}var Z=(l&4)!==0,Je=!Z&&o==="scroll",O=Z?z!==null?z+"Capture":null:z;Z=[];for(var T=D,R;T!==null;){R=T;var $=R.stateNode;if(R.tag===5&&$!==null&&(R=$,O!==null&&($=eo(T,O),$!=null&&Z.push(ko(T,$,R)))),Je)break;T=T.return}0<Z.length&&(z=new q(z,Y,null,c,F),_.push({event:z,listeners:Z}))}}if((l&7)===0){e:{if(z=o==="mouseover"||o==="pointerover",q=o==="mouseout"||o==="pointerout",z&&c!==au&&(Y=c.relatedTarget||c.fromElement)&&(Pr(Y)||Y[An]))break e;if((q||z)&&(z=F.window===F?F:(z=F.ownerDocument)?z.defaultView||z.parentWindow:window,q?(Y=c.relatedTarget||c.toElement,q=D,Y=Y?Pr(Y):null,Y!==null&&(Je=Dr(Y),Y!==Je||Y.tag!==5&&Y.tag!==6)&&(Y=null)):(q=null,Y=D),q!==Y)){if(Z=Hh,$="onMouseLeave",O="onMouseEnter",T="mouse",(o==="pointerout"||o==="pointerover")&&(Z=Vh,$="onPointerLeave",O="onPointerEnter",T="pointer"),Je=q==null?z:ki(q),R=Y==null?z:ki(Y),z=new Z($,T+"leave",q,c,F),z.target=Je,z.relatedTarget=R,$=null,Pr(F)===D&&(Z=new Z(O,T+"enter",Y,c,F),Z.target=R,Z.relatedTarget=Je,$=Z),Je=$,q&&Y)t:{for(Z=q,O=Y,T=0,R=Z;R;R=vi(R))T++;for(R=0,$=O;$;$=vi($))R++;for(;0<T-R;)Z=vi(Z),T--;for(;0<R-T;)O=vi(O),R--;for(;T--;){if(Z===O||O!==null&&Z===O.alternate)break t;Z=vi(Z),O=vi(O)}Z=null}else Z=null;q!==null&&gp(_,z,q,Z,!1),Y!==null&&Je!==null&&gp(_,Je,Y,Z,!0)}}e:{if(z=D?ki(D):window,q=z.nodeName&&z.nodeName.toLowerCase(),q==="select"||q==="input"&&z.type==="file")var ee=ux;else if(Gh(z))if(Yh)ee=hx;else{ee=dx;var ie=cx}else(q=z.nodeName)&&q.toLowerCase()==="input"&&(z.type==="checkbox"||z.type==="radio")&&(ee=fx);if(ee&&(ee=ee(o,D))){Qh(_,ee,c,F);break e}ie&&ie(o,z,D),o==="focusout"&&(ie=z._wrapperState)&&ie.controlled&&z.type==="number"&&ru(z,"number",z.value)}switch(ie=D?ki(D):window,o){case"focusin":(Gh(ie)||ie.contentEditable==="true")&&(gi=ie,Du=D,yo=null);break;case"focusout":yo=Du=gi=null;break;case"mousedown":Pu=!0;break;case"contextmenu":case"mouseup":case"dragend":Pu=!1,op(_,c,F);break;case"selectionchange":if(gx)break;case"keydown":case"keyup":op(_,c,F)}var oe;if(Tu)e:{switch(o){case"compositionstart":var ce="onCompositionStart";break e;case"compositionend":ce="onCompositionEnd";break e;case"compositionupdate":ce="onCompositionUpdate";break e}ce=void 0}else mi?qh(o,c)&&(ce="onCompositionEnd"):o==="keydown"&&c.keyCode===229&&(ce="onCompositionStart");ce&&(Uh&&c.locale!=="ko"&&(mi||ce!=="onCompositionStart"?ce==="onCompositionEnd"&&mi&&(oe=Bh()):(Qn=F,Su="value"in Qn?Qn.value:Qn.textContent,mi=!0)),ie=Bs(D,ce),0<ie.length&&(ce=new $h(ce,o,null,c,F),_.push({event:ce,listeners:ie}),oe?ce.data=oe:(oe=Jh(c),oe!==null&&(ce.data=oe)))),(oe=ix?ox(o,c):sx(o,c))&&(D=Bs(D,"onBeforeInput"),0<D.length&&(F=new $h("onBeforeInput","beforeinput",null,c,F),_.push({event:F,listeners:D}),F.data=oe))}pp(_,l)})}function ko(o,l,c){return{instance:o,listener:l,currentTarget:c}}function Bs(o,l){for(var c=l+"Capture",h=[];o!==null;){var m=o,y=m.stateNode;m.tag===5&&y!==null&&(m=y,y=eo(o,c),y!=null&&h.unshift(ko(o,y,m)),y=eo(o,l),y!=null&&h.push(ko(o,y,m))),o=o.return}return h}function vi(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function gp(o,l,c,h,m){for(var y=l._reactName,w=[];c!==null&&c!==h;){var E=c,N=E.alternate,D=E.stateNode;if(N!==null&&N===h)break;E.tag===5&&D!==null&&(E=D,m?(N=eo(c,y),N!=null&&w.unshift(ko(c,N,E))):m||(N=eo(c,y),N!=null&&w.push(ko(c,N,E)))),c=c.return}w.length!==0&&o.push({event:l,listeners:w})}var kx=/\r\n?/g,wx=/\u0000|\uFFFD/g;function yp(o){return(typeof o=="string"?o:""+o).replace(kx,`
`).replace(wx,"")}function _s(o,l,c){if(l=yp(l),yp(o)!==l&&c)throw Error(t(425))}function Hs(){}var Bu=null,_u=null;function Hu(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var $u=typeof setTimeout=="function"?setTimeout:void 0,Sx=typeof clearTimeout=="function"?clearTimeout:void 0,vp=typeof Promise=="function"?Promise:void 0,Cx=typeof queueMicrotask=="function"?queueMicrotask:typeof vp<"u"?function(o){return vp.resolve(null).then(o).catch(bx)}:$u;function bx(o){setTimeout(function(){throw o})}function Vu(o,l){var c=l,h=0;do{var m=c.nextSibling;if(o.removeChild(c),m&&m.nodeType===8)if(c=m.data,c==="/$"){if(h===0){o.removeChild(m),uo(l);return}h--}else c!=="$"&&c!=="$?"&&c!=="$!"||h++;c=m}while(c);uo(l)}function Xn(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return o}function xp(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var c=o.data;if(c==="$"||c==="$!"||c==="$?"){if(l===0)return o;l--}else c==="/$"&&l++}o=o.previousSibling}return null}var xi=Math.random().toString(36).slice(2),vn="__reactFiber$"+xi,wo="__reactProps$"+xi,An="__reactContainer$"+xi,Uu="__reactEvents$"+xi,Ex="__reactListeners$"+xi,Mx="__reactHandles$"+xi;function Pr(o){var l=o[vn];if(l)return l;for(var c=o.parentNode;c;){if(l=c[An]||c[vn]){if(c=l.alternate,l.child!==null||c!==null&&c.child!==null)for(o=xp(o);o!==null;){if(c=o[vn])return c;o=xp(o)}return l}o=c,c=o.parentNode}return null}function So(o){return o=o[vn]||o[An],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function ki(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(t(33))}function $s(o){return o[wo]||null}var Wu=[],wi=-1;function Zn(o){return{current:o}}function Pe(o){0>wi||(o.current=Wu[wi],Wu[wi]=null,wi--)}function Oe(o,l){wi++,Wu[wi]=o.current,o.current=l}var er={},gt=Zn(er),Dt=Zn(!1),Lr=er;function Si(o,l){var c=o.type.contextTypes;if(!c)return er;var h=o.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===l)return h.__reactInternalMemoizedMaskedChildContext;var m={},y;for(y in c)m[y]=l[y];return h&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=l,o.__reactInternalMemoizedMaskedChildContext=m),m}function Pt(o){return o=o.childContextTypes,o!=null}function Vs(){Pe(Dt),Pe(gt)}function kp(o,l,c){if(gt.current!==er)throw Error(t(168));Oe(gt,l),Oe(Dt,c)}function wp(o,l,c){var h=o.stateNode;if(l=l.childContextTypes,typeof h.getChildContext!="function")return c;h=h.getChildContext();for(var m in h)if(!(m in l))throw Error(t(108,Ae(o)||"Unknown",m));return Q({},c,h)}function Us(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||er,Lr=gt.current,Oe(gt,o),Oe(Dt,Dt.current),!0}function Sp(o,l,c){var h=o.stateNode;if(!h)throw Error(t(169));c?(o=wp(o,l,Lr),h.__reactInternalMemoizedMergedChildContext=o,Pe(Dt),Pe(gt),Oe(gt,o)):Pe(Dt),Oe(Dt,c)}var On=null,Ws=!1,Ku=!1;function Cp(o){On===null?On=[o]:On.push(o)}function Nx(o){Ws=!0,Cp(o)}function tr(){if(!Ku&&On!==null){Ku=!0;var o=0,l=Ee;try{var c=On;for(Ee=1;o<c.length;o++){var h=c[o];do h=h(!0);while(h!==null)}On=null,Ws=!1}catch(m){throw On!==null&&(On=On.slice(o+1)),Eh(pu,tr),m}finally{Ee=l,Ku=!1}}return null}var Ci=[],bi=0,Ks=null,qs=0,Jt=[],Gt=0,Ir=null,Rn=1,Dn="";function zr(o,l){Ci[bi++]=qs,Ci[bi++]=Ks,Ks=o,qs=l}function bp(o,l,c){Jt[Gt++]=Rn,Jt[Gt++]=Dn,Jt[Gt++]=Ir,Ir=o;var h=Rn;o=Dn;var m=32-ln(h)-1;h&=~(1<<m),c+=1;var y=32-ln(l)+m;if(30<y){var w=m-m%5;y=(h&(1<<w)-1).toString(32),h>>=w,m-=w,Rn=1<<32-ln(l)+m|c<<m|h,Dn=y+o}else Rn=1<<y|c<<m|h,Dn=o}function qu(o){o.return!==null&&(zr(o,1),bp(o,1,0))}function Ju(o){for(;o===Ks;)Ks=Ci[--bi],Ci[bi]=null,qs=Ci[--bi],Ci[bi]=null;for(;o===Ir;)Ir=Jt[--Gt],Jt[Gt]=null,Dn=Jt[--Gt],Jt[Gt]=null,Rn=Jt[--Gt],Jt[Gt]=null}var $t=null,Vt=null,je=!1,un=null;function Ep(o,l){var c=Zt(5,null,null,0);c.elementType="DELETED",c.stateNode=l,c.return=o,l=o.deletions,l===null?(o.deletions=[c],o.flags|=16):l.push(c)}function Mp(o,l){switch(o.tag){case 5:var c=o.type;return l=l.nodeType!==1||c.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(o.stateNode=l,$t=o,Vt=Xn(l.firstChild),!0):!1;case 6:return l=o.pendingProps===""||l.nodeType!==3?null:l,l!==null?(o.stateNode=l,$t=o,Vt=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(c=Ir!==null?{id:Rn,overflow:Dn}:null,o.memoizedState={dehydrated:l,treeContext:c,retryLane:1073741824},c=Zt(18,null,null,0),c.stateNode=l,c.return=o,o.child=c,$t=o,Vt=null,!0):!1;default:return!1}}function Gu(o){return(o.mode&1)!==0&&(o.flags&128)===0}function Qu(o){if(je){var l=Vt;if(l){var c=l;if(!Mp(o,l)){if(Gu(o))throw Error(t(418));l=Xn(c.nextSibling);var h=$t;l&&Mp(o,l)?Ep(h,c):(o.flags=o.flags&-4097|2,je=!1,$t=o)}}else{if(Gu(o))throw Error(t(418));o.flags=o.flags&-4097|2,je=!1,$t=o}}}function Np(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;$t=o}function Js(o){if(o!==$t)return!1;if(!je)return Np(o),je=!0,!1;var l;if((l=o.tag!==3)&&!(l=o.tag!==5)&&(l=o.type,l=l!=="head"&&l!=="body"&&!Hu(o.type,o.memoizedProps)),l&&(l=Vt)){if(Gu(o))throw Tp(),Error(t(418));for(;l;)Ep(o,l),l=Xn(l.nextSibling)}if(Np(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(t(317));e:{for(o=o.nextSibling,l=0;o;){if(o.nodeType===8){var c=o.data;if(c==="/$"){if(l===0){Vt=Xn(o.nextSibling);break e}l--}else c!=="$"&&c!=="$!"&&c!=="$?"||l++}o=o.nextSibling}Vt=null}}else Vt=$t?Xn(o.stateNode.nextSibling):null;return!0}function Tp(){for(var o=Vt;o;)o=Xn(o.nextSibling)}function Ei(){Vt=$t=null,je=!1}function Yu(o){un===null?un=[o]:un.push(o)}var Tx=V.ReactCurrentBatchConfig;function Co(o,l,c){if(o=c.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(t(309));var h=c.stateNode}if(!h)throw Error(t(147,o));var m=h,y=""+o;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===y?l.ref:(l=function(w){var E=m.refs;w===null?delete E[y]:E[y]=w},l._stringRef=y,l)}if(typeof o!="string")throw Error(t(284));if(!c._owner)throw Error(t(290,o))}return o}function Gs(o,l){throw o=Object.prototype.toString.call(l),Error(t(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o))}function Ap(o){var l=o._init;return l(o._payload)}function Op(o){function l(O,T){if(o){var R=O.deletions;R===null?(O.deletions=[T],O.flags|=16):R.push(T)}}function c(O,T){if(!o)return null;for(;T!==null;)l(O,T),T=T.sibling;return null}function h(O,T){for(O=new Map;T!==null;)T.key!==null?O.set(T.key,T):O.set(T.index,T),T=T.sibling;return O}function m(O,T){return O=ur(O,T),O.index=0,O.sibling=null,O}function y(O,T,R){return O.index=R,o?(R=O.alternate,R!==null?(R=R.index,R<T?(O.flags|=2,T):R):(O.flags|=2,T)):(O.flags|=1048576,T)}function w(O){return o&&O.alternate===null&&(O.flags|=2),O}function E(O,T,R,$){return T===null||T.tag!==6?(T=$c(R,O.mode,$),T.return=O,T):(T=m(T,R),T.return=O,T)}function N(O,T,R,$){var ee=R.type;return ee===se?F(O,T,R.props.children,$,R.key):T!==null&&(T.elementType===ee||typeof ee=="object"&&ee!==null&&ee.$$typeof===Ke&&Ap(ee)===T.type)?($=m(T,R.props),$.ref=Co(O,T,R),$.return=O,$):($=xl(R.type,R.key,R.props,null,O.mode,$),$.ref=Co(O,T,R),$.return=O,$)}function D(O,T,R,$){return T===null||T.tag!==4||T.stateNode.containerInfo!==R.containerInfo||T.stateNode.implementation!==R.implementation?(T=Vc(R,O.mode,$),T.return=O,T):(T=m(T,R.children||[]),T.return=O,T)}function F(O,T,R,$,ee){return T===null||T.tag!==7?(T=Ur(R,O.mode,$,ee),T.return=O,T):(T=m(T,R),T.return=O,T)}function _(O,T,R){if(typeof T=="string"&&T!==""||typeof T=="number")return T=$c(""+T,O.mode,R),T.return=O,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case B:return R=xl(T.type,T.key,T.props,null,O.mode,R),R.ref=Co(O,null,T),R.return=O,R;case K:return T=Vc(T,O.mode,R),T.return=O,T;case Ke:var $=T._init;return _(O,$(T._payload),R)}if(Yi(T)||ae(T))return T=Ur(T,O.mode,R,null),T.return=O,T;Gs(O,T)}return null}function z(O,T,R,$){var ee=T!==null?T.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return ee!==null?null:E(O,T,""+R,$);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case B:return R.key===ee?N(O,T,R,$):null;case K:return R.key===ee?D(O,T,R,$):null;case Ke:return ee=R._init,z(O,T,ee(R._payload),$)}if(Yi(R)||ae(R))return ee!==null?null:F(O,T,R,$,null);Gs(O,R)}return null}function q(O,T,R,$,ee){if(typeof $=="string"&&$!==""||typeof $=="number")return O=O.get(R)||null,E(T,O,""+$,ee);if(typeof $=="object"&&$!==null){switch($.$$typeof){case B:return O=O.get($.key===null?R:$.key)||null,N(T,O,$,ee);case K:return O=O.get($.key===null?R:$.key)||null,D(T,O,$,ee);case Ke:var ie=$._init;return q(O,T,R,ie($._payload),ee)}if(Yi($)||ae($))return O=O.get(R)||null,F(T,O,$,ee,null);Gs(T,$)}return null}function Y(O,T,R,$){for(var ee=null,ie=null,oe=T,ce=T=0,it=null;oe!==null&&ce<R.length;ce++){oe.index>ce?(it=oe,oe=null):it=oe.sibling;var we=z(O,oe,R[ce],$);if(we===null){oe===null&&(oe=it);break}o&&oe&&we.alternate===null&&l(O,oe),T=y(we,T,ce),ie===null?ee=we:ie.sibling=we,ie=we,oe=it}if(ce===R.length)return c(O,oe),je&&zr(O,ce),ee;if(oe===null){for(;ce<R.length;ce++)oe=_(O,R[ce],$),oe!==null&&(T=y(oe,T,ce),ie===null?ee=oe:ie.sibling=oe,ie=oe);return je&&zr(O,ce),ee}for(oe=h(O,oe);ce<R.length;ce++)it=q(oe,O,ce,R[ce],$),it!==null&&(o&&it.alternate!==null&&oe.delete(it.key===null?ce:it.key),T=y(it,T,ce),ie===null?ee=it:ie.sibling=it,ie=it);return o&&oe.forEach(function(cr){return l(O,cr)}),je&&zr(O,ce),ee}function Z(O,T,R,$){var ee=ae(R);if(typeof ee!="function")throw Error(t(150));if(R=ee.call(R),R==null)throw Error(t(151));for(var ie=ee=null,oe=T,ce=T=0,it=null,we=R.next();oe!==null&&!we.done;ce++,we=R.next()){oe.index>ce?(it=oe,oe=null):it=oe.sibling;var cr=z(O,oe,we.value,$);if(cr===null){oe===null&&(oe=it);break}o&&oe&&cr.alternate===null&&l(O,oe),T=y(cr,T,ce),ie===null?ee=cr:ie.sibling=cr,ie=cr,oe=it}if(we.done)return c(O,oe),je&&zr(O,ce),ee;if(oe===null){for(;!we.done;ce++,we=R.next())we=_(O,we.value,$),we!==null&&(T=y(we,T,ce),ie===null?ee=we:ie.sibling=we,ie=we);return je&&zr(O,ce),ee}for(oe=h(O,oe);!we.done;ce++,we=R.next())we=q(oe,O,ce,we.value,$),we!==null&&(o&&we.alternate!==null&&oe.delete(we.key===null?ce:we.key),T=y(we,T,ce),ie===null?ee=we:ie.sibling=we,ie=we);return o&&oe.forEach(function(lk){return l(O,lk)}),je&&zr(O,ce),ee}function Je(O,T,R,$){if(typeof R=="object"&&R!==null&&R.type===se&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case B:e:{for(var ee=R.key,ie=T;ie!==null;){if(ie.key===ee){if(ee=R.type,ee===se){if(ie.tag===7){c(O,ie.sibling),T=m(ie,R.props.children),T.return=O,O=T;break e}}else if(ie.elementType===ee||typeof ee=="object"&&ee!==null&&ee.$$typeof===Ke&&Ap(ee)===ie.type){c(O,ie.sibling),T=m(ie,R.props),T.ref=Co(O,ie,R),T.return=O,O=T;break e}c(O,ie);break}else l(O,ie);ie=ie.sibling}R.type===se?(T=Ur(R.props.children,O.mode,$,R.key),T.return=O,O=T):($=xl(R.type,R.key,R.props,null,O.mode,$),$.ref=Co(O,T,R),$.return=O,O=$)}return w(O);case K:e:{for(ie=R.key;T!==null;){if(T.key===ie)if(T.tag===4&&T.stateNode.containerInfo===R.containerInfo&&T.stateNode.implementation===R.implementation){c(O,T.sibling),T=m(T,R.children||[]),T.return=O,O=T;break e}else{c(O,T);break}else l(O,T);T=T.sibling}T=Vc(R,O.mode,$),T.return=O,O=T}return w(O);case Ke:return ie=R._init,Je(O,T,ie(R._payload),$)}if(Yi(R))return Y(O,T,R,$);if(ae(R))return Z(O,T,R,$);Gs(O,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,T!==null&&T.tag===6?(c(O,T.sibling),T=m(T,R),T.return=O,O=T):(c(O,T),T=$c(R,O.mode,$),T.return=O,O=T),w(O)):c(O,T)}return Je}var Mi=Op(!0),Rp=Op(!1),Qs=Zn(null),Ys=null,Ni=null,Xu=null;function Zu(){Xu=Ni=Ys=null}function ec(o){var l=Qs.current;Pe(Qs),o._currentValue=l}function tc(o,l,c){for(;o!==null;){var h=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,h!==null&&(h.childLanes|=l)):h!==null&&(h.childLanes&l)!==l&&(h.childLanes|=l),o===c)break;o=o.return}}function Ti(o,l){Ys=o,Xu=Ni=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&l)!==0&&(Lt=!0),o.firstContext=null)}function Qt(o){var l=o._currentValue;if(Xu!==o)if(o={context:o,memoizedValue:l,next:null},Ni===null){if(Ys===null)throw Error(t(308));Ni=o,Ys.dependencies={lanes:0,firstContext:o}}else Ni=Ni.next=o;return l}var jr=null;function nc(o){jr===null?jr=[o]:jr.push(o)}function Dp(o,l,c,h){var m=l.interleaved;return m===null?(c.next=c,nc(l)):(c.next=m.next,m.next=c),l.interleaved=c,Pn(o,h)}function Pn(o,l){o.lanes|=l;var c=o.alternate;for(c!==null&&(c.lanes|=l),c=o,o=o.return;o!==null;)o.childLanes|=l,c=o.alternate,c!==null&&(c.childLanes|=l),c=o,o=o.return;return c.tag===3?c.stateNode:null}var nr=!1;function rc(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pp(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function Ln(o,l){return{eventTime:o,lane:l,tag:0,payload:null,callback:null,next:null}}function rr(o,l,c){var h=o.updateQueue;if(h===null)return null;if(h=h.shared,(ve&2)!==0){var m=h.pending;return m===null?l.next=l:(l.next=m.next,m.next=l),h.pending=l,Pn(o,c)}return m=h.interleaved,m===null?(l.next=l,nc(h)):(l.next=m.next,m.next=l),h.interleaved=l,Pn(o,c)}function Xs(o,l,c){if(l=l.updateQueue,l!==null&&(l=l.shared,(c&4194240)!==0)){var h=l.lanes;h&=o.pendingLanes,c|=h,l.lanes=c,yu(o,c)}}function Lp(o,l){var c=o.updateQueue,h=o.alternate;if(h!==null&&(h=h.updateQueue,c===h)){var m=null,y=null;if(c=c.firstBaseUpdate,c!==null){do{var w={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};y===null?m=y=w:y=y.next=w,c=c.next}while(c!==null);y===null?m=y=l:y=y.next=l}else m=y=l;c={baseState:h.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:h.shared,effects:h.effects},o.updateQueue=c;return}o=c.lastBaseUpdate,o===null?c.firstBaseUpdate=l:o.next=l,c.lastBaseUpdate=l}function Zs(o,l,c,h){var m=o.updateQueue;nr=!1;var y=m.firstBaseUpdate,w=m.lastBaseUpdate,E=m.shared.pending;if(E!==null){m.shared.pending=null;var N=E,D=N.next;N.next=null,w===null?y=D:w.next=D,w=N;var F=o.alternate;F!==null&&(F=F.updateQueue,E=F.lastBaseUpdate,E!==w&&(E===null?F.firstBaseUpdate=D:E.next=D,F.lastBaseUpdate=N))}if(y!==null){var _=m.baseState;w=0,F=D=N=null,E=y;do{var z=E.lane,q=E.eventTime;if((h&z)===z){F!==null&&(F=F.next={eventTime:q,lane:0,tag:E.tag,payload:E.payload,callback:E.callback,next:null});e:{var Y=o,Z=E;switch(z=l,q=c,Z.tag){case 1:if(Y=Z.payload,typeof Y=="function"){_=Y.call(q,_,z);break e}_=Y;break e;case 3:Y.flags=Y.flags&-65537|128;case 0:if(Y=Z.payload,z=typeof Y=="function"?Y.call(q,_,z):Y,z==null)break e;_=Q({},_,z);break e;case 2:nr=!0}}E.callback!==null&&E.lane!==0&&(o.flags|=64,z=m.effects,z===null?m.effects=[E]:z.push(E))}else q={eventTime:q,lane:z,tag:E.tag,payload:E.payload,callback:E.callback,next:null},F===null?(D=F=q,N=_):F=F.next=q,w|=z;if(E=E.next,E===null){if(E=m.shared.pending,E===null)break;z=E,E=z.next,z.next=null,m.lastBaseUpdate=z,m.shared.pending=null}}while(!0);if(F===null&&(N=_),m.baseState=N,m.firstBaseUpdate=D,m.lastBaseUpdate=F,l=m.shared.interleaved,l!==null){m=l;do w|=m.lane,m=m.next;while(m!==l)}else y===null&&(m.shared.lanes=0);_r|=w,o.lanes=w,o.memoizedState=_}}function Ip(o,l,c){if(o=l.effects,l.effects=null,o!==null)for(l=0;l<o.length;l++){var h=o[l],m=h.callback;if(m!==null){if(h.callback=null,h=c,typeof m!="function")throw Error(t(191,m));m.call(h)}}}var bo={},xn=Zn(bo),Eo=Zn(bo),Mo=Zn(bo);function Fr(o){if(o===bo)throw Error(t(174));return o}function ic(o,l){switch(Oe(Mo,l),Oe(Eo,o),Oe(xn,bo),o=l.nodeType,o){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:ou(null,"");break;default:o=o===8?l.parentNode:l,l=o.namespaceURI||null,o=o.tagName,l=ou(l,o)}Pe(xn),Oe(xn,l)}function Ai(){Pe(xn),Pe(Eo),Pe(Mo)}function zp(o){Fr(Mo.current);var l=Fr(xn.current),c=ou(l,o.type);l!==c&&(Oe(Eo,o),Oe(xn,c))}function oc(o){Eo.current===o&&(Pe(xn),Pe(Eo))}var Be=Zn(0);function el(o){for(var l=o;l!==null;){if(l.tag===13){var c=l.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var sc=[];function lc(){for(var o=0;o<sc.length;o++)sc[o]._workInProgressVersionPrimary=null;sc.length=0}var tl=V.ReactCurrentDispatcher,ac=V.ReactCurrentBatchConfig,Br=0,_e=null,Ze=null,nt=null,nl=!1,No=!1,To=0,Ax=0;function yt(){throw Error(t(321))}function uc(o,l){if(l===null)return!1;for(var c=0;c<l.length&&c<o.length;c++)if(!an(o[c],l[c]))return!1;return!0}function cc(o,l,c,h,m,y){if(Br=y,_e=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,tl.current=o===null||o.memoizedState===null?Px:Lx,o=c(h,m),No){y=0;do{if(No=!1,To=0,25<=y)throw Error(t(301));y+=1,nt=Ze=null,l.updateQueue=null,tl.current=Ix,o=c(h,m)}while(No)}if(tl.current=ol,l=Ze!==null&&Ze.next!==null,Br=0,nt=Ze=_e=null,nl=!1,l)throw Error(t(300));return o}function dc(){var o=To!==0;return To=0,o}function kn(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nt===null?_e.memoizedState=nt=o:nt=nt.next=o,nt}function Yt(){if(Ze===null){var o=_e.alternate;o=o!==null?o.memoizedState:null}else o=Ze.next;var l=nt===null?_e.memoizedState:nt.next;if(l!==null)nt=l,Ze=o;else{if(o===null)throw Error(t(310));Ze=o,o={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},nt===null?_e.memoizedState=nt=o:nt=nt.next=o}return nt}function Ao(o,l){return typeof l=="function"?l(o):l}function fc(o){var l=Yt(),c=l.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=o;var h=Ze,m=h.baseQueue,y=c.pending;if(y!==null){if(m!==null){var w=m.next;m.next=y.next,y.next=w}h.baseQueue=m=y,c.pending=null}if(m!==null){y=m.next,h=h.baseState;var E=w=null,N=null,D=y;do{var F=D.lane;if((Br&F)===F)N!==null&&(N=N.next={lane:0,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null}),h=D.hasEagerState?D.eagerState:o(h,D.action);else{var _={lane:F,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null};N===null?(E=N=_,w=h):N=N.next=_,_e.lanes|=F,_r|=F}D=D.next}while(D!==null&&D!==y);N===null?w=h:N.next=E,an(h,l.memoizedState)||(Lt=!0),l.memoizedState=h,l.baseState=w,l.baseQueue=N,c.lastRenderedState=h}if(o=c.interleaved,o!==null){m=o;do y=m.lane,_e.lanes|=y,_r|=y,m=m.next;while(m!==o)}else m===null&&(c.lanes=0);return[l.memoizedState,c.dispatch]}function hc(o){var l=Yt(),c=l.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=o;var h=c.dispatch,m=c.pending,y=l.memoizedState;if(m!==null){c.pending=null;var w=m=m.next;do y=o(y,w.action),w=w.next;while(w!==m);an(y,l.memoizedState)||(Lt=!0),l.memoizedState=y,l.baseQueue===null&&(l.baseState=y),c.lastRenderedState=y}return[y,h]}function jp(){}function Fp(o,l){var c=_e,h=Yt(),m=l(),y=!an(h.memoizedState,m);if(y&&(h.memoizedState=m,Lt=!0),h=h.queue,pc(Hp.bind(null,c,h,o),[o]),h.getSnapshot!==l||y||nt!==null&&nt.memoizedState.tag&1){if(c.flags|=2048,Oo(9,_p.bind(null,c,h,m,l),void 0,null),rt===null)throw Error(t(349));(Br&30)!==0||Bp(c,l,m)}return m}function Bp(o,l,c){o.flags|=16384,o={getSnapshot:l,value:c},l=_e.updateQueue,l===null?(l={lastEffect:null,stores:null},_e.updateQueue=l,l.stores=[o]):(c=l.stores,c===null?l.stores=[o]:c.push(o))}function _p(o,l,c,h){l.value=c,l.getSnapshot=h,$p(l)&&Vp(o)}function Hp(o,l,c){return c(function(){$p(l)&&Vp(o)})}function $p(o){var l=o.getSnapshot;o=o.value;try{var c=l();return!an(o,c)}catch{return!0}}function Vp(o){var l=Pn(o,1);l!==null&&hn(l,o,1,-1)}function Up(o){var l=kn();return typeof o=="function"&&(o=o()),l.memoizedState=l.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ao,lastRenderedState:o},l.queue=o,o=o.dispatch=Dx.bind(null,_e,o),[l.memoizedState,o]}function Oo(o,l,c,h){return o={tag:o,create:l,destroy:c,deps:h,next:null},l=_e.updateQueue,l===null?(l={lastEffect:null,stores:null},_e.updateQueue=l,l.lastEffect=o.next=o):(c=l.lastEffect,c===null?l.lastEffect=o.next=o:(h=c.next,c.next=o,o.next=h,l.lastEffect=o)),o}function Wp(){return Yt().memoizedState}function rl(o,l,c,h){var m=kn();_e.flags|=o,m.memoizedState=Oo(1|l,c,void 0,h===void 0?null:h)}function il(o,l,c,h){var m=Yt();h=h===void 0?null:h;var y=void 0;if(Ze!==null){var w=Ze.memoizedState;if(y=w.destroy,h!==null&&uc(h,w.deps)){m.memoizedState=Oo(l,c,y,h);return}}_e.flags|=o,m.memoizedState=Oo(1|l,c,y,h)}function Kp(o,l){return rl(8390656,8,o,l)}function pc(o,l){return il(2048,8,o,l)}function qp(o,l){return il(4,2,o,l)}function Jp(o,l){return il(4,4,o,l)}function Gp(o,l){if(typeof l=="function")return o=o(),l(o),function(){l(null)};if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function Qp(o,l,c){return c=c!=null?c.concat([o]):null,il(4,4,Gp.bind(null,l,o),c)}function mc(){}function Yp(o,l){var c=Yt();l=l===void 0?null:l;var h=c.memoizedState;return h!==null&&l!==null&&uc(l,h[1])?h[0]:(c.memoizedState=[o,l],o)}function Xp(o,l){var c=Yt();l=l===void 0?null:l;var h=c.memoizedState;return h!==null&&l!==null&&uc(l,h[1])?h[0]:(o=o(),c.memoizedState=[o,l],o)}function Zp(o,l,c){return(Br&21)===0?(o.baseState&&(o.baseState=!1,Lt=!0),o.memoizedState=c):(an(c,l)||(c=Ah(),_e.lanes|=c,_r|=c,o.baseState=!0),l)}function Ox(o,l){var c=Ee;Ee=c!==0&&4>c?c:4,o(!0);var h=ac.transition;ac.transition={};try{o(!1),l()}finally{Ee=c,ac.transition=h}}function em(){return Yt().memoizedState}function Rx(o,l,c){var h=lr(o);if(c={lane:h,action:c,hasEagerState:!1,eagerState:null,next:null},tm(o))nm(l,c);else if(c=Dp(o,l,c,h),c!==null){var m=Tt();hn(c,o,h,m),rm(c,l,h)}}function Dx(o,l,c){var h=lr(o),m={lane:h,action:c,hasEagerState:!1,eagerState:null,next:null};if(tm(o))nm(l,m);else{var y=o.alternate;if(o.lanes===0&&(y===null||y.lanes===0)&&(y=l.lastRenderedReducer,y!==null))try{var w=l.lastRenderedState,E=y(w,c);if(m.hasEagerState=!0,m.eagerState=E,an(E,w)){var N=l.interleaved;N===null?(m.next=m,nc(l)):(m.next=N.next,N.next=m),l.interleaved=m;return}}catch{}finally{}c=Dp(o,l,m,h),c!==null&&(m=Tt(),hn(c,o,h,m),rm(c,l,h))}}function tm(o){var l=o.alternate;return o===_e||l!==null&&l===_e}function nm(o,l){No=nl=!0;var c=o.pending;c===null?l.next=l:(l.next=c.next,c.next=l),o.pending=l}function rm(o,l,c){if((c&4194240)!==0){var h=l.lanes;h&=o.pendingLanes,c|=h,l.lanes=c,yu(o,c)}}var ol={readContext:Qt,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useInsertionEffect:yt,useLayoutEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useMutableSource:yt,useSyncExternalStore:yt,useId:yt,unstable_isNewReconciler:!1},Px={readContext:Qt,useCallback:function(o,l){return kn().memoizedState=[o,l===void 0?null:l],o},useContext:Qt,useEffect:Kp,useImperativeHandle:function(o,l,c){return c=c!=null?c.concat([o]):null,rl(4194308,4,Gp.bind(null,l,o),c)},useLayoutEffect:function(o,l){return rl(4194308,4,o,l)},useInsertionEffect:function(o,l){return rl(4,2,o,l)},useMemo:function(o,l){var c=kn();return l=l===void 0?null:l,o=o(),c.memoizedState=[o,l],o},useReducer:function(o,l,c){var h=kn();return l=c!==void 0?c(l):l,h.memoizedState=h.baseState=l,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:l},h.queue=o,o=o.dispatch=Rx.bind(null,_e,o),[h.memoizedState,o]},useRef:function(o){var l=kn();return o={current:o},l.memoizedState=o},useState:Up,useDebugValue:mc,useDeferredValue:function(o){return kn().memoizedState=o},useTransition:function(){var o=Up(!1),l=o[0];return o=Ox.bind(null,o[1]),kn().memoizedState=o,[l,o]},useMutableSource:function(){},useSyncExternalStore:function(o,l,c){var h=_e,m=kn();if(je){if(c===void 0)throw Error(t(407));c=c()}else{if(c=l(),rt===null)throw Error(t(349));(Br&30)!==0||Bp(h,l,c)}m.memoizedState=c;var y={value:c,getSnapshot:l};return m.queue=y,Kp(Hp.bind(null,h,y,o),[o]),h.flags|=2048,Oo(9,_p.bind(null,h,y,c,l),void 0,null),c},useId:function(){var o=kn(),l=rt.identifierPrefix;if(je){var c=Dn,h=Rn;c=(h&~(1<<32-ln(h)-1)).toString(32)+c,l=":"+l+"R"+c,c=To++,0<c&&(l+="H"+c.toString(32)),l+=":"}else c=Ax++,l=":"+l+"r"+c.toString(32)+":";return o.memoizedState=l},unstable_isNewReconciler:!1},Lx={readContext:Qt,useCallback:Yp,useContext:Qt,useEffect:pc,useImperativeHandle:Qp,useInsertionEffect:qp,useLayoutEffect:Jp,useMemo:Xp,useReducer:fc,useRef:Wp,useState:function(){return fc(Ao)},useDebugValue:mc,useDeferredValue:function(o){var l=Yt();return Zp(l,Ze.memoizedState,o)},useTransition:function(){var o=fc(Ao)[0],l=Yt().memoizedState;return[o,l]},useMutableSource:jp,useSyncExternalStore:Fp,useId:em,unstable_isNewReconciler:!1},Ix={readContext:Qt,useCallback:Yp,useContext:Qt,useEffect:pc,useImperativeHandle:Qp,useInsertionEffect:qp,useLayoutEffect:Jp,useMemo:Xp,useReducer:hc,useRef:Wp,useState:function(){return hc(Ao)},useDebugValue:mc,useDeferredValue:function(o){var l=Yt();return Ze===null?l.memoizedState=o:Zp(l,Ze.memoizedState,o)},useTransition:function(){var o=hc(Ao)[0],l=Yt().memoizedState;return[o,l]},useMutableSource:jp,useSyncExternalStore:Fp,useId:em,unstable_isNewReconciler:!1};function cn(o,l){if(o&&o.defaultProps){l=Q({},l),o=o.defaultProps;for(var c in o)l[c]===void 0&&(l[c]=o[c]);return l}return l}function gc(o,l,c,h){l=o.memoizedState,c=c(h,l),c=c==null?l:Q({},l,c),o.memoizedState=c,o.lanes===0&&(o.updateQueue.baseState=c)}var sl={isMounted:function(o){return(o=o._reactInternals)?Dr(o)===o:!1},enqueueSetState:function(o,l,c){o=o._reactInternals;var h=Tt(),m=lr(o),y=Ln(h,m);y.payload=l,c!=null&&(y.callback=c),l=rr(o,y,m),l!==null&&(hn(l,o,m,h),Xs(l,o,m))},enqueueReplaceState:function(o,l,c){o=o._reactInternals;var h=Tt(),m=lr(o),y=Ln(h,m);y.tag=1,y.payload=l,c!=null&&(y.callback=c),l=rr(o,y,m),l!==null&&(hn(l,o,m,h),Xs(l,o,m))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var c=Tt(),h=lr(o),m=Ln(c,h);m.tag=2,l!=null&&(m.callback=l),l=rr(o,m,h),l!==null&&(hn(l,o,h,c),Xs(l,o,h))}};function im(o,l,c,h,m,y,w){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(h,y,w):l.prototype&&l.prototype.isPureReactComponent?!go(c,h)||!go(m,y):!0}function om(o,l,c){var h=!1,m=er,y=l.contextType;return typeof y=="object"&&y!==null?y=Qt(y):(m=Pt(l)?Lr:gt.current,h=l.contextTypes,y=(h=h!=null)?Si(o,m):er),l=new l(c,y),o.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=sl,o.stateNode=l,l._reactInternals=o,h&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=m,o.__reactInternalMemoizedMaskedChildContext=y),l}function sm(o,l,c,h){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(c,h),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(c,h),l.state!==o&&sl.enqueueReplaceState(l,l.state,null)}function yc(o,l,c,h){var m=o.stateNode;m.props=c,m.state=o.memoizedState,m.refs={},rc(o);var y=l.contextType;typeof y=="object"&&y!==null?m.context=Qt(y):(y=Pt(l)?Lr:gt.current,m.context=Si(o,y)),m.state=o.memoizedState,y=l.getDerivedStateFromProps,typeof y=="function"&&(gc(o,l,y,c),m.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(l=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),l!==m.state&&sl.enqueueReplaceState(m,m.state,null),Zs(o,c,m,h),m.state=o.memoizedState),typeof m.componentDidMount=="function"&&(o.flags|=4194308)}function Oi(o,l){try{var c="",h=l;do c+=xe(h),h=h.return;while(h);var m=c}catch(y){m=`
Error generating stack: `+y.message+`
`+y.stack}return{value:o,source:l,stack:m,digest:null}}function vc(o,l,c){return{value:o,source:null,stack:c??null,digest:l??null}}function xc(o,l){try{console.error(l.value)}catch(c){setTimeout(function(){throw c})}}var zx=typeof WeakMap=="function"?WeakMap:Map;function lm(o,l,c){c=Ln(-1,c),c.tag=3,c.payload={element:null};var h=l.value;return c.callback=function(){hl||(hl=!0,Lc=h),xc(o,l)},c}function am(o,l,c){c=Ln(-1,c),c.tag=3;var h=o.type.getDerivedStateFromError;if(typeof h=="function"){var m=l.value;c.payload=function(){return h(m)},c.callback=function(){xc(o,l)}}var y=o.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(c.callback=function(){xc(o,l),typeof h!="function"&&(or===null?or=new Set([this]):or.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})}),c}function um(o,l,c){var h=o.pingCache;if(h===null){h=o.pingCache=new zx;var m=new Set;h.set(l,m)}else m=h.get(l),m===void 0&&(m=new Set,h.set(l,m));m.has(c)||(m.add(c),o=Qx.bind(null,o,l,c),l.then(o,o))}function cm(o){do{var l;if((l=o.tag===13)&&(l=o.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return o;o=o.return}while(o!==null);return null}function dm(o,l,c,h,m){return(o.mode&1)===0?(o===l?o.flags|=65536:(o.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(l=Ln(-1,1),l.tag=2,rr(c,l,1))),c.lanes|=1),o):(o.flags|=65536,o.lanes=m,o)}var jx=V.ReactCurrentOwner,Lt=!1;function Nt(o,l,c,h){l.child=o===null?Rp(l,null,c,h):Mi(l,o.child,c,h)}function fm(o,l,c,h,m){c=c.render;var y=l.ref;return Ti(l,m),h=cc(o,l,c,h,y,m),c=dc(),o!==null&&!Lt?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~m,In(o,l,m)):(je&&c&&qu(l),l.flags|=1,Nt(o,l,h,m),l.child)}function hm(o,l,c,h,m){if(o===null){var y=c.type;return typeof y=="function"&&!Hc(y)&&y.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(l.tag=15,l.type=y,pm(o,l,y,h,m)):(o=xl(c.type,null,h,l,l.mode,m),o.ref=l.ref,o.return=l,l.child=o)}if(y=o.child,(o.lanes&m)===0){var w=y.memoizedProps;if(c=c.compare,c=c!==null?c:go,c(w,h)&&o.ref===l.ref)return In(o,l,m)}return l.flags|=1,o=ur(y,h),o.ref=l.ref,o.return=l,l.child=o}function pm(o,l,c,h,m){if(o!==null){var y=o.memoizedProps;if(go(y,h)&&o.ref===l.ref)if(Lt=!1,l.pendingProps=h=y,(o.lanes&m)!==0)(o.flags&131072)!==0&&(Lt=!0);else return l.lanes=o.lanes,In(o,l,m)}return kc(o,l,c,h,m)}function mm(o,l,c){var h=l.pendingProps,m=h.children,y=o!==null?o.memoizedState:null;if(h.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},Oe(Di,Ut),Ut|=c;else{if((c&1073741824)===0)return o=y!==null?y.baseLanes|c:c,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:o,cachePool:null,transitions:null},l.updateQueue=null,Oe(Di,Ut),Ut|=o,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=y!==null?y.baseLanes:c,Oe(Di,Ut),Ut|=h}else y!==null?(h=y.baseLanes|c,l.memoizedState=null):h=c,Oe(Di,Ut),Ut|=h;return Nt(o,l,m,c),l.child}function gm(o,l){var c=l.ref;(o===null&&c!==null||o!==null&&o.ref!==c)&&(l.flags|=512,l.flags|=2097152)}function kc(o,l,c,h,m){var y=Pt(c)?Lr:gt.current;return y=Si(l,y),Ti(l,m),c=cc(o,l,c,h,y,m),h=dc(),o!==null&&!Lt?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~m,In(o,l,m)):(je&&h&&qu(l),l.flags|=1,Nt(o,l,c,m),l.child)}function ym(o,l,c,h,m){if(Pt(c)){var y=!0;Us(l)}else y=!1;if(Ti(l,m),l.stateNode===null)al(o,l),om(l,c,h),yc(l,c,h,m),h=!0;else if(o===null){var w=l.stateNode,E=l.memoizedProps;w.props=E;var N=w.context,D=c.contextType;typeof D=="object"&&D!==null?D=Qt(D):(D=Pt(c)?Lr:gt.current,D=Si(l,D));var F=c.getDerivedStateFromProps,_=typeof F=="function"||typeof w.getSnapshotBeforeUpdate=="function";_||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(E!==h||N!==D)&&sm(l,w,h,D),nr=!1;var z=l.memoizedState;w.state=z,Zs(l,h,w,m),N=l.memoizedState,E!==h||z!==N||Dt.current||nr?(typeof F=="function"&&(gc(l,c,F,h),N=l.memoizedState),(E=nr||im(l,c,E,h,z,N,D))?(_||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(l.flags|=4194308)):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=h,l.memoizedState=N),w.props=h,w.state=N,w.context=D,h=E):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),h=!1)}else{w=l.stateNode,Pp(o,l),E=l.memoizedProps,D=l.type===l.elementType?E:cn(l.type,E),w.props=D,_=l.pendingProps,z=w.context,N=c.contextType,typeof N=="object"&&N!==null?N=Qt(N):(N=Pt(c)?Lr:gt.current,N=Si(l,N));var q=c.getDerivedStateFromProps;(F=typeof q=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(E!==_||z!==N)&&sm(l,w,h,N),nr=!1,z=l.memoizedState,w.state=z,Zs(l,h,w,m);var Y=l.memoizedState;E!==_||z!==Y||Dt.current||nr?(typeof q=="function"&&(gc(l,c,q,h),Y=l.memoizedState),(D=nr||im(l,c,D,h,z,Y,N)||!1)?(F||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,Y,N),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,Y,N)),typeof w.componentDidUpdate=="function"&&(l.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof w.componentDidUpdate!="function"||E===o.memoizedProps&&z===o.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||E===o.memoizedProps&&z===o.memoizedState||(l.flags|=1024),l.memoizedProps=h,l.memoizedState=Y),w.props=h,w.state=Y,w.context=N,h=D):(typeof w.componentDidUpdate!="function"||E===o.memoizedProps&&z===o.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||E===o.memoizedProps&&z===o.memoizedState||(l.flags|=1024),h=!1)}return wc(o,l,c,h,y,m)}function wc(o,l,c,h,m,y){gm(o,l);var w=(l.flags&128)!==0;if(!h&&!w)return m&&Sp(l,c,!1),In(o,l,y);h=l.stateNode,jx.current=l;var E=w&&typeof c.getDerivedStateFromError!="function"?null:h.render();return l.flags|=1,o!==null&&w?(l.child=Mi(l,o.child,null,y),l.child=Mi(l,null,E,y)):Nt(o,l,E,y),l.memoizedState=h.state,m&&Sp(l,c,!0),l.child}function vm(o){var l=o.stateNode;l.pendingContext?kp(o,l.pendingContext,l.pendingContext!==l.context):l.context&&kp(o,l.context,!1),ic(o,l.containerInfo)}function xm(o,l,c,h,m){return Ei(),Yu(m),l.flags|=256,Nt(o,l,c,h),l.child}var Sc={dehydrated:null,treeContext:null,retryLane:0};function Cc(o){return{baseLanes:o,cachePool:null,transitions:null}}function km(o,l,c){var h=l.pendingProps,m=Be.current,y=!1,w=(l.flags&128)!==0,E;if((E=w)||(E=o!==null&&o.memoizedState===null?!1:(m&2)!==0),E?(y=!0,l.flags&=-129):(o===null||o.memoizedState!==null)&&(m|=1),Oe(Be,m&1),o===null)return Qu(l),o=l.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((l.mode&1)===0?l.lanes=1:o.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(w=h.children,o=h.fallback,y?(h=l.mode,y=l.child,w={mode:"hidden",children:w},(h&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=w):y=kl(w,h,0,null),o=Ur(o,h,c,null),y.return=l,o.return=l,y.sibling=o,l.child=y,l.child.memoizedState=Cc(c),l.memoizedState=Sc,o):bc(l,w));if(m=o.memoizedState,m!==null&&(E=m.dehydrated,E!==null))return Fx(o,l,w,h,E,m,c);if(y){y=h.fallback,w=l.mode,m=o.child,E=m.sibling;var N={mode:"hidden",children:h.children};return(w&1)===0&&l.child!==m?(h=l.child,h.childLanes=0,h.pendingProps=N,l.deletions=null):(h=ur(m,N),h.subtreeFlags=m.subtreeFlags&14680064),E!==null?y=ur(E,y):(y=Ur(y,w,c,null),y.flags|=2),y.return=l,h.return=l,h.sibling=y,l.child=h,h=y,y=l.child,w=o.child.memoizedState,w=w===null?Cc(c):{baseLanes:w.baseLanes|c,cachePool:null,transitions:w.transitions},y.memoizedState=w,y.childLanes=o.childLanes&~c,l.memoizedState=Sc,h}return y=o.child,o=y.sibling,h=ur(y,{mode:"visible",children:h.children}),(l.mode&1)===0&&(h.lanes=c),h.return=l,h.sibling=null,o!==null&&(c=l.deletions,c===null?(l.deletions=[o],l.flags|=16):c.push(o)),l.child=h,l.memoizedState=null,h}function bc(o,l){return l=kl({mode:"visible",children:l},o.mode,0,null),l.return=o,o.child=l}function ll(o,l,c,h){return h!==null&&Yu(h),Mi(l,o.child,null,c),o=bc(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function Fx(o,l,c,h,m,y,w){if(c)return l.flags&256?(l.flags&=-257,h=vc(Error(t(422))),ll(o,l,w,h)):l.memoizedState!==null?(l.child=o.child,l.flags|=128,null):(y=h.fallback,m=l.mode,h=kl({mode:"visible",children:h.children},m,0,null),y=Ur(y,m,w,null),y.flags|=2,h.return=l,y.return=l,h.sibling=y,l.child=h,(l.mode&1)!==0&&Mi(l,o.child,null,w),l.child.memoizedState=Cc(w),l.memoizedState=Sc,y);if((l.mode&1)===0)return ll(o,l,w,null);if(m.data==="$!"){if(h=m.nextSibling&&m.nextSibling.dataset,h)var E=h.dgst;return h=E,y=Error(t(419)),h=vc(y,h,void 0),ll(o,l,w,h)}if(E=(w&o.childLanes)!==0,Lt||E){if(h=rt,h!==null){switch(w&-w){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(h.suspendedLanes|w))!==0?0:m,m!==0&&m!==y.retryLane&&(y.retryLane=m,Pn(o,m),hn(h,o,m,-1))}return _c(),h=vc(Error(t(421))),ll(o,l,w,h)}return m.data==="$?"?(l.flags|=128,l.child=o.child,l=Yx.bind(null,o),m._reactRetry=l,null):(o=y.treeContext,Vt=Xn(m.nextSibling),$t=l,je=!0,un=null,o!==null&&(Jt[Gt++]=Rn,Jt[Gt++]=Dn,Jt[Gt++]=Ir,Rn=o.id,Dn=o.overflow,Ir=l),l=bc(l,h.children),l.flags|=4096,l)}function wm(o,l,c){o.lanes|=l;var h=o.alternate;h!==null&&(h.lanes|=l),tc(o.return,l,c)}function Ec(o,l,c,h,m){var y=o.memoizedState;y===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:h,tail:c,tailMode:m}:(y.isBackwards=l,y.rendering=null,y.renderingStartTime=0,y.last=h,y.tail=c,y.tailMode=m)}function Sm(o,l,c){var h=l.pendingProps,m=h.revealOrder,y=h.tail;if(Nt(o,l,h.children,c),h=Be.current,(h&2)!==0)h=h&1|2,l.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&wm(o,c,l);else if(o.tag===19)wm(o,c,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}h&=1}if(Oe(Be,h),(l.mode&1)===0)l.memoizedState=null;else switch(m){case"forwards":for(c=l.child,m=null;c!==null;)o=c.alternate,o!==null&&el(o)===null&&(m=c),c=c.sibling;c=m,c===null?(m=l.child,l.child=null):(m=c.sibling,c.sibling=null),Ec(l,!1,m,c,y);break;case"backwards":for(c=null,m=l.child,l.child=null;m!==null;){if(o=m.alternate,o!==null&&el(o)===null){l.child=m;break}o=m.sibling,m.sibling=c,c=m,m=o}Ec(l,!0,c,null,y);break;case"together":Ec(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function al(o,l){(l.mode&1)===0&&o!==null&&(o.alternate=null,l.alternate=null,l.flags|=2)}function In(o,l,c){if(o!==null&&(l.dependencies=o.dependencies),_r|=l.lanes,(c&l.childLanes)===0)return null;if(o!==null&&l.child!==o.child)throw Error(t(153));if(l.child!==null){for(o=l.child,c=ur(o,o.pendingProps),l.child=c,c.return=l;o.sibling!==null;)o=o.sibling,c=c.sibling=ur(o,o.pendingProps),c.return=l;c.sibling=null}return l.child}function Bx(o,l,c){switch(l.tag){case 3:vm(l),Ei();break;case 5:zp(l);break;case 1:Pt(l.type)&&Us(l);break;case 4:ic(l,l.stateNode.containerInfo);break;case 10:var h=l.type._context,m=l.memoizedProps.value;Oe(Qs,h._currentValue),h._currentValue=m;break;case 13:if(h=l.memoizedState,h!==null)return h.dehydrated!==null?(Oe(Be,Be.current&1),l.flags|=128,null):(c&l.child.childLanes)!==0?km(o,l,c):(Oe(Be,Be.current&1),o=In(o,l,c),o!==null?o.sibling:null);Oe(Be,Be.current&1);break;case 19:if(h=(c&l.childLanes)!==0,(o.flags&128)!==0){if(h)return Sm(o,l,c);l.flags|=128}if(m=l.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Oe(Be,Be.current),h)break;return null;case 22:case 23:return l.lanes=0,mm(o,l,c)}return In(o,l,c)}var Cm,Mc,bm,Em;Cm=function(o,l){for(var c=l.child;c!==null;){if(c.tag===5||c.tag===6)o.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Mc=function(){},bm=function(o,l,c,h){var m=o.memoizedProps;if(m!==h){o=l.stateNode,Fr(xn.current);var y=null;switch(c){case"input":m=tu(o,m),h=tu(o,h),y=[];break;case"select":m=Q({},m,{value:void 0}),h=Q({},h,{value:void 0}),y=[];break;case"textarea":m=iu(o,m),h=iu(o,h),y=[];break;default:typeof m.onClick!="function"&&typeof h.onClick=="function"&&(o.onclick=Hs)}su(c,h);var w;c=null;for(D in m)if(!h.hasOwnProperty(D)&&m.hasOwnProperty(D)&&m[D]!=null)if(D==="style"){var E=m[D];for(w in E)E.hasOwnProperty(w)&&(c||(c={}),c[w]="")}else D!=="dangerouslySetInnerHTML"&&D!=="children"&&D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&D!=="autoFocus"&&(i.hasOwnProperty(D)?y||(y=[]):(y=y||[]).push(D,null));for(D in h){var N=h[D];if(E=m!=null?m[D]:void 0,h.hasOwnProperty(D)&&N!==E&&(N!=null||E!=null))if(D==="style")if(E){for(w in E)!E.hasOwnProperty(w)||N&&N.hasOwnProperty(w)||(c||(c={}),c[w]="");for(w in N)N.hasOwnProperty(w)&&E[w]!==N[w]&&(c||(c={}),c[w]=N[w])}else c||(y||(y=[]),y.push(D,c)),c=N;else D==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,E=E?E.__html:void 0,N!=null&&E!==N&&(y=y||[]).push(D,N)):D==="children"?typeof N!="string"&&typeof N!="number"||(y=y||[]).push(D,""+N):D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&(i.hasOwnProperty(D)?(N!=null&&D==="onScroll"&&De("scroll",o),y||E===N||(y=[])):(y=y||[]).push(D,N))}c&&(y=y||[]).push("style",c);var D=y;(l.updateQueue=D)&&(l.flags|=4)}},Em=function(o,l,c,h){c!==h&&(l.flags|=4)};function Ro(o,l){if(!je)switch(o.tailMode){case"hidden":l=o.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?o.tail=null:c.sibling=null;break;case"collapsed":c=o.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:h.sibling=null}}function vt(o){var l=o.alternate!==null&&o.alternate.child===o.child,c=0,h=0;if(l)for(var m=o.child;m!==null;)c|=m.lanes|m.childLanes,h|=m.subtreeFlags&14680064,h|=m.flags&14680064,m.return=o,m=m.sibling;else for(m=o.child;m!==null;)c|=m.lanes|m.childLanes,h|=m.subtreeFlags,h|=m.flags,m.return=o,m=m.sibling;return o.subtreeFlags|=h,o.childLanes=c,l}function _x(o,l,c){var h=l.pendingProps;switch(Ju(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(l),null;case 1:return Pt(l.type)&&Vs(),vt(l),null;case 3:return h=l.stateNode,Ai(),Pe(Dt),Pe(gt),lc(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(o===null||o.child===null)&&(Js(l)?l.flags|=4:o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,un!==null&&(jc(un),un=null))),Mc(o,l),vt(l),null;case 5:oc(l);var m=Fr(Mo.current);if(c=l.type,o!==null&&l.stateNode!=null)bm(o,l,c,h,m),o.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!h){if(l.stateNode===null)throw Error(t(166));return vt(l),null}if(o=Fr(xn.current),Js(l)){h=l.stateNode,c=l.type;var y=l.memoizedProps;switch(h[vn]=l,h[wo]=y,o=(l.mode&1)!==0,c){case"dialog":De("cancel",h),De("close",h);break;case"iframe":case"object":case"embed":De("load",h);break;case"video":case"audio":for(m=0;m<vo.length;m++)De(vo[m],h);break;case"source":De("error",h);break;case"img":case"image":case"link":De("error",h),De("load",h);break;case"details":De("toggle",h);break;case"input":oh(h,y),De("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!y.multiple},De("invalid",h);break;case"textarea":ah(h,y),De("invalid",h)}su(c,y),m=null;for(var w in y)if(y.hasOwnProperty(w)){var E=y[w];w==="children"?typeof E=="string"?h.textContent!==E&&(y.suppressHydrationWarning!==!0&&_s(h.textContent,E,o),m=["children",E]):typeof E=="number"&&h.textContent!==""+E&&(y.suppressHydrationWarning!==!0&&_s(h.textContent,E,o),m=["children",""+E]):i.hasOwnProperty(w)&&E!=null&&w==="onScroll"&&De("scroll",h)}switch(c){case"input":ys(h),lh(h,y,!0);break;case"textarea":ys(h),ch(h);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(h.onclick=Hs)}h=m,l.updateQueue=h,h!==null&&(l.flags|=4)}else{w=m.nodeType===9?m:m.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=dh(c)),o==="http://www.w3.org/1999/xhtml"?c==="script"?(o=w.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof h.is=="string"?o=w.createElement(c,{is:h.is}):(o=w.createElement(c),c==="select"&&(w=o,h.multiple?w.multiple=!0:h.size&&(w.size=h.size))):o=w.createElementNS(o,c),o[vn]=l,o[wo]=h,Cm(o,l,!1,!1),l.stateNode=o;e:{switch(w=lu(c,h),c){case"dialog":De("cancel",o),De("close",o),m=h;break;case"iframe":case"object":case"embed":De("load",o),m=h;break;case"video":case"audio":for(m=0;m<vo.length;m++)De(vo[m],o);m=h;break;case"source":De("error",o),m=h;break;case"img":case"image":case"link":De("error",o),De("load",o),m=h;break;case"details":De("toggle",o),m=h;break;case"input":oh(o,h),m=tu(o,h),De("invalid",o);break;case"option":m=h;break;case"select":o._wrapperState={wasMultiple:!!h.multiple},m=Q({},h,{value:void 0}),De("invalid",o);break;case"textarea":ah(o,h),m=iu(o,h),De("invalid",o);break;default:m=h}su(c,m),E=m;for(y in E)if(E.hasOwnProperty(y)){var N=E[y];y==="style"?ph(o,N):y==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,N!=null&&fh(o,N)):y==="children"?typeof N=="string"?(c!=="textarea"||N!=="")&&Xi(o,N):typeof N=="number"&&Xi(o,""+N):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(i.hasOwnProperty(y)?N!=null&&y==="onScroll"&&De("scroll",o):N!=null&&I(o,y,N,w))}switch(c){case"input":ys(o),lh(o,h,!1);break;case"textarea":ys(o),ch(o);break;case"option":h.value!=null&&o.setAttribute("value",""+be(h.value));break;case"select":o.multiple=!!h.multiple,y=h.value,y!=null?ci(o,!!h.multiple,y,!1):h.defaultValue!=null&&ci(o,!!h.multiple,h.defaultValue,!0);break;default:typeof m.onClick=="function"&&(o.onclick=Hs)}switch(c){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return vt(l),null;case 6:if(o&&l.stateNode!=null)Em(o,l,o.memoizedProps,h);else{if(typeof h!="string"&&l.stateNode===null)throw Error(t(166));if(c=Fr(Mo.current),Fr(xn.current),Js(l)){if(h=l.stateNode,c=l.memoizedProps,h[vn]=l,(y=h.nodeValue!==c)&&(o=$t,o!==null))switch(o.tag){case 3:_s(h.nodeValue,c,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&_s(h.nodeValue,c,(o.mode&1)!==0)}y&&(l.flags|=4)}else h=(c.nodeType===9?c:c.ownerDocument).createTextNode(h),h[vn]=l,l.stateNode=h}return vt(l),null;case 13:if(Pe(Be),h=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(je&&Vt!==null&&(l.mode&1)!==0&&(l.flags&128)===0)Tp(),Ei(),l.flags|=98560,y=!1;else if(y=Js(l),h!==null&&h.dehydrated!==null){if(o===null){if(!y)throw Error(t(318));if(y=l.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[vn]=l}else Ei(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;vt(l),y=!1}else un!==null&&(jc(un),un=null),y=!0;if(!y)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=c,l):(h=h!==null,h!==(o!==null&&o.memoizedState!==null)&&h&&(l.child.flags|=8192,(l.mode&1)!==0&&(o===null||(Be.current&1)!==0?et===0&&(et=3):_c())),l.updateQueue!==null&&(l.flags|=4),vt(l),null);case 4:return Ai(),Mc(o,l),o===null&&xo(l.stateNode.containerInfo),vt(l),null;case 10:return ec(l.type._context),vt(l),null;case 17:return Pt(l.type)&&Vs(),vt(l),null;case 19:if(Pe(Be),y=l.memoizedState,y===null)return vt(l),null;if(h=(l.flags&128)!==0,w=y.rendering,w===null)if(h)Ro(y,!1);else{if(et!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(w=el(o),w!==null){for(l.flags|=128,Ro(y,!1),h=w.updateQueue,h!==null&&(l.updateQueue=h,l.flags|=4),l.subtreeFlags=0,h=c,c=l.child;c!==null;)y=c,o=h,y.flags&=14680066,w=y.alternate,w===null?(y.childLanes=0,y.lanes=o,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=w.childLanes,y.lanes=w.lanes,y.child=w.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=w.memoizedProps,y.memoizedState=w.memoizedState,y.updateQueue=w.updateQueue,y.type=w.type,o=w.dependencies,y.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),c=c.sibling;return Oe(Be,Be.current&1|2),l.child}o=o.sibling}y.tail!==null&&qe()>Pi&&(l.flags|=128,h=!0,Ro(y,!1),l.lanes=4194304)}else{if(!h)if(o=el(w),o!==null){if(l.flags|=128,h=!0,c=o.updateQueue,c!==null&&(l.updateQueue=c,l.flags|=4),Ro(y,!0),y.tail===null&&y.tailMode==="hidden"&&!w.alternate&&!je)return vt(l),null}else 2*qe()-y.renderingStartTime>Pi&&c!==1073741824&&(l.flags|=128,h=!0,Ro(y,!1),l.lanes=4194304);y.isBackwards?(w.sibling=l.child,l.child=w):(c=y.last,c!==null?c.sibling=w:l.child=w,y.last=w)}return y.tail!==null?(l=y.tail,y.rendering=l,y.tail=l.sibling,y.renderingStartTime=qe(),l.sibling=null,c=Be.current,Oe(Be,h?c&1|2:c&1),l):(vt(l),null);case 22:case 23:return Bc(),h=l.memoizedState!==null,o!==null&&o.memoizedState!==null!==h&&(l.flags|=8192),h&&(l.mode&1)!==0?(Ut&1073741824)!==0&&(vt(l),l.subtreeFlags&6&&(l.flags|=8192)):vt(l),null;case 24:return null;case 25:return null}throw Error(t(156,l.tag))}function Hx(o,l){switch(Ju(l),l.tag){case 1:return Pt(l.type)&&Vs(),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return Ai(),Pe(Dt),Pe(gt),lc(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 5:return oc(l),null;case 13:if(Pe(Be),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(t(340));Ei()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return Pe(Be),null;case 4:return Ai(),null;case 10:return ec(l.type._context),null;case 22:case 23:return Bc(),null;case 24:return null;default:return null}}var ul=!1,xt=!1,$x=typeof WeakSet=="function"?WeakSet:Set,G=null;function Ri(o,l){var c=o.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(h){He(o,l,h)}else c.current=null}function Nc(o,l,c){try{c()}catch(h){He(o,l,h)}}var Mm=!1;function Vx(o,l){if(Bu=As,o=ip(),Ru(o)){if("selectionStart"in o)var c={start:o.selectionStart,end:o.selectionEnd};else e:{c=(c=o.ownerDocument)&&c.defaultView||window;var h=c.getSelection&&c.getSelection();if(h&&h.rangeCount!==0){c=h.anchorNode;var m=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{c.nodeType,y.nodeType}catch{c=null;break e}var w=0,E=-1,N=-1,D=0,F=0,_=o,z=null;t:for(;;){for(var q;_!==c||m!==0&&_.nodeType!==3||(E=w+m),_!==y||h!==0&&_.nodeType!==3||(N=w+h),_.nodeType===3&&(w+=_.nodeValue.length),(q=_.firstChild)!==null;)z=_,_=q;for(;;){if(_===o)break t;if(z===c&&++D===m&&(E=w),z===y&&++F===h&&(N=w),(q=_.nextSibling)!==null)break;_=z,z=_.parentNode}_=q}c=E===-1||N===-1?null:{start:E,end:N}}else c=null}c=c||{start:0,end:0}}else c=null;for(_u={focusedElem:o,selectionRange:c},As=!1,G=l;G!==null;)if(l=G,o=l.child,(l.subtreeFlags&1028)!==0&&o!==null)o.return=l,G=o;else for(;G!==null;){l=G;try{var Y=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(Y!==null){var Z=Y.memoizedProps,Je=Y.memoizedState,O=l.stateNode,T=O.getSnapshotBeforeUpdate(l.elementType===l.type?Z:cn(l.type,Z),Je);O.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var R=l.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch($){He(l,l.return,$)}if(o=l.sibling,o!==null){o.return=l.return,G=o;break}G=l.return}return Y=Mm,Mm=!1,Y}function Do(o,l,c){var h=l.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var m=h=h.next;do{if((m.tag&o)===o){var y=m.destroy;m.destroy=void 0,y!==void 0&&Nc(l,c,y)}m=m.next}while(m!==h)}}function cl(o,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var c=l=l.next;do{if((c.tag&o)===o){var h=c.create;c.destroy=h()}c=c.next}while(c!==l)}}function Tc(o){var l=o.ref;if(l!==null){var c=o.stateNode;switch(o.tag){case 5:o=c;break;default:o=c}typeof l=="function"?l(o):l.current=o}}function Nm(o){var l=o.alternate;l!==null&&(o.alternate=null,Nm(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&(delete l[vn],delete l[wo],delete l[Uu],delete l[Ex],delete l[Mx])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function Tm(o){return o.tag===5||o.tag===3||o.tag===4}function Am(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Tm(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Ac(o,l,c){var h=o.tag;if(h===5||h===6)o=o.stateNode,l?c.nodeType===8?c.parentNode.insertBefore(o,l):c.insertBefore(o,l):(c.nodeType===8?(l=c.parentNode,l.insertBefore(o,c)):(l=c,l.appendChild(o)),c=c._reactRootContainer,c!=null||l.onclick!==null||(l.onclick=Hs));else if(h!==4&&(o=o.child,o!==null))for(Ac(o,l,c),o=o.sibling;o!==null;)Ac(o,l,c),o=o.sibling}function Oc(o,l,c){var h=o.tag;if(h===5||h===6)o=o.stateNode,l?c.insertBefore(o,l):c.appendChild(o);else if(h!==4&&(o=o.child,o!==null))for(Oc(o,l,c),o=o.sibling;o!==null;)Oc(o,l,c),o=o.sibling}var ct=null,dn=!1;function ir(o,l,c){for(c=c.child;c!==null;)Om(o,l,c),c=c.sibling}function Om(o,l,c){if(yn&&typeof yn.onCommitFiberUnmount=="function")try{yn.onCommitFiberUnmount(Cs,c)}catch{}switch(c.tag){case 5:xt||Ri(c,l);case 6:var h=ct,m=dn;ct=null,ir(o,l,c),ct=h,dn=m,ct!==null&&(dn?(o=ct,c=c.stateNode,o.nodeType===8?o.parentNode.removeChild(c):o.removeChild(c)):ct.removeChild(c.stateNode));break;case 18:ct!==null&&(dn?(o=ct,c=c.stateNode,o.nodeType===8?Vu(o.parentNode,c):o.nodeType===1&&Vu(o,c),uo(o)):Vu(ct,c.stateNode));break;case 4:h=ct,m=dn,ct=c.stateNode.containerInfo,dn=!0,ir(o,l,c),ct=h,dn=m;break;case 0:case 11:case 14:case 15:if(!xt&&(h=c.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){m=h=h.next;do{var y=m,w=y.destroy;y=y.tag,w!==void 0&&((y&2)!==0||(y&4)!==0)&&Nc(c,l,w),m=m.next}while(m!==h)}ir(o,l,c);break;case 1:if(!xt&&(Ri(c,l),h=c.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=c.memoizedProps,h.state=c.memoizedState,h.componentWillUnmount()}catch(E){He(c,l,E)}ir(o,l,c);break;case 21:ir(o,l,c);break;case 22:c.mode&1?(xt=(h=xt)||c.memoizedState!==null,ir(o,l,c),xt=h):ir(o,l,c);break;default:ir(o,l,c)}}function Rm(o){var l=o.updateQueue;if(l!==null){o.updateQueue=null;var c=o.stateNode;c===null&&(c=o.stateNode=new $x),l.forEach(function(h){var m=Xx.bind(null,o,h);c.has(h)||(c.add(h),h.then(m,m))})}}function fn(o,l){var c=l.deletions;if(c!==null)for(var h=0;h<c.length;h++){var m=c[h];try{var y=o,w=l,E=w;e:for(;E!==null;){switch(E.tag){case 5:ct=E.stateNode,dn=!1;break e;case 3:ct=E.stateNode.containerInfo,dn=!0;break e;case 4:ct=E.stateNode.containerInfo,dn=!0;break e}E=E.return}if(ct===null)throw Error(t(160));Om(y,w,m),ct=null,dn=!1;var N=m.alternate;N!==null&&(N.return=null),m.return=null}catch(D){He(m,l,D)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)Dm(l,o),l=l.sibling}function Dm(o,l){var c=o.alternate,h=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(fn(l,o),wn(o),h&4){try{Do(3,o,o.return),cl(3,o)}catch(Z){He(o,o.return,Z)}try{Do(5,o,o.return)}catch(Z){He(o,o.return,Z)}}break;case 1:fn(l,o),wn(o),h&512&&c!==null&&Ri(c,c.return);break;case 5:if(fn(l,o),wn(o),h&512&&c!==null&&Ri(c,c.return),o.flags&32){var m=o.stateNode;try{Xi(m,"")}catch(Z){He(o,o.return,Z)}}if(h&4&&(m=o.stateNode,m!=null)){var y=o.memoizedProps,w=c!==null?c.memoizedProps:y,E=o.type,N=o.updateQueue;if(o.updateQueue=null,N!==null)try{E==="input"&&y.type==="radio"&&y.name!=null&&sh(m,y),lu(E,w);var D=lu(E,y);for(w=0;w<N.length;w+=2){var F=N[w],_=N[w+1];F==="style"?ph(m,_):F==="dangerouslySetInnerHTML"?fh(m,_):F==="children"?Xi(m,_):I(m,F,_,D)}switch(E){case"input":nu(m,y);break;case"textarea":uh(m,y);break;case"select":var z=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!y.multiple;var q=y.value;q!=null?ci(m,!!y.multiple,q,!1):z!==!!y.multiple&&(y.defaultValue!=null?ci(m,!!y.multiple,y.defaultValue,!0):ci(m,!!y.multiple,y.multiple?[]:"",!1))}m[wo]=y}catch(Z){He(o,o.return,Z)}}break;case 6:if(fn(l,o),wn(o),h&4){if(o.stateNode===null)throw Error(t(162));m=o.stateNode,y=o.memoizedProps;try{m.nodeValue=y}catch(Z){He(o,o.return,Z)}}break;case 3:if(fn(l,o),wn(o),h&4&&c!==null&&c.memoizedState.isDehydrated)try{uo(l.containerInfo)}catch(Z){He(o,o.return,Z)}break;case 4:fn(l,o),wn(o);break;case 13:fn(l,o),wn(o),m=o.child,m.flags&8192&&(y=m.memoizedState!==null,m.stateNode.isHidden=y,!y||m.alternate!==null&&m.alternate.memoizedState!==null||(Pc=qe())),h&4&&Rm(o);break;case 22:if(F=c!==null&&c.memoizedState!==null,o.mode&1?(xt=(D=xt)||F,fn(l,o),xt=D):fn(l,o),wn(o),h&8192){if(D=o.memoizedState!==null,(o.stateNode.isHidden=D)&&!F&&(o.mode&1)!==0)for(G=o,F=o.child;F!==null;){for(_=G=F;G!==null;){switch(z=G,q=z.child,z.tag){case 0:case 11:case 14:case 15:Do(4,z,z.return);break;case 1:Ri(z,z.return);var Y=z.stateNode;if(typeof Y.componentWillUnmount=="function"){h=z,c=z.return;try{l=h,Y.props=l.memoizedProps,Y.state=l.memoizedState,Y.componentWillUnmount()}catch(Z){He(h,c,Z)}}break;case 5:Ri(z,z.return);break;case 22:if(z.memoizedState!==null){Im(_);continue}}q!==null?(q.return=z,G=q):Im(_)}F=F.sibling}e:for(F=null,_=o;;){if(_.tag===5){if(F===null){F=_;try{m=_.stateNode,D?(y=m.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(E=_.stateNode,N=_.memoizedProps.style,w=N!=null&&N.hasOwnProperty("display")?N.display:null,E.style.display=hh("display",w))}catch(Z){He(o,o.return,Z)}}}else if(_.tag===6){if(F===null)try{_.stateNode.nodeValue=D?"":_.memoizedProps}catch(Z){He(o,o.return,Z)}}else if((_.tag!==22&&_.tag!==23||_.memoizedState===null||_===o)&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===o)break e;for(;_.sibling===null;){if(_.return===null||_.return===o)break e;F===_&&(F=null),_=_.return}F===_&&(F=null),_.sibling.return=_.return,_=_.sibling}}break;case 19:fn(l,o),wn(o),h&4&&Rm(o);break;case 21:break;default:fn(l,o),wn(o)}}function wn(o){var l=o.flags;if(l&2){try{e:{for(var c=o.return;c!==null;){if(Tm(c)){var h=c;break e}c=c.return}throw Error(t(160))}switch(h.tag){case 5:var m=h.stateNode;h.flags&32&&(Xi(m,""),h.flags&=-33);var y=Am(o);Oc(o,y,m);break;case 3:case 4:var w=h.stateNode.containerInfo,E=Am(o);Ac(o,E,w);break;default:throw Error(t(161))}}catch(N){He(o,o.return,N)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function Ux(o,l,c){G=o,Pm(o)}function Pm(o,l,c){for(var h=(o.mode&1)!==0;G!==null;){var m=G,y=m.child;if(m.tag===22&&h){var w=m.memoizedState!==null||ul;if(!w){var E=m.alternate,N=E!==null&&E.memoizedState!==null||xt;E=ul;var D=xt;if(ul=w,(xt=N)&&!D)for(G=m;G!==null;)w=G,N=w.child,w.tag===22&&w.memoizedState!==null?zm(m):N!==null?(N.return=w,G=N):zm(m);for(;y!==null;)G=y,Pm(y),y=y.sibling;G=m,ul=E,xt=D}Lm(o)}else(m.subtreeFlags&8772)!==0&&y!==null?(y.return=m,G=y):Lm(o)}}function Lm(o){for(;G!==null;){var l=G;if((l.flags&8772)!==0){var c=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:xt||cl(5,l);break;case 1:var h=l.stateNode;if(l.flags&4&&!xt)if(c===null)h.componentDidMount();else{var m=l.elementType===l.type?c.memoizedProps:cn(l.type,c.memoizedProps);h.componentDidUpdate(m,c.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var y=l.updateQueue;y!==null&&Ip(l,y,h);break;case 3:var w=l.updateQueue;if(w!==null){if(c=null,l.child!==null)switch(l.child.tag){case 5:c=l.child.stateNode;break;case 1:c=l.child.stateNode}Ip(l,w,c)}break;case 5:var E=l.stateNode;if(c===null&&l.flags&4){c=E;var N=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":N.autoFocus&&c.focus();break;case"img":N.src&&(c.src=N.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var D=l.alternate;if(D!==null){var F=D.memoizedState;if(F!==null){var _=F.dehydrated;_!==null&&uo(_)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}xt||l.flags&512&&Tc(l)}catch(z){He(l,l.return,z)}}if(l===o){G=null;break}if(c=l.sibling,c!==null){c.return=l.return,G=c;break}G=l.return}}function Im(o){for(;G!==null;){var l=G;if(l===o){G=null;break}var c=l.sibling;if(c!==null){c.return=l.return,G=c;break}G=l.return}}function zm(o){for(;G!==null;){var l=G;try{switch(l.tag){case 0:case 11:case 15:var c=l.return;try{cl(4,l)}catch(N){He(l,c,N)}break;case 1:var h=l.stateNode;if(typeof h.componentDidMount=="function"){var m=l.return;try{h.componentDidMount()}catch(N){He(l,m,N)}}var y=l.return;try{Tc(l)}catch(N){He(l,y,N)}break;case 5:var w=l.return;try{Tc(l)}catch(N){He(l,w,N)}}}catch(N){He(l,l.return,N)}if(l===o){G=null;break}var E=l.sibling;if(E!==null){E.return=l.return,G=E;break}G=l.return}}var Wx=Math.ceil,dl=V.ReactCurrentDispatcher,Rc=V.ReactCurrentOwner,Xt=V.ReactCurrentBatchConfig,ve=0,rt=null,Qe=null,dt=0,Ut=0,Di=Zn(0),et=0,Po=null,_r=0,fl=0,Dc=0,Lo=null,It=null,Pc=0,Pi=1/0,zn=null,hl=!1,Lc=null,or=null,pl=!1,sr=null,ml=0,Io=0,Ic=null,gl=-1,yl=0;function Tt(){return(ve&6)!==0?qe():gl!==-1?gl:gl=qe()}function lr(o){return(o.mode&1)===0?1:(ve&2)!==0&&dt!==0?dt&-dt:Tx.transition!==null?(yl===0&&(yl=Ah()),yl):(o=Ee,o!==0||(o=window.event,o=o===void 0?16:Fh(o.type)),o)}function hn(o,l,c,h){if(50<Io)throw Io=0,Ic=null,Error(t(185));io(o,c,h),((ve&2)===0||o!==rt)&&(o===rt&&((ve&2)===0&&(fl|=c),et===4&&ar(o,dt)),zt(o,h),c===1&&ve===0&&(l.mode&1)===0&&(Pi=qe()+500,Ws&&tr()))}function zt(o,l){var c=o.callbackNode;Tv(o,l);var h=Ms(o,o===rt?dt:0);if(h===0)c!==null&&Mh(c),o.callbackNode=null,o.callbackPriority=0;else if(l=h&-h,o.callbackPriority!==l){if(c!=null&&Mh(c),l===1)o.tag===0?Nx(Fm.bind(null,o)):Cp(Fm.bind(null,o)),Cx(function(){(ve&6)===0&&tr()}),c=null;else{switch(Oh(h)){case 1:c=pu;break;case 4:c=Nh;break;case 16:c=Ss;break;case 536870912:c=Th;break;default:c=Ss}c=Km(c,jm.bind(null,o))}o.callbackPriority=l,o.callbackNode=c}}function jm(o,l){if(gl=-1,yl=0,(ve&6)!==0)throw Error(t(327));var c=o.callbackNode;if(Li()&&o.callbackNode!==c)return null;var h=Ms(o,o===rt?dt:0);if(h===0)return null;if((h&30)!==0||(h&o.expiredLanes)!==0||l)l=vl(o,h);else{l=h;var m=ve;ve|=2;var y=_m();(rt!==o||dt!==l)&&(zn=null,Pi=qe()+500,$r(o,l));do try{Jx();break}catch(E){Bm(o,E)}while(!0);Zu(),dl.current=y,ve=m,Qe!==null?l=0:(rt=null,dt=0,l=et)}if(l!==0){if(l===2&&(m=mu(o),m!==0&&(h=m,l=zc(o,m))),l===1)throw c=Po,$r(o,0),ar(o,h),zt(o,qe()),c;if(l===6)ar(o,h);else{if(m=o.current.alternate,(h&30)===0&&!Kx(m)&&(l=vl(o,h),l===2&&(y=mu(o),y!==0&&(h=y,l=zc(o,y))),l===1))throw c=Po,$r(o,0),ar(o,h),zt(o,qe()),c;switch(o.finishedWork=m,o.finishedLanes=h,l){case 0:case 1:throw Error(t(345));case 2:Vr(o,It,zn);break;case 3:if(ar(o,h),(h&130023424)===h&&(l=Pc+500-qe(),10<l)){if(Ms(o,0)!==0)break;if(m=o.suspendedLanes,(m&h)!==h){Tt(),o.pingedLanes|=o.suspendedLanes&m;break}o.timeoutHandle=$u(Vr.bind(null,o,It,zn),l);break}Vr(o,It,zn);break;case 4:if(ar(o,h),(h&4194240)===h)break;for(l=o.eventTimes,m=-1;0<h;){var w=31-ln(h);y=1<<w,w=l[w],w>m&&(m=w),h&=~y}if(h=m,h=qe()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*Wx(h/1960))-h,10<h){o.timeoutHandle=$u(Vr.bind(null,o,It,zn),h);break}Vr(o,It,zn);break;case 5:Vr(o,It,zn);break;default:throw Error(t(329))}}}return zt(o,qe()),o.callbackNode===c?jm.bind(null,o):null}function zc(o,l){var c=Lo;return o.current.memoizedState.isDehydrated&&($r(o,l).flags|=256),o=vl(o,l),o!==2&&(l=It,It=c,l!==null&&jc(l)),o}function jc(o){It===null?It=o:It.push.apply(It,o)}function Kx(o){for(var l=o;;){if(l.flags&16384){var c=l.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var h=0;h<c.length;h++){var m=c[h],y=m.getSnapshot;m=m.value;try{if(!an(y(),m))return!1}catch{return!1}}}if(c=l.child,l.subtreeFlags&16384&&c!==null)c.return=l,l=c;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function ar(o,l){for(l&=~Dc,l&=~fl,o.suspendedLanes|=l,o.pingedLanes&=~l,o=o.expirationTimes;0<l;){var c=31-ln(l),h=1<<c;o[c]=-1,l&=~h}}function Fm(o){if((ve&6)!==0)throw Error(t(327));Li();var l=Ms(o,0);if((l&1)===0)return zt(o,qe()),null;var c=vl(o,l);if(o.tag!==0&&c===2){var h=mu(o);h!==0&&(l=h,c=zc(o,h))}if(c===1)throw c=Po,$r(o,0),ar(o,l),zt(o,qe()),c;if(c===6)throw Error(t(345));return o.finishedWork=o.current.alternate,o.finishedLanes=l,Vr(o,It,zn),zt(o,qe()),null}function Fc(o,l){var c=ve;ve|=1;try{return o(l)}finally{ve=c,ve===0&&(Pi=qe()+500,Ws&&tr())}}function Hr(o){sr!==null&&sr.tag===0&&(ve&6)===0&&Li();var l=ve;ve|=1;var c=Xt.transition,h=Ee;try{if(Xt.transition=null,Ee=1,o)return o()}finally{Ee=h,Xt.transition=c,ve=l,(ve&6)===0&&tr()}}function Bc(){Ut=Di.current,Pe(Di)}function $r(o,l){o.finishedWork=null,o.finishedLanes=0;var c=o.timeoutHandle;if(c!==-1&&(o.timeoutHandle=-1,Sx(c)),Qe!==null)for(c=Qe.return;c!==null;){var h=c;switch(Ju(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Vs();break;case 3:Ai(),Pe(Dt),Pe(gt),lc();break;case 5:oc(h);break;case 4:Ai();break;case 13:Pe(Be);break;case 19:Pe(Be);break;case 10:ec(h.type._context);break;case 22:case 23:Bc()}c=c.return}if(rt=o,Qe=o=ur(o.current,null),dt=Ut=l,et=0,Po=null,Dc=fl=_r=0,It=Lo=null,jr!==null){for(l=0;l<jr.length;l++)if(c=jr[l],h=c.interleaved,h!==null){c.interleaved=null;var m=h.next,y=c.pending;if(y!==null){var w=y.next;y.next=m,h.next=w}c.pending=h}jr=null}return o}function Bm(o,l){do{var c=Qe;try{if(Zu(),tl.current=ol,nl){for(var h=_e.memoizedState;h!==null;){var m=h.queue;m!==null&&(m.pending=null),h=h.next}nl=!1}if(Br=0,nt=Ze=_e=null,No=!1,To=0,Rc.current=null,c===null||c.return===null){et=1,Po=l,Qe=null;break}e:{var y=o,w=c.return,E=c,N=l;if(l=dt,E.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){var D=N,F=E,_=F.tag;if((F.mode&1)===0&&(_===0||_===11||_===15)){var z=F.alternate;z?(F.updateQueue=z.updateQueue,F.memoizedState=z.memoizedState,F.lanes=z.lanes):(F.updateQueue=null,F.memoizedState=null)}var q=cm(w);if(q!==null){q.flags&=-257,dm(q,w,E,y,l),q.mode&1&&um(y,D,l),l=q,N=D;var Y=l.updateQueue;if(Y===null){var Z=new Set;Z.add(N),l.updateQueue=Z}else Y.add(N);break e}else{if((l&1)===0){um(y,D,l),_c();break e}N=Error(t(426))}}else if(je&&E.mode&1){var Je=cm(w);if(Je!==null){(Je.flags&65536)===0&&(Je.flags|=256),dm(Je,w,E,y,l),Yu(Oi(N,E));break e}}y=N=Oi(N,E),et!==4&&(et=2),Lo===null?Lo=[y]:Lo.push(y),y=w;do{switch(y.tag){case 3:y.flags|=65536,l&=-l,y.lanes|=l;var O=lm(y,N,l);Lp(y,O);break e;case 1:E=N;var T=y.type,R=y.stateNode;if((y.flags&128)===0&&(typeof T.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(or===null||!or.has(R)))){y.flags|=65536,l&=-l,y.lanes|=l;var $=am(y,E,l);Lp(y,$);break e}}y=y.return}while(y!==null)}$m(c)}catch(ee){l=ee,Qe===c&&c!==null&&(Qe=c=c.return);continue}break}while(!0)}function _m(){var o=dl.current;return dl.current=ol,o===null?ol:o}function _c(){(et===0||et===3||et===2)&&(et=4),rt===null||(_r&268435455)===0&&(fl&268435455)===0||ar(rt,dt)}function vl(o,l){var c=ve;ve|=2;var h=_m();(rt!==o||dt!==l)&&(zn=null,$r(o,l));do try{qx();break}catch(m){Bm(o,m)}while(!0);if(Zu(),ve=c,dl.current=h,Qe!==null)throw Error(t(261));return rt=null,dt=0,et}function qx(){for(;Qe!==null;)Hm(Qe)}function Jx(){for(;Qe!==null&&!xv();)Hm(Qe)}function Hm(o){var l=Wm(o.alternate,o,Ut);o.memoizedProps=o.pendingProps,l===null?$m(o):Qe=l,Rc.current=null}function $m(o){var l=o;do{var c=l.alternate;if(o=l.return,(l.flags&32768)===0){if(c=_x(c,l,Ut),c!==null){Qe=c;return}}else{if(c=Hx(c,l),c!==null){c.flags&=32767,Qe=c;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{et=6,Qe=null;return}}if(l=l.sibling,l!==null){Qe=l;return}Qe=l=o}while(l!==null);et===0&&(et=5)}function Vr(o,l,c){var h=Ee,m=Xt.transition;try{Xt.transition=null,Ee=1,Gx(o,l,c,h)}finally{Xt.transition=m,Ee=h}return null}function Gx(o,l,c,h){do Li();while(sr!==null);if((ve&6)!==0)throw Error(t(327));c=o.finishedWork;var m=o.finishedLanes;if(c===null)return null;if(o.finishedWork=null,o.finishedLanes=0,c===o.current)throw Error(t(177));o.callbackNode=null,o.callbackPriority=0;var y=c.lanes|c.childLanes;if(Av(o,y),o===rt&&(Qe=rt=null,dt=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||pl||(pl=!0,Km(Ss,function(){return Li(),null})),y=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||y){y=Xt.transition,Xt.transition=null;var w=Ee;Ee=1;var E=ve;ve|=4,Rc.current=null,Vx(o,c),Dm(c,o),mx(_u),As=!!Bu,_u=Bu=null,o.current=c,Ux(c),kv(),ve=E,Ee=w,Xt.transition=y}else o.current=c;if(pl&&(pl=!1,sr=o,ml=m),y=o.pendingLanes,y===0&&(or=null),Cv(c.stateNode),zt(o,qe()),l!==null)for(h=o.onRecoverableError,c=0;c<l.length;c++)m=l[c],h(m.value,{componentStack:m.stack,digest:m.digest});if(hl)throw hl=!1,o=Lc,Lc=null,o;return(ml&1)!==0&&o.tag!==0&&Li(),y=o.pendingLanes,(y&1)!==0?o===Ic?Io++:(Io=0,Ic=o):Io=0,tr(),null}function Li(){if(sr!==null){var o=Oh(ml),l=Xt.transition,c=Ee;try{if(Xt.transition=null,Ee=16>o?16:o,sr===null)var h=!1;else{if(o=sr,sr=null,ml=0,(ve&6)!==0)throw Error(t(331));var m=ve;for(ve|=4,G=o.current;G!==null;){var y=G,w=y.child;if((G.flags&16)!==0){var E=y.deletions;if(E!==null){for(var N=0;N<E.length;N++){var D=E[N];for(G=D;G!==null;){var F=G;switch(F.tag){case 0:case 11:case 15:Do(8,F,y)}var _=F.child;if(_!==null)_.return=F,G=_;else for(;G!==null;){F=G;var z=F.sibling,q=F.return;if(Nm(F),F===D){G=null;break}if(z!==null){z.return=q,G=z;break}G=q}}}var Y=y.alternate;if(Y!==null){var Z=Y.child;if(Z!==null){Y.child=null;do{var Je=Z.sibling;Z.sibling=null,Z=Je}while(Z!==null)}}G=y}}if((y.subtreeFlags&2064)!==0&&w!==null)w.return=y,G=w;else e:for(;G!==null;){if(y=G,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:Do(9,y,y.return)}var O=y.sibling;if(O!==null){O.return=y.return,G=O;break e}G=y.return}}var T=o.current;for(G=T;G!==null;){w=G;var R=w.child;if((w.subtreeFlags&2064)!==0&&R!==null)R.return=w,G=R;else e:for(w=T;G!==null;){if(E=G,(E.flags&2048)!==0)try{switch(E.tag){case 0:case 11:case 15:cl(9,E)}}catch(ee){He(E,E.return,ee)}if(E===w){G=null;break e}var $=E.sibling;if($!==null){$.return=E.return,G=$;break e}G=E.return}}if(ve=m,tr(),yn&&typeof yn.onPostCommitFiberRoot=="function")try{yn.onPostCommitFiberRoot(Cs,o)}catch{}h=!0}return h}finally{Ee=c,Xt.transition=l}}return!1}function Vm(o,l,c){l=Oi(c,l),l=lm(o,l,1),o=rr(o,l,1),l=Tt(),o!==null&&(io(o,1,l),zt(o,l))}function He(o,l,c){if(o.tag===3)Vm(o,o,c);else for(;l!==null;){if(l.tag===3){Vm(l,o,c);break}else if(l.tag===1){var h=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(or===null||!or.has(h))){o=Oi(c,o),o=am(l,o,1),l=rr(l,o,1),o=Tt(),l!==null&&(io(l,1,o),zt(l,o));break}}l=l.return}}function Qx(o,l,c){var h=o.pingCache;h!==null&&h.delete(l),l=Tt(),o.pingedLanes|=o.suspendedLanes&c,rt===o&&(dt&c)===c&&(et===4||et===3&&(dt&130023424)===dt&&500>qe()-Pc?$r(o,0):Dc|=c),zt(o,l)}function Um(o,l){l===0&&((o.mode&1)===0?l=1:(l=Es,Es<<=1,(Es&130023424)===0&&(Es=4194304)));var c=Tt();o=Pn(o,l),o!==null&&(io(o,l,c),zt(o,c))}function Yx(o){var l=o.memoizedState,c=0;l!==null&&(c=l.retryLane),Um(o,c)}function Xx(o,l){var c=0;switch(o.tag){case 13:var h=o.stateNode,m=o.memoizedState;m!==null&&(c=m.retryLane);break;case 19:h=o.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(l),Um(o,c)}var Wm;Wm=function(o,l,c){if(o!==null)if(o.memoizedProps!==l.pendingProps||Dt.current)Lt=!0;else{if((o.lanes&c)===0&&(l.flags&128)===0)return Lt=!1,Bx(o,l,c);Lt=(o.flags&131072)!==0}else Lt=!1,je&&(l.flags&1048576)!==0&&bp(l,qs,l.index);switch(l.lanes=0,l.tag){case 2:var h=l.type;al(o,l),o=l.pendingProps;var m=Si(l,gt.current);Ti(l,c),m=cc(null,l,h,o,m,c);var y=dc();return l.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,Pt(h)?(y=!0,Us(l)):y=!1,l.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,rc(l),m.updater=sl,l.stateNode=m,m._reactInternals=l,yc(l,h,o,c),l=wc(null,l,h,!0,y,c)):(l.tag=0,je&&y&&qu(l),Nt(null,l,m,c),l=l.child),l;case 16:h=l.elementType;e:{switch(al(o,l),o=l.pendingProps,m=h._init,h=m(h._payload),l.type=h,m=l.tag=ek(h),o=cn(h,o),m){case 0:l=kc(null,l,h,o,c);break e;case 1:l=ym(null,l,h,o,c);break e;case 11:l=fm(null,l,h,o,c);break e;case 14:l=hm(null,l,h,cn(h.type,o),c);break e}throw Error(t(306,h,""))}return l;case 0:return h=l.type,m=l.pendingProps,m=l.elementType===h?m:cn(h,m),kc(o,l,h,m,c);case 1:return h=l.type,m=l.pendingProps,m=l.elementType===h?m:cn(h,m),ym(o,l,h,m,c);case 3:e:{if(vm(l),o===null)throw Error(t(387));h=l.pendingProps,y=l.memoizedState,m=y.element,Pp(o,l),Zs(l,h,null,c);var w=l.memoizedState;if(h=w.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},l.updateQueue.baseState=y,l.memoizedState=y,l.flags&256){m=Oi(Error(t(423)),l),l=xm(o,l,h,c,m);break e}else if(h!==m){m=Oi(Error(t(424)),l),l=xm(o,l,h,c,m);break e}else for(Vt=Xn(l.stateNode.containerInfo.firstChild),$t=l,je=!0,un=null,c=Rp(l,null,h,c),l.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Ei(),h===m){l=In(o,l,c);break e}Nt(o,l,h,c)}l=l.child}return l;case 5:return zp(l),o===null&&Qu(l),h=l.type,m=l.pendingProps,y=o!==null?o.memoizedProps:null,w=m.children,Hu(h,m)?w=null:y!==null&&Hu(h,y)&&(l.flags|=32),gm(o,l),Nt(o,l,w,c),l.child;case 6:return o===null&&Qu(l),null;case 13:return km(o,l,c);case 4:return ic(l,l.stateNode.containerInfo),h=l.pendingProps,o===null?l.child=Mi(l,null,h,c):Nt(o,l,h,c),l.child;case 11:return h=l.type,m=l.pendingProps,m=l.elementType===h?m:cn(h,m),fm(o,l,h,m,c);case 7:return Nt(o,l,l.pendingProps,c),l.child;case 8:return Nt(o,l,l.pendingProps.children,c),l.child;case 12:return Nt(o,l,l.pendingProps.children,c),l.child;case 10:e:{if(h=l.type._context,m=l.pendingProps,y=l.memoizedProps,w=m.value,Oe(Qs,h._currentValue),h._currentValue=w,y!==null)if(an(y.value,w)){if(y.children===m.children&&!Dt.current){l=In(o,l,c);break e}}else for(y=l.child,y!==null&&(y.return=l);y!==null;){var E=y.dependencies;if(E!==null){w=y.child;for(var N=E.firstContext;N!==null;){if(N.context===h){if(y.tag===1){N=Ln(-1,c&-c),N.tag=2;var D=y.updateQueue;if(D!==null){D=D.shared;var F=D.pending;F===null?N.next=N:(N.next=F.next,F.next=N),D.pending=N}}y.lanes|=c,N=y.alternate,N!==null&&(N.lanes|=c),tc(y.return,c,l),E.lanes|=c;break}N=N.next}}else if(y.tag===10)w=y.type===l.type?null:y.child;else if(y.tag===18){if(w=y.return,w===null)throw Error(t(341));w.lanes|=c,E=w.alternate,E!==null&&(E.lanes|=c),tc(w,c,l),w=y.sibling}else w=y.child;if(w!==null)w.return=y;else for(w=y;w!==null;){if(w===l){w=null;break}if(y=w.sibling,y!==null){y.return=w.return,w=y;break}w=w.return}y=w}Nt(o,l,m.children,c),l=l.child}return l;case 9:return m=l.type,h=l.pendingProps.children,Ti(l,c),m=Qt(m),h=h(m),l.flags|=1,Nt(o,l,h,c),l.child;case 14:return h=l.type,m=cn(h,l.pendingProps),m=cn(h.type,m),hm(o,l,h,m,c);case 15:return pm(o,l,l.type,l.pendingProps,c);case 17:return h=l.type,m=l.pendingProps,m=l.elementType===h?m:cn(h,m),al(o,l),l.tag=1,Pt(h)?(o=!0,Us(l)):o=!1,Ti(l,c),om(l,h,m),yc(l,h,m,c),wc(null,l,h,!0,o,c);case 19:return Sm(o,l,c);case 22:return mm(o,l,c)}throw Error(t(156,l.tag))};function Km(o,l){return Eh(o,l)}function Zx(o,l,c,h){this.tag=o,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zt(o,l,c,h){return new Zx(o,l,c,h)}function Hc(o){return o=o.prototype,!(!o||!o.isReactComponent)}function ek(o){if(typeof o=="function")return Hc(o)?1:0;if(o!=null){if(o=o.$$typeof,o===Ce)return 11;if(o===Mt)return 14}return 2}function ur(o,l){var c=o.alternate;return c===null?(c=Zt(o.tag,l,o.key,o.mode),c.elementType=o.elementType,c.type=o.type,c.stateNode=o.stateNode,c.alternate=o,o.alternate=c):(c.pendingProps=l,c.type=o.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=o.flags&14680064,c.childLanes=o.childLanes,c.lanes=o.lanes,c.child=o.child,c.memoizedProps=o.memoizedProps,c.memoizedState=o.memoizedState,c.updateQueue=o.updateQueue,l=o.dependencies,c.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},c.sibling=o.sibling,c.index=o.index,c.ref=o.ref,c}function xl(o,l,c,h,m,y){var w=2;if(h=o,typeof o=="function")Hc(o)&&(w=1);else if(typeof o=="string")w=5;else e:switch(o){case se:return Ur(c.children,m,y,l);case de:w=8,m|=8;break;case ue:return o=Zt(12,c,l,m|2),o.elementType=ue,o.lanes=y,o;case We:return o=Zt(13,c,l,m),o.elementType=We,o.lanes=y,o;case Et:return o=Zt(19,c,l,m),o.elementType=Et,o.lanes=y,o;case Ne:return kl(c,m,y,l);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case te:w=10;break e;case ye:w=9;break e;case Ce:w=11;break e;case Mt:w=14;break e;case Ke:w=16,h=null;break e}throw Error(t(130,o==null?o:typeof o,""))}return l=Zt(w,c,l,m),l.elementType=o,l.type=h,l.lanes=y,l}function Ur(o,l,c,h){return o=Zt(7,o,h,l),o.lanes=c,o}function kl(o,l,c,h){return o=Zt(22,o,h,l),o.elementType=Ne,o.lanes=c,o.stateNode={isHidden:!1},o}function $c(o,l,c){return o=Zt(6,o,null,l),o.lanes=c,o}function Vc(o,l,c){return l=Zt(4,o.children!==null?o.children:[],o.key,l),l.lanes=c,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}function tk(o,l,c,h,m){this.tag=l,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gu(0),this.expirationTimes=gu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gu(0),this.identifierPrefix=h,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function Uc(o,l,c,h,m,y,w,E,N){return o=new tk(o,l,c,E,N),l===1?(l=1,y===!0&&(l|=8)):l=0,y=Zt(3,null,null,l),o.current=y,y.stateNode=o,y.memoizedState={element:h,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},rc(y),o}function nk(o,l,c){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:K,key:h==null?null:""+h,children:o,containerInfo:l,implementation:c}}function qm(o){if(!o)return er;o=o._reactInternals;e:{if(Dr(o)!==o||o.tag!==1)throw Error(t(170));var l=o;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(Pt(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(t(171))}if(o.tag===1){var c=o.type;if(Pt(c))return wp(o,c,l)}return l}function Jm(o,l,c,h,m,y,w,E,N){return o=Uc(c,h,!0,o,m,y,w,E,N),o.context=qm(null),c=o.current,h=Tt(),m=lr(c),y=Ln(h,m),y.callback=l??null,rr(c,y,m),o.current.lanes=m,io(o,m,h),zt(o,h),o}function wl(o,l,c,h){var m=l.current,y=Tt(),w=lr(m);return c=qm(c),l.context===null?l.context=c:l.pendingContext=c,l=Ln(y,w),l.payload={element:o},h=h===void 0?null:h,h!==null&&(l.callback=h),o=rr(m,l,w),o!==null&&(hn(o,m,w,y),Xs(o,m,w)),w}function Sl(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function Gm(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var c=o.retryLane;o.retryLane=c!==0&&c<l?c:l}}function Wc(o,l){Gm(o,l),(o=o.alternate)&&Gm(o,l)}function rk(){return null}var Qm=typeof reportError=="function"?reportError:function(o){console.error(o)};function Kc(o){this._internalRoot=o}Cl.prototype.render=Kc.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(t(409));wl(o,l,null,null)},Cl.prototype.unmount=Kc.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;Hr(function(){wl(null,o,null,null)}),l[An]=null}};function Cl(o){this._internalRoot=o}Cl.prototype.unstable_scheduleHydration=function(o){if(o){var l=Ph();o={blockedOn:null,target:o,priority:l};for(var c=0;c<Gn.length&&l!==0&&l<Gn[c].priority;c++);Gn.splice(c,0,o),c===0&&zh(o)}};function qc(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function bl(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function Ym(){}function ik(o,l,c,h,m){if(m){if(typeof h=="function"){var y=h;h=function(){var D=Sl(w);y.call(D)}}var w=Jm(l,h,o,0,null,!1,!1,"",Ym);return o._reactRootContainer=w,o[An]=w.current,xo(o.nodeType===8?o.parentNode:o),Hr(),w}for(;m=o.lastChild;)o.removeChild(m);if(typeof h=="function"){var E=h;h=function(){var D=Sl(N);E.call(D)}}var N=Uc(o,0,!1,null,null,!1,!1,"",Ym);return o._reactRootContainer=N,o[An]=N.current,xo(o.nodeType===8?o.parentNode:o),Hr(function(){wl(l,N,c,h)}),N}function El(o,l,c,h,m){var y=c._reactRootContainer;if(y){var w=y;if(typeof m=="function"){var E=m;m=function(){var N=Sl(w);E.call(N)}}wl(l,w,o,m)}else w=ik(c,l,o,m,h);return Sl(w)}Rh=function(o){switch(o.tag){case 3:var l=o.stateNode;if(l.current.memoizedState.isDehydrated){var c=ro(l.pendingLanes);c!==0&&(yu(l,c|1),zt(l,qe()),(ve&6)===0&&(Pi=qe()+500,tr()))}break;case 13:Hr(function(){var h=Pn(o,1);if(h!==null){var m=Tt();hn(h,o,1,m)}}),Wc(o,1)}},vu=function(o){if(o.tag===13){var l=Pn(o,134217728);if(l!==null){var c=Tt();hn(l,o,134217728,c)}Wc(o,134217728)}},Dh=function(o){if(o.tag===13){var l=lr(o),c=Pn(o,l);if(c!==null){var h=Tt();hn(c,o,l,h)}Wc(o,l)}},Ph=function(){return Ee},Lh=function(o,l){var c=Ee;try{return Ee=o,l()}finally{Ee=c}},cu=function(o,l,c){switch(l){case"input":if(nu(o,c),l=c.name,c.type==="radio"&&l!=null){for(c=o;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<c.length;l++){var h=c[l];if(h!==o&&h.form===o.form){var m=$s(h);if(!m)throw Error(t(90));ih(h),nu(h,m)}}}break;case"textarea":uh(o,c);break;case"select":l=c.value,l!=null&&ci(o,!!c.multiple,l,!1)}},vh=Fc,xh=Hr;var ok={usingClientEntryPoint:!1,Events:[So,ki,$s,gh,yh,Fc]},zo={findFiberByHostInstance:Pr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sk={bundleType:zo.bundleType,version:zo.version,rendererPackageName:zo.rendererPackageName,rendererConfig:zo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:V.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=Ch(o),o===null?null:o.stateNode},findFiberByHostInstance:zo.findFiberByHostInstance||rk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ml=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ml.isDisabled&&Ml.supportsFiber)try{Cs=Ml.inject(sk),yn=Ml}catch{}}return jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ok,jt.createPortal=function(o,l){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qc(l))throw Error(t(200));return nk(o,l,null,c)},jt.createRoot=function(o,l){if(!qc(o))throw Error(t(299));var c=!1,h="",m=Qm;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(h=l.identifierPrefix),l.onRecoverableError!==void 0&&(m=l.onRecoverableError)),l=Uc(o,1,!1,null,null,c,!1,h,m),o[An]=l.current,xo(o.nodeType===8?o.parentNode:o),new Kc(l)},jt.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(t(188)):(o=Object.keys(o).join(","),Error(t(268,o)));return o=Ch(l),o=o===null?null:o.stateNode,o},jt.flushSync=function(o){return Hr(o)},jt.hydrate=function(o,l,c){if(!bl(l))throw Error(t(200));return El(null,o,l,!0,c)},jt.hydrateRoot=function(o,l,c){if(!qc(o))throw Error(t(405));var h=c!=null&&c.hydratedSources||null,m=!1,y="",w=Qm;if(c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onRecoverableError!==void 0&&(w=c.onRecoverableError)),l=Jm(l,null,o,1,c??null,m,!1,y,w),o[An]=l.current,xo(o),h)for(o=0;o<h.length;o++)c=h[o],m=c._getVersion,m=m(c._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[c,m]:l.mutableSourceEagerHydrationData.push(c,m);return new Cl(l)},jt.render=function(o,l,c){if(!bl(l))throw Error(t(200));return El(null,o,l,!1,c)},jt.unmountComponentAtNode=function(o){if(!bl(o))throw Error(t(40));return o._reactRootContainer?(Hr(function(){El(null,null,o,!1,function(){o._reactRootContainer=null,o[An]=null})}),!0):!1},jt.unstable_batchedUpdates=Fc,jt.unstable_renderSubtreeIntoContainer=function(o,l,c,h){if(!bl(c))throw Error(t(200));if(o==null||o._reactInternals===void 0)throw Error(t(38));return El(o,l,c,!1,h)},jt.version="18.3.1-next-f1338f8080-20240426",jt}var og;function G0(){if(og)return Qc.exports;og=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Qc.exports=hk(),Qc.exports}var sg;function pk(){if(sg)return Nl;sg=1;var n=G0();return Nl.createRoot=n.createRoot,Nl.hydrateRoot=n.hydrateRoot,Nl}var mk=pk();const gk=n=>n instanceof Error?n.message+`
`+n.stack:JSON.stringify(n,null,2);class yk extends Se.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}render(){return this.state.hasError?b.jsxs("div",{className:"p-4 border border-red-500 rounded",children:[b.jsx("h2",{className:"text-red-500",children:"Something went wrong."}),b.jsx("pre",{className:"mt-2 text-sm",children:gk(this.state.error)})]}):this.props.children}}function ft(n){this.content=n}ft.prototype={constructor:ft,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,i=r.find(n),s=r.content.slice();return i==-1?s.push(t||n,e):(s[i+1]=e,t&&(s[i]=t)),new ft(s)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new ft(t)},addToStart:function(n,e){return new ft([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new ft(t)},addBefore:function(n,e,t){var r=this.remove(e),i=r.content.slice(),s=r.find(n);return i.splice(s==-1?i.length:s,0,e,t),new ft(i)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=ft.from(n),n.size?new ft(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=ft.from(n),n.size?new ft(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=ft.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};ft.from=function(n){if(n instanceof ft)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new ft(e)};function Q0(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),s=e.child(r);if(i==s){t+=i.nodeSize;continue}if(!i.sameMarkup(s))return t;if(i.isText&&i.text!=s.text){for(let a=0;i.text[a]==s.text[a];a++)t++;return t}if(i.content.size||s.content.size){let a=Q0(i.content,s.content,t+1);if(a!=null)return a}t+=i.nodeSize}}function Y0(n,e,t,r){for(let i=n.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:t,b:r};let a=n.child(--i),u=e.child(--s),d=a.nodeSize;if(a==u){t-=d,r-=d;continue}if(!a.sameMarkup(u))return{a:t,b:r};if(a.isText&&a.text!=u.text){let f=0,p=Math.min(a.text.length,u.text.length);for(;f<p&&a.text[a.text.length-f-1]==u.text[u.text.length-f-1];)f++,t--,r--;return{a:t,b:r}}if(a.content.size||u.content.size){let f=Y0(a.content,u.content,t-1,r-1);if(f)return f}t-=d,r-=d}}class L{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,s){for(let a=0,u=0;u<t;a++){let d=this.content[a],f=u+d.nodeSize;if(f>e&&r(d,i+u,s||null,a)!==!1&&d.content.size){let p=u+1;d.nodesBetween(Math.max(0,e-p),Math.min(d.content.size,t-p),r,i+p)}u=f}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let s="",a=!0;return this.nodesBetween(e,t,(u,d)=>{let f=u.isText?u.text.slice(Math.max(e,d)-d,t-d):u.isLeaf?i?typeof i=="function"?i(u):i:u.type.spec.leafText?u.type.spec.leafText(u):"":"";u.isBlock&&(u.isLeaf&&f||u.isTextblock)&&r&&(a?a=!1:s+=r),s+=f},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new L(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let s=0,a=0;a<t;s++){let u=this.content[s],d=a+u.nodeSize;d>e&&((a<e||d>t)&&(u.isText?u=u.cut(Math.max(0,e-a),Math.min(u.text.length,t-a)):u=u.cut(Math.max(0,e-a-1),Math.min(u.content.size,t-a-1))),r.push(u),i+=u.nodeSize),a=d}return new L(r,i)}cutByIndex(e,t){return e==t?L.empty:e==0&&t==this.content.length?this:new L(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),s=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new L(i,s)}addToStart(e){return new L([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new L(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return Q0(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return Y0(this,e,t,r)}findIndex(e,t=-1){if(e==0)return Tl(0,e);if(e==this.size)return Tl(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),a=i+s.nodeSize;if(a>=e)return a==e||t>0?Tl(r+1,a):Tl(r,i);i=a}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return L.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new L(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return L.empty;let t,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(t||(t=e.slice(0,i)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new L(t||e,r)}static from(e){if(!e)return L.empty;if(e instanceof L)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new L([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}L.empty=new L([],0);const Zc={index:0,offset:0};function Tl(n,e){return Zc.index=n,Zc.offset=e,Zc}function Yl(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!Yl(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!Yl(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let Te=class Ad{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(s)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Yl(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);let i=r.create(t.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Ad.none;if(e instanceof Ad)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}};Te.none=[];class Xl extends Error{}class U{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=Z0(this.content,e+this.openStart,t);return r&&new U(r,this.openStart,this.openEnd)}removeBetween(e,t){return new U(X0(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return U.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new U(L.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)i++;return new U(e,r,i)}}U.empty=new U(L.empty,0,0);function X0(n,e,t){let{index:r,offset:i}=n.findIndex(e),s=n.maybeChild(r),{index:a,offset:u}=n.findIndex(t);if(i==e||s.isText){if(u!=t&&!n.child(a).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=a)throw new RangeError("Removing non-flat range");return n.replaceChild(r,s.copy(X0(s.content,e-i-1,t-i-1)))}function Z0(n,e,t,r){let{index:i,offset:s}=n.findIndex(e),a=n.maybeChild(i);if(s==e||a.isText)return n.cut(0,e).append(t).append(n.cut(e));let u=Z0(a.content,e-s-1,t);return u&&n.replaceChild(i,a.copy(u))}function vk(n,e,t){if(t.openStart>n.depth)throw new Xl("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new Xl("Inconsistent open depths");return ey(n,e,t,0)}function ey(n,e,t,r){let i=n.index(r),s=n.node(r);if(i==e.index(r)&&r<n.depth-t.openStart){let a=ey(n,e,t,r+1);return s.copy(s.content.replaceChild(i,a))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let a=n.parent,u=a.content;return Zr(a,u.cut(0,n.parentOffset).append(t.content).append(u.cut(e.parentOffset)))}else{let{start:a,end:u}=xk(t,n);return Zr(s,ny(n,a,u,e,r))}else return Zr(s,Zl(n,e,r))}function ty(n,e){if(!e.type.compatibleContent(n.type))throw new Xl("Cannot join "+e.type.name+" onto "+n.type.name)}function Od(n,e,t){let r=n.node(t);return ty(r,e.node(t)),r}function Xr(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function Uo(n,e,t,r){let i=(e||n).node(t),s=0,a=e?e.index(t):i.childCount;n&&(s=n.index(t),n.depth>t?s++:n.textOffset&&(Xr(n.nodeAfter,r),s++));for(let u=s;u<a;u++)Xr(i.child(u),r);e&&e.depth==t&&e.textOffset&&Xr(e.nodeBefore,r)}function Zr(n,e){return n.type.checkContent(e),n.copy(e)}function ny(n,e,t,r,i){let s=n.depth>i&&Od(n,e,i+1),a=r.depth>i&&Od(t,r,i+1),u=[];return Uo(null,n,i,u),s&&a&&e.index(i)==t.index(i)?(ty(s,a),Xr(Zr(s,ny(n,e,t,r,i+1)),u)):(s&&Xr(Zr(s,Zl(n,e,i+1)),u),Uo(e,t,i,u),a&&Xr(Zr(a,Zl(t,r,i+1)),u)),Uo(r,null,i,u),new L(u)}function Zl(n,e,t){let r=[];if(Uo(null,n,t,r),n.depth>t){let i=Od(n,e,t+1);Xr(Zr(i,Zl(n,e,t+1)),r)}return Uo(e,null,t,r),new L(r)}function xk(n,e){let t=e.depth-n.openStart,i=e.node(t).copy(n.content);for(let s=t-1;s>=0;s--)i=e.node(s).copy(L.from(i));return{start:i.resolveNoCache(n.openStart+t),end:i.resolveNoCache(i.content.size-n.openEnd-t)}}class es{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(t);return r?e.child(t).cut(r):i}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],i=t==0?0:this.path[t*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return Te.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),i=e.maybeChild(t);if(!r){let u=r;r=i,i=u}let s=r.marks;for(var a=0;a<s.length;a++)s[a].type.spec.inclusive===!1&&(!i||!s[a].isInSet(i.marks))&&(s=s[a--].removeFromSet(s));return s}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new ea(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],i=0,s=t;for(let a=e;;){let{index:u,offset:d}=a.content.findIndex(s),f=s-d;if(r.push(a,u,i+d),!f||(a=a.child(u),a.isText))break;s=f-1,i+=d+1}return new es(t,r,s)}static resolveCached(e,t){let r=lg.get(e);if(r)for(let s=0;s<r.elts.length;s++){let a=r.elts[s];if(a.pos==t)return a}else lg.set(e,r=new kk);let i=r.elts[r.i]=es.resolve(e,t);return r.i=(r.i+1)%wk,i}}class kk{constructor(){this.elts=[],this.i=0}}const wk=12,lg=new WeakMap;class ea{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Sk=Object.create(null);let Sr=class Rd{constructor(e,t,r,i=Te.none){this.type=e,this.attrs=t,this.marks=i,this.content=r||L.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,i=0){this.content.nodesBetween(e,t,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,i){return this.content.textBetween(e,t,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&Yl(this.attrs,t||e.defaultAttrs||Sk)&&Te.sameSet(this.marks,r||Te.none)}copy(e=null){return e==this.content?this:new Rd(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Rd(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return U.empty;let i=this.resolve(e),s=this.resolve(t),a=r?0:i.sharedDepth(t),u=i.start(a),f=i.node(a).content.cut(i.pos-u,s.pos-u);return new U(f,i.depth-a,s.depth-a)}replace(e,t,r){return vk(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:i}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(i==e||t.isText)return t;e-=i+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let i=this.content.child(t-1);return{node:i,index:t-1,offset:r-i.nodeSize}}resolve(e){return es.resolveCached(this,e)}resolveNoCache(e){return es.resolve(this,e)}rangeHasMark(e,t,r){let i=!1;return t>e&&this.nodesBetween(e,t,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),ry(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=L.empty,i=0,s=r.childCount){let a=this.contentMatchAt(e).matchFragment(r,i,s),u=a&&a.matchFragment(this.content,t);if(!u||!u.validEnd)return!1;for(let d=i;d<s;d++)if(!this.type.allowsMarks(r.child(d).marks))return!1;return!0}canReplaceWith(e,t,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),a=s&&s.matchFragment(this.content,t);return a?a.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Te.none;for(let t=0;t<this.marks.length;t++){let r=this.marks[t];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Te.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let i=L.fromJSON(e,t.content),s=e.nodeType(t.type).create(t.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};Sr.prototype.text=void 0;class ta extends Sr{constructor(e,t,r,i){if(super(e,t,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):ry(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new ta(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new ta(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function ry(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class ri{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new Ck(e,t);if(r.next==null)return ri.empty;let i=iy(r);r.next&&r.err("Unexpected trailing text");let s=Ok(Ak(i));return Rk(s,r),s}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let i=this;for(let s=t;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let i=[this];function s(a,u){let d=a.matchFragment(e,r);if(d&&(!t||d.validEnd))return L.from(u.map(f=>f.createAndFill()));for(let f=0;f<a.next.length;f++){let{type:p,next:g}=a.next[f];if(!(p.isText||p.hasRequiredAttrs())&&i.indexOf(g)==-1){i.push(g);let v=s(g,u.concat(p));if(v)return v}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let a=[];for(let u=i;u.type;u=u.via)a.push(u.type);return a.reverse()}for(let a=0;a<s.next.length;a++){let{type:u,next:d}=s.next[a];!u.isLeaf&&!u.hasRequiredAttrs()&&!(u.name in t)&&(!i.type||d.validEnd)&&(r.push({match:u.contentMatch,type:u,via:i}),t[u.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&t(r.next[i].next)}return t(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let a=0;a<r.next.length;a++)s+=(a?", ":"")+r.next[a].type.name+"->"+e.indexOf(r.next[a].next);return s}).join(`
`)}}ri.empty=new ri(!0);class Ck{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function iy(n){let e=[];do e.push(bk(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function bk(n){let e=[];do e.push(Ek(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function Ek(n){let e=Tk(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=Mk(n,e);else break;return e}function ag(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function Mk(n,e){let t=ag(n),r=t;return n.eat(",")&&(n.next!="}"?r=ag(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function Nk(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let i=[];for(let s in t){let a=t[s];a.isInGroup(e)&&i.push(a)}return i.length==0&&n.err("No node type or group '"+e+"' found"),i}function Tk(n){if(n.eat("(")){let e=iy(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=Nk(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function Ak(n){let e=[[]];return i(s(n,0),t()),e;function t(){return e.push([])-1}function r(a,u,d){let f={term:d,to:u};return e[a].push(f),f}function i(a,u){a.forEach(d=>d.to=u)}function s(a,u){if(a.type=="choice")return a.exprs.reduce((d,f)=>d.concat(s(f,u)),[]);if(a.type=="seq")for(let d=0;;d++){let f=s(a.exprs[d],u);if(d==a.exprs.length-1)return f;i(f,u=t())}else if(a.type=="star"){let d=t();return r(u,d),i(s(a.expr,d),d),[r(d)]}else if(a.type=="plus"){let d=t();return i(s(a.expr,u),d),i(s(a.expr,d),d),[r(d)]}else{if(a.type=="opt")return[r(u)].concat(s(a.expr,u));if(a.type=="range"){let d=u;for(let f=0;f<a.min;f++){let p=t();i(s(a.expr,d),p),d=p}if(a.max==-1)i(s(a.expr,d),d);else for(let f=a.min;f<a.max;f++){let p=t();r(d,p),i(s(a.expr,d),p),d=p}return[r(d)]}else{if(a.type=="name")return[r(u,void 0,a.value)];throw new Error("Unknown expr type")}}}}function oy(n,e){return e-n}function ug(n,e){let t=[];return r(e),t.sort(oy);function r(i){let s=n[i];if(s.length==1&&!s[0].term)return r(s[0].to);t.push(i);for(let a=0;a<s.length;a++){let{term:u,to:d}=s[a];!u&&t.indexOf(d)==-1&&r(d)}}}function Ok(n){let e=Object.create(null);return t(ug(n,0));function t(r){let i=[];r.forEach(a=>{n[a].forEach(({term:u,to:d})=>{if(!u)return;let f;for(let p=0;p<i.length;p++)i[p][0]==u&&(f=i[p][1]);ug(n,d).forEach(p=>{f||i.push([u,f=[]]),f.indexOf(p)==-1&&f.push(p)})})});let s=e[r.join(",")]=new ri(r.indexOf(n.length-1)>-1);for(let a=0;a<i.length;a++){let u=i[a][1].sort(oy);s.next.push({type:i[a][0],next:e[u.join(",")]||t(u)})}return s}}function Rk(n,e){for(let t=0,r=[n];t<r.length;t++){let i=r[t],s=!i.validEnd,a=[];for(let u=0;u<i.next.length;u++){let{type:d,next:f}=i.next[u];a.push(d.name),s&&!(d.isText||d.hasRequiredAttrs())&&(s=!1),r.indexOf(f)==-1&&r.push(f)}s&&e.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function sy(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function ly(n,e){let t=Object.create(null);for(let r in n){let i=e&&e[r];if(i===void 0){let s=n[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=i}return t}function ay(n,e,t,r){for(let i in e)if(!(i in n))throw new RangeError(`Unsupported attribute ${i} for ${t} of type ${i}`);for(let i in n){let s=n[i];s.validate&&s.validate(e[i])}}function uy(n,e){let t=Object.create(null);if(e)for(let r in e)t[r]=new Pk(n,r,e[r]);return t}let cg=class cy{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=uy(e,r.attrs),this.defaultAttrs=sy(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ri.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:ly(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Sr(this,this.computeAttrs(e),L.from(t),Te.setFrom(r))}createChecked(e=null,t,r){return t=L.from(t),this.checkContent(t),new Sr(this,this.computeAttrs(e),t,Te.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=L.from(t),t.size){let a=this.contentMatch.fillBefore(t);if(!a)return null;t=a.append(t)}let i=this.contentMatch.matchFragment(t),s=i&&i.fillBefore(L.empty,!0);return s?new Sr(this,e,t.append(s),Te.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){ay(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:Te.none:e}static compile(e,t){let r=Object.create(null);e.forEach((s,a)=>r[s]=new cy(s,t,a));let i=t.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function Dk(n,e,t){let r=t.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${n}, got ${s}`)}}class Pk{constructor(e,t,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?Dk(e,t,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Fa{constructor(e,t,r,i){this.name=e,this.rank=t,this.schema=r,this.spec=i,this.attrs=uy(e,i.attrs),this.excluded=null;let s=sy(this.attrs);this.instance=s?new Te(this,s):null}create(e=null){return!e&&this.instance?this.instance:new Te(this,ly(this.attrs,e))}static compile(e,t){let r=Object.create(null),i=0;return e.forEach((s,a)=>r[s]=new Fa(s,i++,t,a)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){ay(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class dy{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let i in e)t[i]=e[i];t.nodes=ft.from(e.nodes),t.marks=ft.from(e.marks||{}),this.nodes=cg.compile(this.spec.nodes,this),this.marks=Fa.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],a=s.spec.content||"",u=s.spec.marks;if(s.contentMatch=r[a]||(r[a]=ri.parse(a,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=u=="_"?null:u?dg(this,u.split(" ")):u==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],a=s.spec.excludes;s.excluded=a==null?[s]:a==""?[]:dg(this,a.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof cg){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,i)}text(e,t){let r=this.nodes.text;return new ta(r,r.defaultAttrs,e,Te.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return Sr.fromJSON(this,e)}markFromJSON(e){return Te.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function dg(n,e){let t=[];for(let r=0;r<e.length;r++){let i=e[r],s=n.marks[i],a=s;if(s)t.push(s);else for(let u in n.marks){let d=n.marks[u];(i=="_"||d.spec.group&&d.spec.group.split(" ").indexOf(i)>-1)&&t.push(a=d)}if(!a)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}function Lk(n){return n.tag!=null}function Ik(n){return n.style!=null}class Cr{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let r=this.matchedStyles=[];t.forEach(i=>{if(Lk(i))this.tags.push(i);else if(Ik(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,t={}){let r=new hg(this,t,!1);return r.addAll(e,Te.none,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new hg(this,t,!0);return r.addAll(e,Te.none,t.from,t.to),U.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(Fk(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||t.matchesContext(s.context))){if(s.getAttrs){let a=s.getAttrs(e);if(a===!1)continue;s.attrs=a||void 0}return s}}}matchStyle(e,t,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let a=this.styles[s],u=a.style;if(!(u.indexOf(e)!=0||a.context&&!r.matchesContext(a.context)||u.length>e.length&&(u.charCodeAt(e.length)!=61||u.slice(e.length+1)!=t))){if(a.getAttrs){let d=a.getAttrs(t);if(d===!1)continue;a.attrs=d||void 0}return a}}}static schemaRules(e){let t=[];function r(i){let s=i.priority==null?50:i.priority,a=0;for(;a<t.length;a++){let u=t[a];if((u.priority==null?50:u.priority)<s)break}t.splice(a,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(a=>{r(a=pg(a)),a.mark||a.ignore||a.clearMark||(a.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(a=>{r(a=pg(a)),a.node||a.ignore||a.mark||(a.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Cr(e,Cr.schemaRules(e)))}}const fy={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},zk={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},hy={ol:!0,ul:!0},ts=1,Dd=2,Vl=4;function fg(n,e,t){return e!=null?(e?ts:0)|(e==="full"?Dd:0):n&&n.whitespace=="pre"?ts|Dd:t&-5}class Al{constructor(e,t,r,i,s,a){this.type=e,this.attrs=t,this.marks=r,this.solid=i,this.options=a,this.content=[],this.activeMarks=Te.none,this.match=s||(a&Vl?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(L.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&ts)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let t=L.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(L.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!fy.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class hg{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=t.topNode,s,a=fg(null,t.preserveWhitespace,0)|(r?Vl:0);i?s=new Al(i.type,i.attrs,Te.none,!0,t.topMatch||i.type.contentMatch,a):r?s=new Al(null,null,Te.none,!0,null,a):s=new Al(e.schema.topNodeType,null,Te.none,!0,null,a),this.nodes=[s],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let r=e.nodeValue,i=this.top,s=i.options&Dd?"full":this.localPreserveWS||(i.options&ts)>0;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(s)s!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let a=i.content[i.content.length-1],u=e.previousSibling;(!a||u&&u.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),t,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,t,r){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let a=e.nodeName.toLowerCase(),u;hy.hasOwnProperty(a)&&this.parser.normalizeLists&&jk(e);let d=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(u=this.parser.matchTag(e,this,r));e:if(d?d.ignore:zk.hasOwnProperty(a))this.findInside(e),this.ignoreFallback(e,t);else if(!d||d.skip||d.closeParent){d&&d.closeParent?this.open=Math.max(0,this.open-1):d&&d.skip.nodeType&&(e=d.skip);let f,p=this.needsBlock;if(fy.hasOwnProperty(a))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),f=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let g=d&&d.skip?t:this.readStyles(e,t);g&&this.addAll(e,g),f&&this.sync(s),this.needsBlock=p}else{let f=this.readStyles(e,t);f&&this.addElementByRule(e,d,f,d.consuming===!1?u:void 0)}this.localPreserveWS=i}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],a=r.getPropertyValue(s);if(a)for(let u=void 0;;){let d=this.parser.matchStyle(s,a,this,u);if(!d)break;if(d.ignore)return null;if(d.clearMark?t=t.filter(f=>!d.clearMark(f)):t=t.concat(this.parser.schema.marks[d.mark].create(d.attrs)),d.consuming===!1)u=d;else break}}return t}addElementByRule(e,t,r,i){let s,a;if(t.node)if(a=this.parser.schema.nodes[t.node],a.isLeaf)this.insertNode(a.create(t.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let d=this.enter(a,t.attrs||null,r,t.preserveWhitespace);d&&(s=!0,r=d)}else{let d=this.parser.schema.marks[t.mark];r=r.concat(d.create(t.attrs))}let u=this.top;if(a&&a.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(d=>this.insertNode(d,r,!1));else{let d=e;typeof t.contentElement=="string"?d=e.querySelector(t.contentElement):typeof t.contentElement=="function"?d=t.contentElement(e):t.contentElement&&(d=t.contentElement),this.findAround(e,d,!0),this.addAll(d,r),this.findAround(e,d,!1)}s&&this.sync(u)&&this.open--}addAll(e,t,r,i){let s=r||0;for(let a=r?e.childNodes[r]:e.firstChild,u=i==null?null:e.childNodes[i];a!=u;a=a.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(a,t);this.findAtPoint(e,s)}findPlace(e,t,r){let i,s;for(let a=this.open,u=0;a>=0;a--){let d=this.nodes[a],f=d.findWrapping(e);if(f&&(!i||i.length>f.length+u)&&(i=f,s=d,!f.length))break;if(d.solid){if(r)break;u+=2}}if(!i)return null;this.sync(s);for(let a=0;a<i.length;a++)t=this.enterInner(i[a],null,t,!1);return t}insertNode(e,t,r){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(t=this.enterInner(s,null,t))}let i=this.findPlace(e,t,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let a=Te.none;for(let u of i.concat(e.marks))(s.type?s.type.allowsMarkType(u.type):mg(u.type,e.type))&&(a=u.addToSet(a));return s.content.push(e.mark(a)),!0}return!1}enter(e,t,r,i){let s=this.findPlace(e.create(t),r,!1);return s&&(s=this.enterInner(e,t,r,!0,i)),s}enterInner(e,t,r,i=!1,s){this.closeExtra();let a=this.top;a.match=a.match&&a.match.matchType(e);let u=fg(e,s,a.options);a.options&Vl&&a.content.length==0&&(u|=Vl);let d=Te.none;return r=r.filter(f=>(a.type?a.type.allowsMarkType(f.type):mg(f.type,e))?(d=f.addToSet(d),!1):!0),this.nodes.push(new Al(e,t,d,i,null,u)),this.open++,r}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=ts)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),a=(u,d)=>{for(;u>=0;u--){let f=t[u];if(f==""){if(u==t.length-1||u==0)continue;for(;d>=s;d--)if(a(u-1,d))return!0;return!1}else{let p=d>0||d==0&&i?this.nodes[d].type:r&&d>=s?r.node(d-s).type:null;if(!p||p.name!=f&&!p.isInGroup(f))return!1;d--}}return!0};return a(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}}function jk(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&hy.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function Fk(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function pg(n){let e={};for(let t in n)e[t]=n[t];return e}function mg(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let s=[],a=u=>{s.push(u);for(let d=0;d<u.edgeCount;d++){let{type:f,next:p}=u.edge(d);if(f==e||s.indexOf(p)<0&&a(p))return!0}};if(a(i.contentMatch))return!0}}class ui{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=ed(t).createDocumentFragment());let i=r,s=[];return e.forEach(a=>{if(s.length||a.marks.length){let u=0,d=0;for(;u<s.length&&d<a.marks.length;){let f=a.marks[d];if(!this.marks[f.type.name]){d++;continue}if(!f.eq(s[u][0])||f.type.spec.spanning===!1)break;u++,d++}for(;u<s.length;)i=s.pop()[1];for(;d<a.marks.length;){let f=a.marks[d++],p=this.serializeMark(f,a.isInline,t);p&&(s.push([f,i]),i.appendChild(p.dom),i=p.contentDOM||p.dom)}}i.appendChild(this.serializeNodeInner(a,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:i}=Ul(ed(t),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,i)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,t);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,t,r={}){let i=this.marks[e.type.name];return i&&Ul(ed(r),i(e,t),null,e.attrs)}static renderSpec(e,t,r=null,i){return Ul(e,t,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new ui(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=gg(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return gg(e.marks)}}function gg(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function ed(n){return n.document||window.document}const yg=new WeakMap;function Bk(n){let e=yg.get(n);return e===void 0&&yg.set(n,e=_k(n)),e}function _k(n){let e=null;function t(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)t(r[i]);else for(let i in r)t(r[i])}return t(n),e}function Ul(n,e,t,r){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=Bk(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let a=i.indexOf(" ");a>0&&(t=i.slice(0,a),i=i.slice(a+1));let u,d=t?n.createElementNS(t,i):n.createElement(i),f=e[1],p=1;if(f&&typeof f=="object"&&f.nodeType==null&&!Array.isArray(f)){p=2;for(let g in f)if(f[g]!=null){let v=g.indexOf(" ");v>0?d.setAttributeNS(g.slice(0,v),g.slice(v+1),f[g]):d.setAttribute(g,f[g])}}for(let g=p;g<e.length;g++){let v=e[g];if(v===0){if(g<e.length-1||g>p)throw new RangeError("Content hole must be the only child of its parent node");return{dom:d,contentDOM:d}}else{let{dom:x,contentDOM:k}=Ul(n,v,t,r);if(d.appendChild(x),k){if(u)throw new RangeError("Multiple content holes");u=k}}}return{dom:d,contentDOM:u}}const py=65535,my=Math.pow(2,16);function Hk(n,e){return n+e*my}function vg(n){return n&py}function $k(n){return(n-(n&py))/my}const gy=1,yy=2,Wl=4,vy=8;class Pd{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&vy)>0}get deletedBefore(){return(this.delInfo&(gy|Wl))>0}get deletedAfter(){return(this.delInfo&(yy|Wl))>0}get deletedAcross(){return(this.delInfo&Wl)>0}}class Wt{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&Wt.empty)return Wt.empty}recover(e){let t=0,r=vg(e);if(!this.inverted)for(let i=0;i<r;i++)t+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+t+$k(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let i=0,s=this.inverted?2:1,a=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let d=this.ranges[u]-(this.inverted?i:0);if(d>e)break;let f=this.ranges[u+s],p=this.ranges[u+a],g=d+f;if(e<=g){let v=f?e==d?-1:e==g?1:t:t,x=d+i+(v<0?0:p);if(r)return x;let k=e==(t<0?d:g)?null:Hk(u/3,e-d),S=e==d?yy:e==g?gy:Wl;return(t<0?e!=d:e!=g)&&(S|=vy),new Pd(x,S,k)}i+=p-f}return r?e+i:new Pd(e+i,0,null)}touches(e,t){let r=0,i=vg(t),s=this.inverted?2:1,a=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let d=this.ranges[u]-(this.inverted?r:0);if(d>e)break;let f=this.ranges[u+s],p=d+f;if(e<=p&&u==i*3)return!0;r+=this.ranges[u+a]-f}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let a=this.ranges[i],u=a-(this.inverted?s:0),d=a+(this.inverted?0:s),f=this.ranges[i+t],p=this.ranges[i+r];e(u,u+f,d,d+p),s+=p-f}}invert(){return new Wt(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Wt.empty:new Wt(e<0?[0,-e,0]:[0,0,e])}}Wt.empty=new Wt([]);class ns{constructor(e,t,r=0,i=e?e.length:0){this.mirror=t,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new ns(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,r=this._maps.length;t<e._maps.length;t++){let i=e.getMirror(t);this.appendMap(e._maps[t],i!=null&&i<t?r+i:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this._maps.length+e._maps.length;t>=0;t--){let i=e.getMirror(t);this.appendMap(e._maps[t].invert(),i!=null&&i>t?r-i-1:void 0)}}invert(){let e=new ns;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let i=0;for(let s=this.from;s<this.to;s++){let a=this._maps[s],u=a.mapResult(e,t);if(u.recover!=null){let d=this.getMirror(s);if(d!=null&&d>s&&d<this.to){s=d,e=this._maps[d].recover(u.recover);continue}}i|=u.delInfo,e=u.pos}return r?e:new Pd(e,i,null)}}const td=Object.create(null);class bt{getMap(){return Wt.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=td[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in td)throw new RangeError("Duplicate use of step JSON ID "+e);return td[e]=t,t.prototype.jsonID=e,t}}class Ye{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new Ye(e,null)}static fail(e){return new Ye(null,e)}static fromReplace(e,t,r,i){try{return Ye.ok(e.replace(t,r,i))}catch(s){if(s instanceof Xl)return Ye.fail(s.message);throw s}}}function yf(n,e,t){let r=[];for(let i=0;i<n.childCount;i++){let s=n.child(i);s.content.size&&(s=s.copy(yf(s.content,e,s))),s.isInline&&(s=e(s,t,i)),r.push(s)}return L.fromArray(r)}class xr extends bt{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new U(yf(t.content,(a,u)=>!a.isAtom||!u.type.allowsMarkType(this.mark.type)?a:a.mark(this.mark.addToSet(a.marks)),i),t.openStart,t.openEnd);return Ye.fromReplace(e,this.from,this.to,s)}invert(){return new En(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new xr(t.pos,r.pos,this.mark)}merge(e){return e instanceof xr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new xr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new xr(t.from,t.to,e.markFromJSON(t.mark))}}bt.jsonID("addMark",xr);class En extends bt{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new U(yf(t.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),t.openStart,t.openEnd);return Ye.fromReplace(e,this.from,this.to,r)}invert(){return new xr(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new En(t.pos,r.pos,this.mark)}merge(e){return e instanceof En&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new En(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new En(t.from,t.to,e.markFromJSON(t.mark))}}bt.jsonID("removeMark",En);class kr extends bt{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Ye.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return Ye.fromReplace(e,this.pos,this.pos+1,new U(L.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let i=0;i<t.marks.length;i++)if(!t.marks[i].isInSet(r))return new kr(this.pos,t.marks[i]);return new kr(this.pos,this.mark)}}return new ii(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new kr(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new kr(t.pos,e.markFromJSON(t.mark))}}bt.jsonID("addNodeMark",kr);class ii extends bt{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Ye.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return Ye.fromReplace(e,this.pos,this.pos+1,new U(L.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new kr(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new ii(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new ii(t.pos,e.markFromJSON(t.mark))}}bt.jsonID("removeNodeMark",ii);class ot extends bt{constructor(e,t,r,i=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=i}apply(e){return this.structure&&Ld(e,this.from,this.to)?Ye.fail("Structure replace would overwrite content"):Ye.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Wt([this.from,this.to-this.from,this.slice.size])}invert(e){return new ot(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new ot(t.pos,Math.max(t.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof ot)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?U.empty:new U(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new ot(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?U.empty:new U(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new ot(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ot(t.from,t.to,U.fromJSON(e,t.slice),!!t.structure)}}bt.jsonID("replace",ot);class st extends bt{constructor(e,t,r,i,s,a,u=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=a,this.structure=u}apply(e){if(this.structure&&(Ld(e,this.from,this.gapFrom)||Ld(e,this.gapTo,this.to)))return Ye.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Ye.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?Ye.fromReplace(e,this.from,this.to,r):Ye.fail("Content does not fit in gap")}getMap(){return new Wt([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new st(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||i<t.pos||s>r.pos?null:new st(t.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new st(t.from,t.to,t.gapFrom,t.gapTo,U.fromJSON(e,t.slice),t.insert,!!t.structure)}}bt.jsonID("replaceAround",st);function Ld(n,e,t){let r=n.resolve(e),i=t-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let a=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,i--}}return!1}function Vk(n,e,t,r){let i=[],s=[],a,u;n.doc.nodesBetween(e,t,(d,f,p)=>{if(!d.isInline)return;let g=d.marks;if(!r.isInSet(g)&&p.type.allowsMarkType(r.type)){let v=Math.max(f,e),x=Math.min(f+d.nodeSize,t),k=r.addToSet(g);for(let S=0;S<g.length;S++)g[S].isInSet(k)||(a&&a.to==v&&a.mark.eq(g[S])?a.to=x:i.push(a=new En(v,x,g[S])));u&&u.to==v?u.to=x:s.push(u=new xr(v,x,r))}}),i.forEach(d=>n.step(d)),s.forEach(d=>n.step(d))}function Uk(n,e,t,r){let i=[],s=0;n.doc.nodesBetween(e,t,(a,u)=>{if(!a.isInline)return;s++;let d=null;if(r instanceof Fa){let f=a.marks,p;for(;p=r.isInSet(f);)(d||(d=[])).push(p),f=p.removeFromSet(f)}else r?r.isInSet(a.marks)&&(d=[r]):d=a.marks;if(d&&d.length){let f=Math.min(u+a.nodeSize,t);for(let p=0;p<d.length;p++){let g=d[p],v;for(let x=0;x<i.length;x++){let k=i[x];k.step==s-1&&g.eq(i[x].style)&&(v=k)}v?(v.to=f,v.step=s):i.push({style:g,from:Math.max(u,e),to:f,step:s})}}}),i.forEach(a=>n.step(new En(a.from,a.to,a.style)))}function vf(n,e,t,r=t.contentMatch,i=!0){let s=n.doc.nodeAt(e),a=[],u=e+1;for(let d=0;d<s.childCount;d++){let f=s.child(d),p=u+f.nodeSize,g=r.matchType(f.type);if(!g)a.push(new ot(u,p,U.empty));else{r=g;for(let v=0;v<f.marks.length;v++)t.allowsMarkType(f.marks[v].type)||n.step(new En(u,p,f.marks[v]));if(i&&f.isText&&t.whitespace!="pre"){let v,x=/\r?\n|\r/g,k;for(;v=x.exec(f.text);)k||(k=new U(L.from(t.schema.text(" ",t.allowedMarks(f.marks))),0,0)),a.push(new ot(u+v.index,u+v.index+v[0].length,k))}}u=p}if(!r.validEnd){let d=r.fillBefore(L.empty,!0);n.replace(u,u,new U(d,0,0))}for(let d=a.length-1;d>=0;d--)n.step(a[d])}function Wk(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function Gi(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth;;--r){let i=n.$from.node(r),s=n.$from.index(r),a=n.$to.indexAfter(r);if(r<n.depth&&i.canReplace(s,a,t))return r;if(r==0||i.type.spec.isolating||!Wk(i,s,a))break}return null}function Kk(n,e,t){let{$from:r,$to:i,depth:s}=e,a=r.before(s+1),u=i.after(s+1),d=a,f=u,p=L.empty,g=0;for(let k=s,S=!1;k>t;k--)S||r.index(k)>0?(S=!0,p=L.from(r.node(k).copy(p)),g++):d--;let v=L.empty,x=0;for(let k=s,S=!1;k>t;k--)S||i.after(k+1)<i.end(k)?(S=!0,v=L.from(i.node(k).copy(v)),x++):f++;n.step(new st(d,f,a,u,new U(p.append(v),g,x),p.size-g,!0))}function xf(n,e,t=null,r=n){let i=qk(n,e),s=i&&Jk(r,e);return s?i.map(xg).concat({type:e,attrs:t}).concat(s.map(xg)):null}function xg(n){return{type:n,attrs:null}}function qk(n,e){let{parent:t,startIndex:r,endIndex:i}=n,s=t.contentMatchAt(r).findWrapping(e);if(!s)return null;let a=s.length?s[0]:e;return t.canReplaceWith(r,i,a)?s:null}function Jk(n,e){let{parent:t,startIndex:r,endIndex:i}=n,s=t.child(r),a=e.contentMatch.findWrapping(s.type);if(!a)return null;let d=(a.length?a[a.length-1]:e).contentMatch;for(let f=r;d&&f<i;f++)d=d.matchType(t.child(f).type);return!d||!d.validEnd?null:a}function Gk(n,e,t){let r=L.empty;for(let a=t.length-1;a>=0;a--){if(r.size){let u=t[a].type.contentMatch.matchFragment(r);if(!u||!u.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=L.from(t[a].type.create(t[a].attrs,r))}let i=e.start,s=e.end;n.step(new st(i,s,i,s,new U(r,0,0),t.length,!0))}function Qk(n,e,t,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=n.steps.length;n.doc.nodesBetween(e,t,(a,u)=>{let d=typeof i=="function"?i(a):i;if(a.isTextblock&&!a.hasMarkup(r,d)&&Yk(n.doc,n.mapping.slice(s).map(u),r)){let f=null;if(r.schema.linebreakReplacement){let x=r.whitespace=="pre",k=!!r.contentMatch.matchType(r.schema.linebreakReplacement);x&&!k?f=!1:!x&&k&&(f=!0)}f===!1&&ky(n,a,u,s),vf(n,n.mapping.slice(s).map(u,1),r,void 0,f===null);let p=n.mapping.slice(s),g=p.map(u,1),v=p.map(u+a.nodeSize,1);return n.step(new st(g,v,g+1,v-1,new U(L.from(r.create(d,null,a.marks)),0,0),1,!0)),f===!0&&xy(n,a,u,s),!1}})}function xy(n,e,t,r){e.forEach((i,s)=>{if(i.isText){let a,u=/\r?\n|\r/g;for(;a=u.exec(i.text);){let d=n.mapping.slice(r).map(t+1+s+a.index);n.replaceWith(d,d+1,e.type.schema.linebreakReplacement.create())}}})}function ky(n,e,t,r){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let a=n.mapping.slice(r).map(t+1+s);n.replaceWith(a,a+1,e.type.schema.text(`
`))}})}function Yk(n,e,t){let r=n.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,t)}function Xk(n,e,t,r,i){let s=n.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");t||(t=s.type);let a=t.create(r,null,i||s.marks);if(s.isLeaf)return n.replaceWith(e,e+s.nodeSize,a);if(!t.validContent(s.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new st(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new U(L.from(a),0,0),1,!0))}function Un(n,e,t=1,r){let i=n.resolve(e),s=i.depth-t,a=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!a.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let f=i.depth-1,p=t-2;f>s;f--,p--){let g=i.node(f),v=i.index(f);if(g.type.spec.isolating)return!1;let x=g.content.cutByIndex(v,g.childCount),k=r&&r[p+1];k&&(x=x.replaceChild(0,k.type.create(k.attrs)));let S=r&&r[p]||g;if(!g.canReplace(v+1,g.childCount)||!S.type.validContent(x))return!1}let u=i.indexAfter(s),d=r&&r[0];return i.node(s).canReplaceWith(u,u,d?d.type:i.node(s+1).type)}function Zk(n,e,t=1,r){let i=n.doc.resolve(e),s=L.empty,a=L.empty;for(let u=i.depth,d=i.depth-t,f=t-1;u>d;u--,f--){s=L.from(i.node(u).copy(s));let p=r&&r[f];a=L.from(p?p.type.create(p.attrs,a):i.node(u).copy(a))}n.step(new ot(e,e,new U(s.append(a),t,t),!0))}function Ar(n,e){let t=n.resolve(e),r=t.index();return wy(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function ew(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:r}=n.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),a=s.type==r?n.type.schema.nodes.text:s.type;if(t=t.matchType(a),!t||!n.type.allowsMarks(s.marks))return!1}return t.validEnd}function wy(n,e){return!!(n&&e&&!n.isLeaf&&ew(n,e))}function Ba(n,e,t=-1){let r=n.resolve(e);for(let i=r.depth;;i--){let s,a,u=r.index(i);if(i==r.depth?(s=r.nodeBefore,a=r.nodeAfter):t>0?(s=r.node(i+1),u++,a=r.node(i).maybeChild(u)):(s=r.node(i).maybeChild(u-1),a=r.node(i+1)),s&&!s.isTextblock&&wy(s,a)&&r.node(i).canReplace(u,u+1))return e;if(i==0)break;e=t<0?r.before(i):r.after(i)}}function tw(n,e,t){let r=null,{linebreakReplacement:i}=n.doc.type.schema,s=n.doc.resolve(e-t),a=s.node().type;if(i&&a.inlineContent){let p=a.whitespace=="pre",g=!!a.contentMatch.matchType(i);p&&!g?r=!1:!p&&g&&(r=!0)}let u=n.steps.length;if(r===!1){let p=n.doc.resolve(e+t);ky(n,p.node(),p.before(),u)}a.inlineContent&&vf(n,e+t-1,a,s.node().contentMatchAt(s.index()),r==null);let d=n.mapping.slice(u),f=d.map(e-t);if(n.step(new ot(f,d.map(e+t,-1),U.empty,!0)),r===!0){let p=n.doc.resolve(f);xy(n,p.node(),p.before(),n.steps.length)}return n}function nw(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,t))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,t))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function Sy(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let i=t.content;for(let s=0;s<t.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(t.openStart==0&&t.size?2:1);s++)for(let a=r.depth;a>=0;a--){let u=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,d=r.index(a)+(u>0?1:0),f=r.node(a),p=!1;if(s==1)p=f.canReplace(d,d,i);else{let g=f.contentMatchAt(d).findWrapping(i.firstChild.type);p=g&&f.canReplaceWith(d,d,g[0])}if(p)return u==0?r.pos:u<0?r.before(a+1):r.after(a+1)}return null}function _a(n,e,t=e,r=U.empty){if(e==t&&!r.size)return null;let i=n.resolve(e),s=n.resolve(t);return Cy(i,s,r)?new ot(e,t,r):new rw(i,s,r).fit()}function Cy(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class rw{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=L.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=L.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let f=this.findFittable();f?this.placeNodes(f):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,a=r.depth,u=i.depth;for(;a&&u&&s.childCount==1;)s=s.firstChild.content,a--,u--;let d=new U(s,a,u);return e>-1?new st(r.pos,e,this.$to.pos,this.$to.end(),d,t):d.size||r.pos!=this.$to.pos?new ot(r.pos,i.pos,d):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=t.firstChild;if(t.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}t=s.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=nd(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let a=i.firstChild;for(let u=this.depth;u>=0;u--){let{type:d,match:f}=this.frontier[u],p,g=null;if(t==1&&(a?f.matchType(a.type)||(g=f.fillBefore(L.from(a),!1)):s&&d.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:u,parent:s,inject:g};if(t==2&&a&&(p=f.findWrapping(a.type)))return{sliceDepth:r,frontierDepth:u,parent:s,wrap:p};if(s&&f.matchType(s.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=nd(e,t);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new U(e,t+1,Math.max(r,i.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=nd(e,t);if(i.childCount<=1&&t>0){let s=e.size-t<=t+i.size;this.unplaced=new U(_o(e,t-1,1),t-1,s?t-1:r)}else this.unplaced=new U(_o(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:i,wrap:s}){for(;this.depth>t;)this.closeFrontierNode();if(s)for(let S=0;S<s.length;S++)this.openFrontierNode(s[S]);let a=this.unplaced,u=r?r.content:a.content,d=a.openStart-e,f=0,p=[],{match:g,type:v}=this.frontier[t];if(i){for(let S=0;S<i.childCount;S++)p.push(i.child(S));g=g.matchFragment(i)}let x=u.size+e-(a.content.size-a.openEnd);for(;f<u.childCount;){let S=u.child(f),C=g.matchType(S.type);if(!C)break;f++,(f>1||d==0||S.content.size)&&(g=C,p.push(by(S.mark(v.allowedMarks(S.marks)),f==1?d:0,f==u.childCount?x:-1)))}let k=f==u.childCount;k||(x=-1),this.placed=Ho(this.placed,t,L.from(p)),this.frontier[t].match=g,k&&x<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let S=0,C=u;S<x;S++){let M=C.lastChild;this.frontier.push({type:M.type,match:M.contentMatchAt(M.childCount)}),C=M.content}this.unplaced=k?e==0?U.empty:new U(_o(a.content,e-1,1),e-1,x<0?a.openEnd:e-1):new U(_o(a.content,e,f),a.openStart,a.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!rd(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:i}=this.frontier[t],s=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),a=rd(e,t,i,r,s);if(a){for(let u=t-1;u>=0;u--){let{match:d,type:f}=this.frontier[u],p=rd(e,u,f,d,!0);if(!p||p.childCount)continue e}return{depth:t,fit:a,move:s?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=Ho(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,t=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Ho(this.placed,this.depth,L.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(L.empty,!0);t.childCount&&(this.placed=Ho(this.placed,this.frontier.length,t))}}function _o(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(_o(n.firstChild.content,e-1,t)))}function Ho(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(Ho(n.lastChild.content,e-1,t)))}function nd(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function by(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,by(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(L.empty,!0)))),n.copy(r)}function rd(n,e,t,r,i){let s=n.node(e),a=i?n.indexAfter(e):n.index(e);if(a==s.childCount&&!t.compatibleContent(s.type))return null;let u=r.fillBefore(s.content,!0,a);return u&&!iw(t,s.content,a)?u:null}function iw(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function ow(n){return n.spec.defining||n.spec.definingForContent}function sw(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let i=n.doc.resolve(e),s=n.doc.resolve(t);if(Cy(i,s,r))return n.step(new ot(e,t,r));let a=My(i,n.doc.resolve(t));a[a.length-1]==0&&a.pop();let u=-(i.depth+1);a.unshift(u);for(let v=i.depth,x=i.pos-1;v>0;v--,x--){let k=i.node(v).type.spec;if(k.defining||k.definingAsContext||k.isolating)break;a.indexOf(v)>-1?u=v:i.before(v)==x&&a.splice(1,0,-v)}let d=a.indexOf(u),f=[],p=r.openStart;for(let v=r.content,x=0;;x++){let k=v.firstChild;if(f.push(k),x==r.openStart)break;v=k.content}for(let v=p-1;v>=0;v--){let x=f[v],k=ow(x.type);if(k&&!x.sameMarkup(i.node(Math.abs(u)-1)))p=v;else if(k||!x.type.isTextblock)break}for(let v=r.openStart;v>=0;v--){let x=(v+p+1)%(r.openStart+1),k=f[x];if(k)for(let S=0;S<a.length;S++){let C=a[(S+d)%a.length],M=!0;C<0&&(M=!1,C=-C);let P=i.node(C-1),I=i.index(C-1);if(P.canReplaceWith(I,I,k.type,k.marks))return n.replace(i.before(C),M?s.after(C):t,new U(Ey(r.content,0,r.openStart,x),x,r.openEnd))}}let g=n.steps.length;for(let v=a.length-1;v>=0&&(n.replace(e,t,r),!(n.steps.length>g));v--){let x=a[v];x<0||(e=i.before(x),t=s.after(x))}}function Ey(n,e,t,r,i){if(e<t){let s=n.firstChild;n=n.replaceChild(0,s.copy(Ey(s.content,e+1,t,r,s)))}if(e>r){let s=i.contentMatchAt(0),a=s.fillBefore(n).append(n);n=a.append(s.matchFragment(a).fillBefore(L.empty,!0))}return n}function lw(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let i=nw(n.doc,e,r.type);i!=null&&(e=t=i)}n.replaceRange(e,t,new U(L.from(r),0,0))}function aw(n,e,t){let r=n.doc.resolve(e),i=n.doc.resolve(t),s=My(r,i);for(let a=0;a<s.length;a++){let u=s[a],d=a==s.length-1;if(d&&u==0||r.node(u).type.contentMatch.validEnd)return n.delete(r.start(u),i.end(u));if(u>0&&(d||r.node(u-1).canReplace(r.index(u-1),i.indexAfter(u-1))))return n.delete(r.before(u),i.after(u))}for(let a=1;a<=r.depth&&a<=i.depth;a++)if(e-r.start(a)==r.depth-a&&t>r.end(a)&&i.end(a)-t!=i.depth-a&&r.start(a-1)==i.start(a-1)&&r.node(a-1).canReplace(r.index(a-1),i.index(a-1)))return n.delete(r.before(a),t);n.delete(e,t)}function My(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let i=r;i>=0;i--){let s=n.start(i);if(s<n.pos-(n.depth-i)||e.end(i)>e.pos+(e.depth-i)||n.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==n.depth&&i==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&t.push(i)}return t}class $i extends bt{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return Ye.fail("No node at attribute step's position");let r=Object.create(null);for(let s in t.attrs)r[s]=t.attrs[s];r[this.attr]=this.value;let i=t.type.create(r,null,t.marks);return Ye.fromReplace(e,this.pos,this.pos+1,new U(L.from(i),0,t.isLeaf?0:1))}getMap(){return Wt.empty}invert(e){return new $i(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new $i(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new $i(t.pos,t.attr,t.value)}}bt.jsonID("attr",$i);class rs extends bt{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let i in e.attrs)t[i]=e.attrs[i];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return Ye.ok(r)}getMap(){return Wt.empty}invert(e){return new rs(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new rs(t.attr,t.value)}}bt.jsonID("docAttr",rs);let Ui=class extends Error{};Ui=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};Ui.prototype=Object.create(Error.prototype);Ui.prototype.constructor=Ui;Ui.prototype.name="TransformError";class kf{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new ns}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new Ui(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=U.empty){let i=_a(this.doc,e,t,r);return i&&this.step(i),this}replaceWith(e,t,r){return this.replace(e,t,new U(L.from(r),0,0))}delete(e,t){return this.replace(e,t,U.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return sw(this,e,t,r),this}replaceRangeWith(e,t,r){return lw(this,e,t,r),this}deleteRange(e,t){return aw(this,e,t),this}lift(e,t){return Kk(this,e,t),this}join(e,t=1){return tw(this,e,t),this}wrap(e,t){return Gk(this,e,t),this}setBlockType(e,t=e,r,i=null){return Qk(this,e,t,r,i),this}setNodeMarkup(e,t,r=null,i){return Xk(this,e,t,r,i),this}setNodeAttribute(e,t,r){return this.step(new $i(e,t,r)),this}setDocAttribute(e,t){return this.step(new rs(e,t)),this}addNodeMark(e,t){return this.step(new kr(e,t)),this}removeNodeMark(e,t){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t instanceof Te)t.isInSet(r.marks)&&this.step(new ii(e,t));else{let i=r.marks,s,a=[];for(;s=t.isInSet(i);)a.push(new ii(e,s)),i=s.removeFromSet(i);for(let u=a.length-1;u>=0;u--)this.step(a[u])}return this}split(e,t=1,r){return Zk(this,e,t,r),this}addMark(e,t,r){return Vk(this,e,t,r),this}removeMark(e,t,r){return Uk(this,e,t,r),this}clearIncompatible(e,t,r){return vf(this,e,t,r),this}}const id=Object.create(null);class le{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new Ny(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=U.empty){let r=t.content.lastChild,i=null;for(let u=0;u<t.openEnd;u++)i=r,r=r.lastChild;let s=e.steps.length,a=this.ranges;for(let u=0;u<a.length;u++){let{$from:d,$to:f}=a[u],p=e.mapping.slice(s);e.replaceRange(p.map(d.pos),p.map(f.pos),u?U.empty:t),u==0&&Sg(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:a,$to:u}=i[s],d=e.mapping.slice(r),f=d.map(a.pos),p=d.map(u.pos);s?e.deleteRange(f,p):(e.replaceRangeWith(f,p,t),Sg(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let i=e.parent.inlineContent?new re(e):ji(e.node(0),e.parent,e.pos,e.index(),t,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let a=t<0?ji(e.node(0),e.node(s),e.before(s+1),e.index(s),t,r):ji(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,t,r);if(a)return a}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new qt(e.node(0))}static atStart(e){return ji(e,e,0,0,1)||new qt(e)}static atEnd(e){return ji(e,e,e.content.size,e.childCount,-1)||new qt(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=id[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in id)throw new RangeError("Duplicate use of selection JSON ID "+e);return id[e]=t,t.prototype.jsonID=e,t}getBookmark(){return re.between(this.$anchor,this.$head).getBookmark()}}le.prototype.visible=!0;class Ny{constructor(e,t){this.$from=e,this.$to=t}}let kg=!1;function wg(n){!kg&&!n.parent.inlineContent&&(kg=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class re extends le{constructor(e,t=e){wg(e),wg(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return le.near(r);let i=e.resolve(t.map(this.anchor));return new re(i.parent.inlineContent?i:r,r)}replace(e,t=U.empty){if(super.replace(e,t),t==U.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof re&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Ha(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new re(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let i=e.resolve(t);return new this(i,r==t?i:e.resolve(r))}static between(e,t,r){let i=e.pos-t.pos;if((!r||i)&&(r=i>=0?1:-1),!t.parent.inlineContent){let s=le.findFrom(t,r,!0)||le.findFrom(t,-r,!0);if(s)t=s.$head;else return le.near(t,r)}return e.parent.inlineContent||(i==0?e=t:(e=(le.findFrom(e,-r,!0)||le.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=i<0&&(e=t))),new re(e,t)}}le.jsonID("text",re);class Ha{constructor(e,t){this.anchor=e,this.head=t}map(e){return new Ha(e.map(this.anchor),e.map(this.head))}resolve(e){return re.between(e.resolve(this.anchor),e.resolve(this.head))}}class ne extends le{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:i}=t.mapResult(this.anchor),s=e.resolve(i);return r?le.near(s):new ne(s)}content(){return new U(L.from(this.node),0,0)}eq(e){return e instanceof ne&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new wf(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new ne(e.resolve(t.anchor))}static create(e,t){return new ne(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}ne.prototype.visible=!1;le.jsonID("node",ne);class wf{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new Ha(r,r):new wf(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&ne.isSelectable(r)?new ne(t):le.near(t)}}class qt extends le{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=U.empty){if(t==U.empty){e.delete(0,e.doc.content.size);let r=le.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new qt(e)}map(e){return new qt(e)}eq(e){return e instanceof qt}getBookmark(){return uw}}le.jsonID("all",qt);const uw={map(){return this},resolve(n){return new qt(n)}};function ji(n,e,t,r,i,s=!1){if(e.inlineContent)return re.create(n,t);for(let a=r-(i>0?0:1);i>0?a<e.childCount:a>=0;a+=i){let u=e.child(a);if(u.isAtom){if(!s&&ne.isSelectable(u))return ne.create(n,t-(i<0?u.nodeSize:0))}else{let d=ji(n,u,t+i,i<0?u.childCount:0,i,s);if(d)return d}t+=u.nodeSize*i}return null}function Sg(n,e,t){let r=n.steps.length-1;if(r<e)return;let i=n.steps[r];if(!(i instanceof ot||i instanceof st))return;let s=n.mapping.maps[r],a;s.forEach((u,d,f,p)=>{a==null&&(a=p)}),n.setSelection(le.near(n.doc.resolve(a),t))}const Cg=1,bg=2,Eg=4;class cw extends kf{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Cg)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&Cg)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=bg,this}ensureMarks(e){return Te.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&bg)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&-3,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Te.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let i=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),r=r??t,!e)return this.deleteRange(t,r);let s=this.storedMarks;if(!s){let a=this.doc.resolve(t);s=r==t?a.marks():a.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,i.text(e,s)),this.selection.empty||this.setSelection(le.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Eg,this}get scrolledIntoView(){return(this.updated&Eg)>0}}function Mg(n,e){return!e||!n?n:n.bind(e)}class $o{constructor(e,t,r){this.name=e,this.init=Mg(t.init,r),this.apply=Mg(t.apply,r)}}const dw=[new $o("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new $o("selection",{init(n,e){return n.selection||le.atStart(e.doc)},apply(n){return n.selection}}),new $o("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new $o("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class od{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=dw.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new $o(r.key,r.spec.state,r))})}}class _i{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let a=0;a<this.config.plugins.length;a++){let u=this.config.plugins[a];if(u.spec.appendTransaction){let d=i?i[a].n:0,f=i?i[a].state:this,p=d<t.length&&u.spec.appendTransaction.call(u,d?t.slice(d):t,f,r);if(p&&r.filterTransaction(p,a)){if(p.setMeta("appendedTransaction",e),!i){i=[];for(let g=0;g<this.config.plugins.length;g++)i.push(g<a?{state:r,n:t.length}:{state:this,n:0})}t.push(p),r=r.applyInner(p),s=!0}i&&(i[a]={state:r,n:t.length})}}if(!s)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new _i(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];t[s.name]=s.apply(e,this[s.name],this,t)}return t}get tr(){return new cw(this)}static create(e){let t=new od(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new _i(t);for(let i=0;i<t.fields.length;i++)r[t.fields[i].name]=t.fields[i].init(e,r);return r}reconfigure(e){let t=new od(this.schema,e.plugins),r=t.fields,i=new _i(t);for(let s=0;s<r.length;s++){let a=r[s].name;i[a]=this.hasOwnProperty(a)?this[a]:r[s].init(e,i)}return i}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(t[r]=s.toJSON.call(i,this[i.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new od(e.schema,e.plugins),s=new _i(i);return i.fields.forEach(a=>{if(a.name=="doc")s.doc=Sr.fromJSON(e.schema,t.doc);else if(a.name=="selection")s.selection=le.fromJSON(s.doc,t.selection);else if(a.name=="storedMarks")t.storedMarks&&(s.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let u in r){let d=r[u],f=d.spec.state;if(d.key==a.name&&f&&f.fromJSON&&Object.prototype.hasOwnProperty.call(t,u)){s[a.name]=f.fromJSON.call(d,e,t[u],s);return}}s[a.name]=a.init(e,s)}}),s}}function Ty(n,e,t){for(let r in n){let i=n[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=Ty(i,e,{})),t[r]=i}return t}class Ge{constructor(e){this.spec=e,this.props={},e.props&&Ty(e.props,this,this.props),this.key=e.key?e.key.key:Ay("plugin")}getState(e){return e[this.key]}}const sd=Object.create(null);function Ay(n){return n in sd?n+"$"+ ++sd[n]:(sd[n]=0,n+"$")}class ut{constructor(e="key"){this.key=Ay(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const ht=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},Wi=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let Id=null;const $n=function(n,e,t){let r=Id||(Id=document.createRange());return r.setEnd(n,t??n.nodeValue.length),r.setStart(n,e||0),r},fw=function(){Id=null},oi=function(n,e,t,r){return t&&(Ng(n,e,t,r,-1)||Ng(n,e,t,r,1))},hw=/^(img|br|input|textarea|hr)$/i;function Ng(n,e,t,r,i){for(;;){if(n==t&&e==r)return!0;if(e==(i<0?0:rn(n))){let s=n.parentNode;if(!s||s.nodeType!=1||ps(n)||hw.test(n.nodeName)||n.contentEditable=="false")return!1;e=ht(n)+(i<0?0:1),n=s}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.contentEditable=="false")return!1;e=i<0?rn(n):0}else return!1}}function rn(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function pw(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=rn(n)}else if(n.parentNode&&!ps(n))e=ht(n),n=n.parentNode;else return null}}function mw(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!ps(n))e=ht(n)+1,n=n.parentNode;else return null}}function gw(n,e,t){for(let r=e==0,i=e==rn(n);r||i;){if(n==t)return!0;let s=ht(n);if(n=n.parentNode,!n)return!1;r=r&&s==0,i=i&&s==rn(n)}}function ps(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const $a=function(n){return n.focusNode&&oi(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function Kr(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function yw(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function vw(n,e,t){if(n.caretPositionFromPoint)try{let r=n.caretPositionFromPoint(e,t);if(r)return{node:r.offsetNode,offset:Math.min(rn(r.offsetNode),r.offset)}}catch{}if(n.caretRangeFromPoint){let r=n.caretRangeFromPoint(e,t);if(r)return{node:r.startContainer,offset:Math.min(rn(r.startContainer),r.startOffset)}}}const Mn=typeof navigator<"u"?navigator:null,Tg=typeof document<"u"?document:null,Or=Mn&&Mn.userAgent||"",zd=/Edge\/(\d+)/.exec(Or),Oy=/MSIE \d/.exec(Or),jd=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Or),Bt=!!(Oy||jd||zd),br=Oy?document.documentMode:jd?+jd[1]:zd?+zd[1]:0,mn=!Bt&&/gecko\/(\d+)/i.test(Or);mn&&+(/Firefox\/(\d+)/.exec(Or)||[0,0])[1];const Fd=!Bt&&/Chrome\/(\d+)/.exec(Or),wt=!!Fd,Ry=Fd?+Fd[1]:0,At=!Bt&&!!Mn&&/Apple Computer/.test(Mn.vendor),Ki=At&&(/Mobile\/\w+/.test(Or)||!!Mn&&Mn.maxTouchPoints>2),nn=Ki||(Mn?/Mac/.test(Mn.platform):!1),xw=Mn?/Win/.test(Mn.platform):!1,Vn=/Android \d/.test(Or),ms=!!Tg&&"webkitFontSmoothing"in Tg.documentElement.style,kw=ms?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function ww(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function jn(n,e){return typeof n=="number"?n:n[e]}function Sw(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function Ag(n,e,t){let r=n.someProp("scrollThreshold")||0,i=n.someProp("scrollMargin")||5,s=n.dom.ownerDocument;for(let a=t||n.dom;a;){if(a.nodeType!=1){a=Wi(a);continue}let u=a,d=u==s.body,f=d?ww(s):Sw(u),p=0,g=0;if(e.top<f.top+jn(r,"top")?g=-(f.top-e.top+jn(i,"top")):e.bottom>f.bottom-jn(r,"bottom")&&(g=e.bottom-e.top>f.bottom-f.top?e.top+jn(i,"top")-f.top:e.bottom-f.bottom+jn(i,"bottom")),e.left<f.left+jn(r,"left")?p=-(f.left-e.left+jn(i,"left")):e.right>f.right-jn(r,"right")&&(p=e.right-f.right+jn(i,"right")),p||g)if(d)s.defaultView.scrollBy(p,g);else{let x=u.scrollLeft,k=u.scrollTop;g&&(u.scrollTop+=g),p&&(u.scrollLeft+=p);let S=u.scrollLeft-x,C=u.scrollTop-k;e={left:e.left-S,top:e.top-C,right:e.right-S,bottom:e.bottom-C}}let v=d?"fixed":getComputedStyle(a).position;if(/^(fixed|sticky)$/.test(v))break;a=v=="absolute"?a.offsetParent:Wi(a)}}function Cw(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,a=t+1;a<Math.min(innerHeight,e.bottom);a+=5){let u=n.root.elementFromPoint(s,a);if(!u||u==n.dom||!n.dom.contains(u))continue;let d=u.getBoundingClientRect();if(d.top>=t-20){r=u,i=d.top;break}}return{refDOM:r,refTop:i,stack:Dy(n.dom)}}function Dy(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=Wi(r));return e}function bw({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;Py(t,r==0?0:r-e)}function Py(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:i,left:s}=n[t];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let Ii=null;function Ew(n){if(n.setActive)return n.setActive();if(Ii)return n.focus(Ii);let e=Dy(n);n.focus(Ii==null?{get preventScroll(){return Ii={preventScroll:!0},!0}}:void 0),Ii||(Ii=!1,Py(e,0))}function Ly(n,e){let t,r=2e8,i,s=0,a=e.top,u=e.top,d,f;for(let p=n.firstChild,g=0;p;p=p.nextSibling,g++){let v;if(p.nodeType==1)v=p.getClientRects();else if(p.nodeType==3)v=$n(p).getClientRects();else continue;for(let x=0;x<v.length;x++){let k=v[x];if(k.top<=a&&k.bottom>=u){a=Math.max(k.bottom,a),u=Math.min(k.top,u);let S=k.left>e.left?k.left-e.left:k.right<e.left?e.left-k.right:0;if(S<r){t=p,r=S,i=S&&t.nodeType==3?{left:k.right<e.left?k.right:k.left,top:e.top}:e,p.nodeType==1&&S&&(s=g+(e.left>=(k.left+k.right)/2?1:0));continue}}else k.top>e.top&&!d&&k.left<=e.left&&k.right>=e.left&&(d=p,f={left:Math.max(k.left,Math.min(k.right,e.left)),top:k.top});!t&&(e.left>=k.right&&e.top>=k.top||e.left>=k.left&&e.top>=k.bottom)&&(s=g+1)}}return!t&&d&&(t=d,i=f,r=0),t&&t.nodeType==3?Mw(t,i):!t||r&&t.nodeType==1?{node:n,offset:s}:Ly(t,i)}function Mw(n,e){let t=n.nodeValue.length,r=document.createRange();for(let i=0;i<t;i++){r.setEnd(n,i+1),r.setStart(n,i);let s=fr(r,1);if(s.top!=s.bottom&&Sf(e,s))return{node:n,offset:i+(e.left>=(s.left+s.right)/2?1:0)}}return{node:n,offset:0}}function Sf(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function Nw(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function Tw(n,e,t){let{node:r,offset:i}=Ly(e,t),s=-1;if(r.nodeType==1&&!r.firstChild){let a=r.getBoundingClientRect();s=a.left!=a.right&&t.left>(a.left+a.right)/2?1:-1}return n.docView.posFromDOM(r,i,s)}function Aw(n,e,t,r){let i=-1;for(let s=e,a=!1;s!=n.dom;){let u=n.docView.nearestDesc(s,!0),d;if(!u)return null;if(u.dom.nodeType==1&&(u.node.isBlock&&u.parent||!u.contentDOM)&&((d=u.dom.getBoundingClientRect()).width||d.height)&&(u.node.isBlock&&u.parent&&(!a&&d.left>r.left||d.top>r.top?i=u.posBefore:(!a&&d.right<r.left||d.bottom<r.top)&&(i=u.posAfter),a=!0),!u.contentDOM&&i<0&&!u.node.isText))return(u.node.isBlock?r.top<(d.top+d.bottom)/2:r.left<(d.left+d.right)/2)?u.posBefore:u.posAfter;s=u.dom.parentNode}return i>-1?i:n.docView.posFromDOM(e,t,-1)}function Iy(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),s=i;;){let a=n.childNodes[s];if(a.nodeType==1){let u=a.getClientRects();for(let d=0;d<u.length;d++){let f=u[d];if(Sf(e,f))return Iy(a,e,f)}}if((s=(s+1)%r)==i)break}return n}function Ow(n,e){let t=n.dom.ownerDocument,r,i=0,s=vw(t,e.left,e.top);s&&({node:r,offset:i}=s);let a=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),u;if(!a||!n.dom.contains(a.nodeType!=1?a.parentNode:a)){let f=n.dom.getBoundingClientRect();if(!Sf(e,f)||(a=Iy(n.dom,e,f),!a))return null}if(At)for(let f=a;r&&f;f=Wi(f))f.draggable&&(r=void 0);if(a=Nw(a,e),r){if(mn&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let p=r.childNodes[i],g;p.nodeName=="IMG"&&(g=p.getBoundingClientRect()).right<=e.left&&g.bottom>e.top&&i++}let f;ms&&i&&r.nodeType==1&&(f=r.childNodes[i-1]).nodeType==1&&f.contentEditable=="false"&&f.getBoundingClientRect().top>=e.top&&i--,r==n.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?u=n.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(u=Aw(n,r,i,e))}u==null&&(u=Tw(n,a,e));let d=n.docView.nearestDesc(a,!0);return{pos:u,inside:d?d.posAtStart-d.border:-1}}function Og(n){return n.top<n.bottom||n.left<n.right}function fr(n,e){let t=n.getClientRects();if(t.length){let r=t[e<0?0:t.length-1];if(Og(r))return r}return Array.prototype.find.call(t,Og)||n.getBoundingClientRect()}const Rw=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function zy(n,e,t){let{node:r,offset:i,atom:s}=n.docView.domFromPos(e,t<0?-1:1),a=ms||mn;if(r.nodeType==3)if(a&&(Rw.test(r.nodeValue)||(t<0?!i:i==r.nodeValue.length))){let d=fr($n(r,i,i),t);if(mn&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let f=fr($n(r,i-1,i-1),-1);if(f.top==d.top){let p=fr($n(r,i,i+1),-1);if(p.top!=d.top)return Fo(p,p.left<f.left)}}return d}else{let d=i,f=i,p=t<0?1:-1;return t<0&&!i?(f++,p=-1):t>=0&&i==r.nodeValue.length?(d--,p=1):t<0?d--:f++,Fo(fr($n(r,d,f),p),p<0)}if(!n.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(t<0||i==rn(r))){let d=r.childNodes[i-1];if(d.nodeType==1)return ld(d.getBoundingClientRect(),!1)}if(s==null&&i<rn(r)){let d=r.childNodes[i];if(d.nodeType==1)return ld(d.getBoundingClientRect(),!0)}return ld(r.getBoundingClientRect(),t>=0)}if(s==null&&i&&(t<0||i==rn(r))){let d=r.childNodes[i-1],f=d.nodeType==3?$n(d,rn(d)-(a?0:1)):d.nodeType==1&&(d.nodeName!="BR"||!d.nextSibling)?d:null;if(f)return Fo(fr(f,1),!1)}if(s==null&&i<rn(r)){let d=r.childNodes[i];for(;d.pmViewDesc&&d.pmViewDesc.ignoreForCoords;)d=d.nextSibling;let f=d?d.nodeType==3?$n(d,0,a?0:1):d.nodeType==1?d:null:null;if(f)return Fo(fr(f,-1),!0)}return Fo(fr(r.nodeType==3?$n(r):r,-t),t>=0)}function Fo(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function ld(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function jy(n,e,t){let r=n.state,i=n.root.activeElement;r!=e&&n.updateState(e),i!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),i!=n.dom&&i&&i.focus()}}function Dw(n,e,t){let r=e.selection,i=t=="up"?r.$from:r.$to;return jy(n,e,()=>{let{node:s}=n.docView.domFromPos(i.pos,t=="up"?-1:1);for(;;){let u=n.docView.nearestDesc(s,!0);if(!u)break;if(u.node.isBlock){s=u.contentDOM||u.dom;break}s=u.dom.parentNode}let a=zy(n,i.pos,1);for(let u=s.firstChild;u;u=u.nextSibling){let d;if(u.nodeType==1)d=u.getClientRects();else if(u.nodeType==3)d=$n(u,0,u.nodeValue.length).getClientRects();else continue;for(let f=0;f<d.length;f++){let p=d[f];if(p.bottom>p.top+1&&(t=="up"?a.top-p.top>(p.bottom-a.top)*2:p.bottom-a.bottom>(a.bottom-p.top)*2))return!1}}return!0})}const Pw=/[\u0590-\u08ac]/;function Lw(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,a=i==r.parent.content.size,u=n.domSelection();return u?!Pw.test(r.parent.textContent)||!u.modify?t=="left"||t=="backward"?s:a:jy(n,e,()=>{let{focusNode:d,focusOffset:f,anchorNode:p,anchorOffset:g}=n.domSelectionRange(),v=u.caretBidiLevel;u.modify("move",t,"character");let x=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:k,focusOffset:S}=n.domSelectionRange(),C=k&&!x.contains(k.nodeType==1?k:k.parentNode)||d==k&&f==S;try{u.collapse(p,g),d&&(d!=p||f!=g)&&u.extend&&u.extend(d,f)}catch{}return v!=null&&(u.caretBidiLevel=v),C}):r.pos==r.start()||r.pos==r.end()}let Rg=null,Dg=null,Pg=!1;function Iw(n,e,t){return Rg==e&&Dg==t?Pg:(Rg=e,Dg=t,Pg=t=="up"||t=="down"?Dw(n,e,t):Lw(n,e,t))}const on=0,Lg=1,Jr=2,Nn=3;class gs{constructor(e,t,r,i){this.parent=e,this.children=t,this.dom=r,this.contentDOM=i,this.dirty=on,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let i=this.children[t];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,a;if(e==this.contentDOM)s=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((a=s.pmViewDesc)&&a.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(a)+a.size:this.posAtStart}else{let s,a;if(e==this.contentDOM)s=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((a=s.pmViewDesc)&&a.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(a):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=t>ht(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&t==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),a;if(s&&(!t||s.node))if(r&&(a=s.nodeDOM)&&!(a.nodeType==1?a.contains(e.nodeType==1?e:e.parentNode):a==e))r=!1;else return s}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let i=this.children[t],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)for(let a=0;a<i.children.length;a++){let u=i.children[a];if(u.size){i=u;break}}return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let a=this.children[r],u=s+a.size;if(u>e||a instanceof By){i=e-s;break}s=u}if(i)return this.children[r].domFromPos(i-this.children[r].border,t);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof Fy&&s.side>=0;r--);if(t<=0){let s,a=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,a=!1);return s&&t&&a&&!s.border&&!s.domAtom?s.domFromPos(s.size,t):{node:this.contentDOM,offset:s?ht(s.dom)+1:0}}else{let s,a=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,a=!1);return s&&a&&!s.border&&!s.domAtom?s.domFromPos(0,t):{node:this.contentDOM,offset:s?ht(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let a=r,u=0;;u++){let d=this.children[u],f=a+d.size;if(i==-1&&e<=f){let p=a+d.border;if(e>=p&&t<=f-d.border&&d.node&&d.contentDOM&&this.contentDOM.contains(d.contentDOM))return d.parseRange(e,t,p);e=a;for(let g=u;g>0;g--){let v=this.children[g-1];if(v.size&&v.dom.parentNode==this.contentDOM&&!v.emptyChildAt(1)){i=ht(v.dom)+1;break}e-=v.size}i==-1&&(i=0)}if(i>-1&&(f>t||u==this.children.length-1)){t=f;for(let p=u+1;p<this.children.length;p++){let g=this.children[p];if(g.size&&g.dom.parentNode==this.contentDOM&&!g.emptyChildAt(-1)){s=ht(g.dom);break}t+=g.size}s==-1&&(s=this.contentDOM.childNodes.length);break}a=f}return{node:this.contentDOM,from:e,to:t,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,i=!1){let s=Math.min(e,t),a=Math.max(e,t);for(let x=0,k=0;x<this.children.length;x++){let S=this.children[x],C=k+S.size;if(s>k&&a<C)return S.setSelection(e-k-S.border,t-k-S.border,r,i);k=C}let u=this.domFromPos(e,e?-1:1),d=t==e?u:this.domFromPos(t,t?-1:1),f=r.root.getSelection(),p=r.domSelectionRange(),g=!1;if((mn||At)&&e==t){let{node:x,offset:k}=u;if(x.nodeType==3){if(g=!!(k&&x.nodeValue[k-1]==`
`),g&&k==x.nodeValue.length)for(let S=x,C;S;S=S.parentNode){if(C=S.nextSibling){C.nodeName=="BR"&&(u=d={node:C.parentNode,offset:ht(C)+1});break}let M=S.pmViewDesc;if(M&&M.node&&M.node.isBlock)break}}else{let S=x.childNodes[k-1];g=S&&(S.nodeName=="BR"||S.contentEditable=="false")}}if(mn&&p.focusNode&&p.focusNode!=d.node&&p.focusNode.nodeType==1){let x=p.focusNode.childNodes[p.focusOffset];x&&x.contentEditable=="false"&&(i=!0)}if(!(i||g&&At)&&oi(u.node,u.offset,p.anchorNode,p.anchorOffset)&&oi(d.node,d.offset,p.focusNode,p.focusOffset))return;let v=!1;if((f.extend||e==t)&&!g){f.collapse(u.node,u.offset);try{e!=t&&f.extend(d.node,d.offset),v=!0}catch{}}if(!v){if(e>t){let k=u;u=d,d=k}let x=document.createRange();x.setEnd(d.node,d.offset),x.setStart(u.node,u.offset),f.removeAllRanges(),f.addRange(x)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],a=r+s.size;if(r==a?e<=a&&t>=r:e<a&&t>r){let u=r+s.border,d=a-s.border;if(e>=u&&t<=d){this.dirty=e==r||t==a?Jr:Lg,e==u&&t==d&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=Nn:s.markDirty(e-u,t-u);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Jr:Nn}r=a}this.dirty=Jr}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?Jr:Lg;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class Fy extends gs{constructor(e,t,r,i){let s,a=t.type.toDOM;if(typeof a=="function"&&(a=a(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!t.type.spec.raw){if(a.nodeType!=1){let u=document.createElement("span");u.appendChild(a),a=u}a.contentEditable="false",a.classList.add("ProseMirror-widget")}super(e,[],a,null),this.widget=t,this.widget=t,s=this}matchesWidget(e){return this.dirty==on&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class zw extends gs{constructor(e,t,r,i){super(e,[],t,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class si extends gs{constructor(e,t,r,i,s){super(e,[],r,i),this.mark=t,this.spec=s}static create(e,t,r,i){let s=i.nodeViews[t.type.name],a=s&&s(t,i,r);return(!a||!a.dom)&&(a=ui.renderSpec(document,t.type.spec.toDOM(t,r),null,t.attrs)),new si(e,t,a.dom,a.contentDOM||a.dom,a)}parseRule(){return this.dirty&Nn||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Nn&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=on){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=on}}slice(e,t,r){let i=si.create(this.parent,this.mark,!0,r),s=this.children,a=this.size;t<a&&(s=_d(s,t,a,r)),e>0&&(s=_d(s,0,e,r));for(let u=0;u<s.length;u++)s[u].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Er extends gs{constructor(e,t,r,i,s,a,u,d,f){super(e,[],s,a),this.node=t,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=u}static create(e,t,r,i,s,a){let u=s.nodeViews[t.type.name],d,f=u&&u(t,s,()=>{if(!d)return a;if(d.parent)return d.parent.posBeforeChild(d)},r,i),p=f&&f.dom,g=f&&f.contentDOM;if(t.isText){if(!p)p=document.createTextNode(t.text);else if(p.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else p||({dom:p,contentDOM:g}=ui.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!g&&!t.isText&&p.nodeName!="BR"&&(p.hasAttribute("contenteditable")||(p.contentEditable="false"),t.type.spec.draggable&&(p.draggable=!0));let v=p;return p=$y(p,r,t),f?d=new jw(e,t,r,i,p,g||null,v,f,s,a+1):t.isText?new Va(e,t,r,i,p,v,s):new Er(e,t,r,i,p,g||null,v,s,a+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>L.empty)}return e}matchesNode(e,t,r){return this.dirty==on&&e.eq(this.node)&&na(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,i=t,s=e.composing?this.localCompositionInfo(e,t):null,a=s&&s.pos>-1?s:null,u=s&&s.pos<0,d=new Bw(this,a&&a.node,e);$w(this.node,this.innerDeco,(f,p,g)=>{f.spec.marks?d.syncToMarks(f.spec.marks,r,e):f.type.side>=0&&!g&&d.syncToMarks(p==this.node.childCount?Te.none:this.node.child(p).marks,r,e),d.placeWidget(f,e,i)},(f,p,g,v)=>{d.syncToMarks(f.marks,r,e);let x;d.findNodeMatch(f,p,g,v)||u&&e.state.selection.from>i&&e.state.selection.to<i+f.nodeSize&&(x=d.findIndexWithChild(s.node))>-1&&d.updateNodeAt(f,p,g,x,e)||d.updateNextNode(f,p,g,e,v,i)||d.addNode(f,p,g,e,i),i+=f.nodeSize}),d.syncToMarks([],r,e),this.node.isTextblock&&d.addTextblockHacks(),d.destroyRest(),(d.changed||this.dirty==Jr)&&(a&&this.protectLocalComposition(e,a),_y(this.contentDOM,this.children,e),Ki&&Vw(this.dom))}localCompositionInfo(e,t){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof re)||r<t||i>t+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let a=s.nodeValue,u=Uw(this.node.content,a,r-t,i-t);return u<0?null:{node:s,pos:u,text:a}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:i}){if(this.getDesc(t))return;let s=t;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let a=new zw(this,s,t,i);e.input.compositionNodes.push(a),this.children=_d(this.children,r,r+i.length,e,a)}update(e,t,r,i){return this.dirty==Nn||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,i),!0)}updateInner(e,t,r,i){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=on}updateOuterDeco(e){if(na(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=Hy(this.dom,this.nodeDOM,Bd(this.outerDeco,this.node,t),Bd(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function Ig(n,e,t,r,i){$y(r,e,n);let s=new Er(void 0,n,e,t,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class Va extends Er{constructor(e,t,r,i,s,a,u){super(e,t,r,i,s,null,a,u,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,i){return this.dirty==Nn||this.dirty!=on&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=on||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=on,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let i=this.node.cut(e,t),s=document.createTextNode(i.text);return new Va(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=Nn)}get domAtom(){return!1}isText(e){return this.node.text==e}}class By extends gs{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==on&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class jw extends Er{constructor(e,t,r,i,s,a,u,d,f,p){super(e,t,r,i,s,a,u,f,p),this.spec=d}update(e,t,r,i){if(this.dirty==Nn)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,t,r);return s&&this.updateInner(e,t,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,i){this.spec.setSelection?this.spec.setSelection(e,t,r.root):super.setSelection(e,t,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function _y(n,e,t){let r=n.firstChild,i=!1;for(let s=0;s<e.length;s++){let a=e[s],u=a.dom;if(u.parentNode==n){for(;u!=r;)r=zg(r),i=!0;r=r.nextSibling}else i=!0,n.insertBefore(u,r);if(a instanceof si){let d=r?r.previousSibling:n.lastChild;_y(a.contentDOM,a.children,t),r=d?d.nextSibling:n.firstChild}}for(;r;)r=zg(r),i=!0;i&&t.trackWrites==n&&(t.trackWrites=null)}const Wo=function(n){n&&(this.nodeName=n)};Wo.prototype=Object.create(null);const Gr=[new Wo];function Bd(n,e,t){if(n.length==0)return Gr;let r=t?Gr[0]:new Wo,i=[r];for(let s=0;s<n.length;s++){let a=n[s].type.attrs;if(a){a.nodeName&&i.push(r=new Wo(a.nodeName));for(let u in a){let d=a[u];d!=null&&(t&&i.length==1&&i.push(r=new Wo(e.isInline?"span":"div")),u=="class"?r.class=(r.class?r.class+" ":"")+d:u=="style"?r.style=(r.style?r.style+";":"")+d:u!="nodeName"&&(r[u]=d))}}}return i}function Hy(n,e,t,r){if(t==Gr&&r==Gr)return e;let i=e;for(let s=0;s<r.length;s++){let a=r[s],u=t[s];if(s){let d;u&&u.nodeName==a.nodeName&&i!=n&&(d=i.parentNode)&&d.nodeName.toLowerCase()==a.nodeName||(d=document.createElement(a.nodeName),d.pmIsDeco=!0,d.appendChild(i),u=Gr[0]),i=d}Fw(i,u||Gr[0],a)}return i}function Fw(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=t.class?t.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&n.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&n.classList.add(i[s]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)n.style.removeProperty(i[1])}t.style&&(n.style.cssText+=t.style)}}function $y(n,e,t){return Hy(n,n,Gr,Bd(e,t,n.nodeType!=1))}function na(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function zg(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class Bw{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=_w(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let i=0,s=this.stack.length>>1,a=Math.min(s,e.length);for(;i<a&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=on,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let u=-1;for(let d=this.index;d<Math.min(this.index+3,this.top.children.length);d++){let f=this.top.children[d];if(f.matchesMark(e[s])&&!this.isLocked(f.dom)){u=d;break}}if(u>-1)u>this.index&&(this.changed=!0,this.destroyBetween(this.index,u)),this.top=this.top.children[this.index];else{let d=si.create(this.top,e[s],t,r);this.top.children.splice(this.index,0,d),this.top=d,this.changed=!0}this.index=0,s++}}findNodeMatch(e,t,r,i){let s=-1,a;if(i>=this.preMatch.index&&(a=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&a.matchesNode(e,t,r))s=this.top.children.indexOf(a,this.index);else for(let u=this.index,d=Math.min(this.top.children.length,u+5);u<d;u++){let f=this.top.children[u];if(f.matchesNode(e,t,r)&&!this.preMatch.matched.has(f)){s=u;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,t,r,i,s){let a=this.top.children[i];return a.dirty==Nn&&a.dom==a.contentDOM&&(a.dirty=Jr),a.update(e,t,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=t}}updateNextNode(e,t,r,i,s,a){for(let u=this.index;u<this.top.children.length;u++){let d=this.top.children[u];if(d instanceof Er){let f=this.preMatch.matched.get(d);if(f!=null&&f!=s)return!1;let p=d.dom,g,v=this.isLocked(p)&&!(e.isText&&d.node&&d.node.isText&&d.nodeDOM.nodeValue==e.text&&d.dirty!=Nn&&na(t,d.outerDeco));if(!v&&d.update(e,t,r,i))return this.destroyBetween(this.index,u),d.dom!=p&&(this.changed=!0),this.index++,!0;if(!v&&(g=this.recreateWrapper(d,e,t,r,i,a)))return this.destroyBetween(this.index,u),this.top.children[this.index]=g,g.contentDOM&&(g.dirty=Jr,g.updateChildren(i,a+1),g.dirty=on),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,r,i,s,a){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!na(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let u=Er.create(this.top,t,r,i,s,a);if(u.contentDOM){u.children=e.children,e.children=[];for(let d of u.children)d.parent=u}return e.destroy(),u}addNode(e,t,r,i,s){let a=Er.create(this.top,e,t,r,i,s);a.contentDOM&&a.updateChildren(i,s+1),this.top.children.splice(this.index++,0,a),this.changed=!0}placeWidget(e,t,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new Fy(this.top,e,t,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof si;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof Va)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((At||wt)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new By(this.top,[],r,null);t!=this.top?t.children.push(i):t.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function _w(n,e){let t=e,r=t.children.length,i=n.childCount,s=new Map,a=[];e:for(;i>0;){let u;for(;;)if(r){let f=t.children[r-1];if(f instanceof si)t=f,r=f.children.length;else{u=f,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let d=u.node;if(d){if(d!=n.child(i-1))break;--i,s.set(u,i),a.push(u)}}return{index:i,matched:s,matches:a.reverse()}}function Hw(n,e){return n.type.side-e.type.side}function $w(n,e,t,r){let i=e.locals(n),s=0;if(i.length==0){for(let f=0;f<n.childCount;f++){let p=n.child(f);r(p,i,e.forChild(s,p),f),s+=p.nodeSize}return}let a=0,u=[],d=null;for(let f=0;;){let p,g;for(;a<i.length&&i[a].to==s;){let C=i[a++];C.widget&&(p?(g||(g=[p])).push(C):p=C)}if(p)if(g){g.sort(Hw);for(let C=0;C<g.length;C++)t(g[C],f,!!d)}else t(p,f,!!d);let v,x;if(d)x=-1,v=d,d=null;else if(f<n.childCount)x=f,v=n.child(f++);else break;for(let C=0;C<u.length;C++)u[C].to<=s&&u.splice(C--,1);for(;a<i.length&&i[a].from<=s&&i[a].to>s;)u.push(i[a++]);let k=s+v.nodeSize;if(v.isText){let C=k;a<i.length&&i[a].from<C&&(C=i[a].from);for(let M=0;M<u.length;M++)u[M].to<C&&(C=u[M].to);C<k&&(d=v.cut(C-s),v=v.cut(0,C-s),k=C,x=-1)}else for(;a<i.length&&i[a].to<k;)a++;let S=v.isInline&&!v.isLeaf?u.filter(C=>!C.inline):u.slice();r(v,S,e.forChild(s,v),x),s=k}}function Vw(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function Uw(n,e,t,r){for(let i=0,s=0;i<n.childCount&&s<=r;){let a=n.child(i++),u=s;if(s+=a.nodeSize,!a.isText)continue;let d=a.text;for(;i<n.childCount;){let f=n.child(i++);if(s+=f.nodeSize,!f.isText)break;d+=f.text}if(s>=t){if(s>=r&&d.slice(r-e.length-u,r-u)==e)return r-e.length;let f=u<r?d.lastIndexOf(e,r-u-1):-1;if(f>=0&&f+e.length+u>=t)return u+f;if(t==r&&d.length>=r+e.length-u&&d.slice(r-u,r-u+e.length)==e)return r}}return-1}function _d(n,e,t,r,i){let s=[];for(let a=0,u=0;a<n.length;a++){let d=n[a],f=u,p=u+=d.size;f>=t||p<=e?s.push(d):(f<e&&s.push(d.slice(0,e-f,r)),i&&(s.push(i),i=void 0),p>t&&s.push(d.slice(t-f,d.size,r)))}return s}function Cf(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let i=n.docView.nearestDesc(t.focusNode),s=i&&i.size==0,a=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(a<0)return null;let u=r.resolve(a),d,f;if($a(t)){for(d=a;i&&!i.node;)i=i.parent;let g=i.node;if(i&&g.isAtom&&ne.isSelectable(g)&&i.parent&&!(g.isInline&&gw(t.focusNode,t.focusOffset,i.dom))){let v=i.posBefore;f=new ne(a==v?u:r.resolve(v))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let g=a,v=a;for(let x=0;x<t.rangeCount;x++){let k=t.getRangeAt(x);g=Math.min(g,n.docView.posFromDOM(k.startContainer,k.startOffset,1)),v=Math.max(v,n.docView.posFromDOM(k.endContainer,k.endOffset,-1))}if(g<0)return null;[d,a]=v==n.state.selection.anchor?[v,g]:[g,v],u=r.resolve(a)}else d=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(d<0)return null}let p=r.resolve(d);if(!f){let g=e=="pointer"||n.state.selection.head<u.pos&&!s?1:-1;f=bf(n,p,u,g)}return f}function Vy(n){return n.editable?n.hasFocus():Wy(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function Wn(n,e=!1){let t=n.state.selection;if(Uy(n,t),!!Vy(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&wt){let r=n.domSelectionRange(),i=n.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&oi(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)Kw(n);else{let{anchor:r,head:i}=t,s,a;jg&&!(t instanceof re)&&(t.$from.parent.inlineContent||(s=Fg(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(a=Fg(n,t.to))),n.docView.setSelection(r,i,n,e),jg&&(s&&Bg(s),a&&Bg(a)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&Ww(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const jg=At||wt&&Ry<63;function Fg(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),i=r<t.childNodes.length?t.childNodes[r]:null,s=r?t.childNodes[r-1]:null;if(At&&i&&i.contentEditable=="false")return ad(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return ad(i);if(s)return ad(s)}}function ad(n){return n.contentEditable="true",At&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function Bg(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function Ww(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,i=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=i)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!Vy(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function Kw(n){let e=n.domSelection(),t=document.createRange();if(!e)return;let r=n.cursorWrapper.dom,i=r.nodeName=="IMG";i?t.setStart(r.parentNode,ht(r)+1):t.setStart(r,0),t.collapse(!0),e.removeAllRanges(),e.addRange(t),!i&&!n.state.selection.visible&&Bt&&br<=11&&(r.disabled=!0,r.disabled=!1)}function Uy(n,e){if(e instanceof ne){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(_g(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else _g(n)}function _g(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function bf(n,e,t,r){return n.someProp("createSelectionBetween",i=>i(n,e,t))||re.between(e,t,r)}function Hg(n){return n.editable&&!n.hasFocus()?!1:Wy(n)}function Wy(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function qw(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return oi(e.node,e.offset,t.anchorNode,t.anchorOffset)}function Hd(n,e){let{$anchor:t,$head:r}=n.selection,i=e>0?t.max(r):t.min(r),s=i.parent.inlineContent?i.depth?n.doc.resolve(e>0?i.after():i.before()):null:i;return s&&le.findFrom(s,e)}function hr(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function $g(n,e,t){let r=n.state.selection;if(r instanceof re)if(t.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let a=n.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return hr(n,new re(r.$anchor,a))}else if(r.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let i=Hd(n.state,e);return i&&i instanceof ne?hr(n,i):!1}else if(!(nn&&t.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,a;if(!s||s.isText)return!1;let u=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(a=n.docView.descAt(u))&&!a.contentDOM?ne.isSelectable(s)?hr(n,new ne(e<0?n.state.doc.resolve(i.pos-s.nodeSize):i)):ms?hr(n,new re(n.state.doc.resolve(e<0?u:u+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof ne&&r.node.isInline)return hr(n,new re(e>0?r.$to:r.$from));{let i=Hd(n.state,e);return i?hr(n,i):!1}}}function ra(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Ko(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function zi(n,e){return e<0?Jw(n):Gw(n)}function Jw(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i,s,a=!1;for(mn&&t.nodeType==1&&r<ra(t)&&Ko(t.childNodes[r],-1)&&(a=!0);;)if(r>0){if(t.nodeType!=1)break;{let u=t.childNodes[r-1];if(Ko(u,-1))i=t,s=--r;else if(u.nodeType==3)t=u,r=t.nodeValue.length;else break}}else{if(Ky(t))break;{let u=t.previousSibling;for(;u&&Ko(u,-1);)i=t.parentNode,s=ht(u),u=u.previousSibling;if(u)t=u,r=ra(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}a?$d(n,t,r):i&&$d(n,i,s)}function Gw(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i=ra(t),s,a;for(;;)if(r<i){if(t.nodeType!=1)break;let u=t.childNodes[r];if(Ko(u,1))s=t,a=++r;else break}else{if(Ky(t))break;{let u=t.nextSibling;for(;u&&Ko(u,1);)s=u.parentNode,a=ht(u)+1,u=u.nextSibling;if(u)t=u,r=0,i=ra(t);else{if(t=t.parentNode,t==n.dom)break;r=i=0}}}s&&$d(n,s,a)}function Ky(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function Qw(n,e){for(;n&&e==n.childNodes.length&&!ps(n);)e=ht(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function Yw(n,e){for(;n&&!e&&!ps(n);)e=ht(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function $d(n,e,t){if(e.nodeType!=3){let s,a;(a=Qw(e,t))?(e=a,t=0):(s=Yw(e,t))&&(e=s,t=s.nodeValue.length)}let r=n.domSelection();if(!r)return;if($a(r)){let s=document.createRange();s.setEnd(e,t),s.setStart(e,t),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:i}=n;setTimeout(()=>{n.state==i&&Wn(n)},50)}function Vg(n,e){let t=n.state.doc.resolve(e);if(!(wt||xw)&&t.parent.inlineContent){let i=n.coordsAtPos(e);if(e>t.start()){let s=n.coordsAtPos(e-1),a=(s.top+s.bottom)/2;if(a>i.top&&a<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<t.end()){let s=n.coordsAtPos(e+1),a=(s.top+s.bottom)/2;if(a>i.top&&a<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function Ug(n,e,t){let r=n.state.selection;if(r instanceof re&&!r.empty||t.indexOf("s")>-1||nn&&t.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let a=Hd(n.state,e);if(a&&a instanceof ne)return hr(n,a)}if(!i.parent.inlineContent){let a=e<0?i:s,u=r instanceof qt?le.near(a,e):le.findFrom(a,e);return u?hr(n,u):!1}return!1}function Wg(n,e){if(!(n.state.selection instanceof re))return!0;let{$head:t,$anchor:r,empty:i}=n.state.selection;if(!t.sameParent(r))return!0;if(!i)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(s&&!s.isText){let a=n.state.tr;return e<0?a.delete(t.pos-s.nodeSize,t.pos):a.delete(t.pos,t.pos+s.nodeSize),n.dispatch(a),!0}return!1}function Kg(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function Xw(n){if(!At||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Kg(n,r,"true"),setTimeout(()=>Kg(n,r,"false"),20)}return!1}function Zw(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function eS(n,e){let t=e.keyCode,r=Zw(e);if(t==8||nn&&t==72&&r=="c")return Wg(n,-1)||zi(n,-1);if(t==46&&!e.shiftKey||nn&&t==68&&r=="c")return Wg(n,1)||zi(n,1);if(t==13||t==27)return!0;if(t==37||nn&&t==66&&r=="c"){let i=t==37?Vg(n,n.state.selection.from)=="ltr"?-1:1:-1;return $g(n,i,r)||zi(n,i)}else if(t==39||nn&&t==70&&r=="c"){let i=t==39?Vg(n,n.state.selection.from)=="ltr"?1:-1:1;return $g(n,i,r)||zi(n,i)}else{if(t==38||nn&&t==80&&r=="c")return Ug(n,-1,r)||zi(n,-1);if(t==40||nn&&t==78&&r=="c")return Xw(n)||Ug(n,1,r)||zi(n,1);if(r==(nn?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function Ef(n,e){n.someProp("transformCopied",x=>{e=x(e,n)});let t=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let x=r.firstChild;t.push(x.type.name,x.attrs!=x.type.defaultAttrs?x.attrs:null),r=x.content}let a=n.someProp("clipboardSerializer")||ui.fromSchema(n.state.schema),u=Xy(),d=u.createElement("div");d.appendChild(a.serializeFragment(r,{document:u}));let f=d.firstChild,p,g=0;for(;f&&f.nodeType==1&&(p=Yy[f.nodeName.toLowerCase()]);){for(let x=p.length-1;x>=0;x--){let k=u.createElement(p[x]);for(;d.firstChild;)k.appendChild(d.firstChild);d.appendChild(k),g++}f=d.firstChild}f&&f.nodeType==1&&f.setAttribute("data-pm-slice",`${i} ${s}${g?` -${g}`:""} ${JSON.stringify(t)}`);let v=n.someProp("clipboardTextSerializer",x=>x(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:d,text:v,slice:e}}function qy(n,e,t,r,i){let s=i.parent.type.spec.code,a,u;if(!t&&!e)return null;let d=e&&(r||s||!t);if(d){if(n.someProp("transformPastedText",v=>{e=v(e,s||r,n)}),s)return e?new U(L.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):U.empty;let g=n.someProp("clipboardTextParser",v=>v(e,i,r,n));if(g)u=g;else{let v=i.marks(),{schema:x}=n.state,k=ui.fromSchema(x);a=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(S=>{let C=a.appendChild(document.createElement("p"));S&&C.appendChild(k.serializeNode(x.text(S,v)))})}}else n.someProp("transformPastedHTML",g=>{t=g(t,n)}),a=iS(t),ms&&oS(a);let f=a&&a.querySelector("[data-pm-slice]"),p=f&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(f.getAttribute("data-pm-slice")||"");if(p&&p[3])for(let g=+p[3];g>0;g--){let v=a.firstChild;for(;v&&v.nodeType!=1;)v=v.nextSibling;if(!v)break;a=v}if(u||(u=(n.someProp("clipboardParser")||n.someProp("domParser")||Cr.fromSchema(n.state.schema)).parseSlice(a,{preserveWhitespace:!!(d||p),context:i,ruleFromNode(v){return v.nodeName=="BR"&&!v.nextSibling&&v.parentNode&&!tS.test(v.parentNode.nodeName)?{ignore:!0}:null}})),p)u=sS(qg(u,+p[1],+p[2]),p[4]);else if(u=U.maxOpen(nS(u.content,i),!0),u.openStart||u.openEnd){let g=0,v=0;for(let x=u.content.firstChild;g<u.openStart&&!x.type.spec.isolating;g++,x=x.firstChild);for(let x=u.content.lastChild;v<u.openEnd&&!x.type.spec.isolating;v++,x=x.lastChild);u=qg(u,g,v)}return n.someProp("transformPasted",g=>{u=g(u,n)}),u}const tS=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function nS(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.index(t)),s,a=[];if(n.forEach(u=>{if(!a)return;let d=i.findWrapping(u.type),f;if(!d)return a=null;if(f=a.length&&s.length&&Gy(d,s,u,a[a.length-1],0))a[a.length-1]=f;else{a.length&&(a[a.length-1]=Qy(a[a.length-1],s.length));let p=Jy(u,d);a.push(p),i=i.matchType(p.type),s=d}}),a)return L.from(a)}return n}function Jy(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,L.from(n));return n}function Gy(n,e,t,r,i){if(i<n.length&&i<e.length&&n[i]==e[i]){let s=Gy(n,e,t,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==n.length-1?t.type:n[i+1]))return r.copy(r.content.append(L.from(Jy(t,n,i+1))))}}function Qy(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,Qy(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(L.empty,!0);return n.copy(t.append(r))}function Vd(n,e,t,r,i,s){let a=e<0?n.firstChild:n.lastChild,u=a.content;return n.childCount>1&&(s=0),i<r-1&&(u=Vd(u,e,t,r,i+1,s)),i>=t&&(u=e<0?a.contentMatchAt(0).fillBefore(u,s<=i).append(u):u.append(a.contentMatchAt(a.childCount).fillBefore(L.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,a.copy(u))}function qg(n,e,t){return e<n.openStart&&(n=new U(Vd(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new U(Vd(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const Yy={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Jg=null;function Xy(){return Jg||(Jg=document.implementation.createHTMLDocument("title"))}let ud=null;function rS(n){let e=window.trustedTypes;return e?(ud||(ud=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),ud.createHTML(n)):n}function iS(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=Xy().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),i;if((i=r&&Yy[r[1].toLowerCase()])&&(n=i.map(s=>"<"+s+">").join("")+n+i.map(s=>"</"+s+">").reverse().join("")),t.innerHTML=rS(n),i)for(let s=0;s<i.length;s++)t=t.querySelector(i[s])||t;return t}function oS(n){let e=n.querySelectorAll(wt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function sS(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:i,openStart:s,openEnd:a}=n;for(let u=r.length-2;u>=0;u-=2){let d=t.nodes[r[u]];if(!d||d.hasRequiredAttrs())break;i=L.from(d.create(r[u+1],i)),s++,a++}return new U(i,s,a)}const Ot={},Rt={},lS={touchstart:!0,touchmove:!0};class aS{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function uS(n){for(let e in Ot){let t=Ot[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{dS(n,r)&&!Mf(n,r)&&(n.editable||!(r.type in Rt))&&t(n,r)},lS[e]?{passive:!0}:void 0)}At&&n.dom.addEventListener("input",()=>null),Ud(n)}function wr(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function cS(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function Ud(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>Mf(n,r))})}function Mf(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function dS(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function fS(n,e){!Mf(n,e)&&Ot[e.type]&&(n.editable||!(e.type in Rt))&&Ot[e.type](n,e)}Rt.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!e1(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(Vn&&wt&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),Ki&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",i=>i(n,Kr(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||eS(n,t)?t.preventDefault():wr(n,"key")};Rt.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};Rt.keypress=(n,e)=>{let t=e;if(e1(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||nn&&t.metaKey)return;if(n.someProp("handleKeyPress",i=>i(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof re)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(t.charCode);!/[\r\n]/.test(i)&&!n.someProp("handleTextInput",s=>s(n,r.$from.pos,r.$to.pos,i))&&n.dispatch(n.state.tr.insertText(i).scrollIntoView()),t.preventDefault()}};function Ua(n){return{left:n.clientX,top:n.clientY}}function hS(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function Nf(n,e,t,r,i){if(r==-1)return!1;let s=n.state.doc.resolve(r);for(let a=s.depth+1;a>0;a--)if(n.someProp(e,u=>a>s.depth?u(n,t,s.nodeAfter,s.before(a),i,!0):u(n,t,s.node(a),s.before(a),i,!1)))return!0;return!1}function Vi(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let r=n.state.tr.setSelection(e);r.setMeta("pointer",!0),n.dispatch(r)}function pS(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&ne.isSelectable(r)?(Vi(n,new ne(t)),!0):!1}function mS(n,e){if(e==-1)return!1;let t=n.state.selection,r,i;t instanceof ne&&(r=t.node);let s=n.state.doc.resolve(e);for(let a=s.depth+1;a>0;a--){let u=a>s.depth?s.nodeAfter:s.node(a);if(ne.isSelectable(u)){r&&t.$from.depth>0&&a>=t.$from.depth&&s.before(t.$from.depth+1)==t.$from.pos?i=s.before(t.$from.depth):i=s.before(a);break}}return i!=null?(Vi(n,ne.create(n.state.doc,i)),!0):!1}function gS(n,e,t,r,i){return Nf(n,"handleClickOn",e,t,r)||n.someProp("handleClick",s=>s(n,e,r))||(i?mS(n,t):pS(n,t))}function yS(n,e,t,r){return Nf(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",i=>i(n,e,r))}function vS(n,e,t,r){return Nf(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",i=>i(n,e,r))||xS(n,t,r)}function xS(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(Vi(n,re.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let a=s>i.depth?i.nodeAfter:i.node(s),u=i.before(s);if(a.inlineContent)Vi(n,re.create(r,u+1,u+1+a.content.size));else if(ne.isSelectable(a))Vi(n,ne.create(r,u));else continue;return!0}}function Tf(n){return ia(n)}const Zy=nn?"metaKey":"ctrlKey";Ot.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=Tf(n),i=Date.now(),s="singleClick";i-n.input.lastClick.time<500&&hS(t,n.input.lastClick)&&!t[Zy]&&n.input.lastClick.button==t.button&&(n.input.lastClick.type=="singleClick"?s="doubleClick":n.input.lastClick.type=="doubleClick"&&(s="tripleClick")),n.input.lastClick={time:i,x:t.clientX,y:t.clientY,type:s,button:t.button};let a=n.posAtCoords(Ua(t));a&&(s=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new kS(n,a,t,!!r)):(s=="doubleClick"?yS:vS)(n,a.pos,a.inside,t)?t.preventDefault():wr(n,"pointer"))};class kS{constructor(e,t,r,i){this.view=e,this.pos=t,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[Zy],this.allowDefault=r.shiftKey;let s,a;if(t.inside>-1)s=e.state.doc.nodeAt(t.inside),a=t.inside;else{let p=e.state.doc.resolve(t.pos);s=p.parent,a=p.depth?p.before():0}const u=i?null:r.target,d=u?e.docView.nearestDesc(u,!0):null;this.target=d&&d.dom.nodeType==1?d.dom:null;let{selection:f}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||f instanceof ne&&f.from<=a&&f.to>a)&&(this.mightDrag={node:s,pos:a,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&mn&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),wr(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Wn(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(Ua(e))),this.updateAllowDefault(e),this.allowDefault||!t?wr(this.view,"pointer"):gS(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||At&&this.mightDrag&&!this.mightDrag.node.isAtom||wt&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(Vi(this.view,le.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):wr(this.view,"pointer")}move(e){this.updateAllowDefault(e),wr(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Ot.touchstart=n=>{n.input.lastTouch=Date.now(),Tf(n),wr(n,"pointer")};Ot.touchmove=n=>{n.input.lastTouch=Date.now(),wr(n,"pointer")};Ot.contextmenu=n=>Tf(n);function e1(n,e){return n.composing?!0:At&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const wS=Vn?5e3:-1;Rt.compositionstart=Rt.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof re&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),ia(n,!0),n.markCursor=null;else if(ia(n,!e.selection.empty),mn&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let a=s<0?i.lastChild:i.childNodes[s-1];if(!a)break;if(a.nodeType==3){let u=n.domSelection();u&&u.collapse(a,a.nodeValue.length);break}else i=a,s=-1}}n.input.composing=!0}t1(n,wS)};Rt.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,t1(n,20))};function t1(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>ia(n),e))}function n1(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=CS());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function SS(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=pw(e.focusNode,e.focusOffset),r=mw(e.focusNode,e.focusOffset);if(t&&r&&t!=r){let i=r.pmViewDesc,s=n.domObserver.lastChangedTextNode;if(t==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(n.input.compositionNode==r){let a=t.pmViewDesc;if(!(!a||!a.isText(t.nodeValue)))return r}}return t||r}function CS(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function ia(n,e=!1){if(!(Vn&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),n1(n),e||n.docView&&n.docView.dirty){let t=Cf(n),r=n.state.selection;return t&&!t.eq(r)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function bS(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const is=Bt&&br<15||Ki&&kw<604;Ot.copy=Rt.cut=(n,e)=>{let t=e,r=n.state.selection,i=t.type=="cut";if(r.empty)return;let s=is?null:t.clipboardData,a=r.content(),{dom:u,text:d}=Ef(n,a);s?(t.preventDefault(),s.clearData(),s.setData("text/html",u.innerHTML),s.setData("text/plain",d)):bS(n,u),i&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function ES(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function MS(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?ss(n,r.value,null,i,e):ss(n,r.textContent,r.innerHTML,i,e)},50)}function ss(n,e,t,r,i){let s=qy(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",d=>d(n,i,s||U.empty)))return!0;if(!s)return!1;let a=ES(s),u=a?n.state.tr.replaceSelectionWith(a,r):n.state.tr.replaceSelection(s);return n.dispatch(u.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function r1(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}Rt.paste=(n,e)=>{let t=e;if(n.composing&&!Vn)return;let r=is?null:t.clipboardData,i=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&ss(n,r1(r),r.getData("text/html"),i,t)?t.preventDefault():MS(n,t)};class i1{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}}const NS=nn?"altKey":"ctrlKey";function o1(n,e){let t=n.someProp("dragCopies",r=>!r(e));return t??!e[NS]}Ot.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let i=n.state.selection,s=i.empty?null:n.posAtCoords(Ua(t)),a;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof ne?i.to-1:i.to))){if(r&&r.mightDrag)a=ne.create(n.state.doc,r.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let g=n.docView.nearestDesc(t.target,!0);g&&g.node.type.spec.draggable&&g!=n.docView&&(a=ne.create(n.state.doc,g.posBefore))}}let u=(a||n.state.selection).content(),{dom:d,text:f,slice:p}=Ef(n,u);(!t.dataTransfer.files.length||!wt||Ry>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(is?"Text":"text/html",d.innerHTML),t.dataTransfer.effectAllowed="copyMove",is||t.dataTransfer.setData("text/plain",f),n.dragging=new i1(p,o1(n,t),a)};Ot.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};Rt.dragover=Rt.dragenter=(n,e)=>e.preventDefault();Rt.drop=(n,e)=>{let t=e,r=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let i=n.posAtCoords(Ua(t));if(!i)return;let s=n.state.doc.resolve(i.pos),a=r&&r.slice;a?n.someProp("transformPasted",k=>{a=k(a,n)}):a=qy(n,r1(t.dataTransfer),is?null:t.dataTransfer.getData("text/html"),!1,s);let u=!!(r&&o1(n,t));if(n.someProp("handleDrop",k=>k(n,t,a||U.empty,u))){t.preventDefault();return}if(!a)return;t.preventDefault();let d=a?Sy(n.state.doc,s.pos,a):s.pos;d==null&&(d=s.pos);let f=n.state.tr;if(u){let{node:k}=r;k?k.replace(f):f.deleteSelection()}let p=f.mapping.map(d),g=a.openStart==0&&a.openEnd==0&&a.content.childCount==1,v=f.doc;if(g?f.replaceRangeWith(p,p,a.content.firstChild):f.replaceRange(p,p,a),f.doc.eq(v))return;let x=f.doc.resolve(p);if(g&&ne.isSelectable(a.content.firstChild)&&x.nodeAfter&&x.nodeAfter.sameMarkup(a.content.firstChild))f.setSelection(new ne(x));else{let k=f.mapping.map(d);f.mapping.maps[f.mapping.maps.length-1].forEach((S,C,M,P)=>k=P),f.setSelection(bf(n,x,f.doc.resolve(k)))}n.focus(),n.dispatch(f.setMeta("uiEvent","drop"))};Ot.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&Wn(n)},20))};Ot.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};Ot.beforeinput=(n,e)=>{if(wt&&Vn&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",s=>s(n,Kr(8,"Backspace")))))return;let{$cursor:i}=n.state.selection;i&&i.pos>0&&n.dispatch(n.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let n in Rt)Ot[n]=Rt[n];function ls(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class oa{constructor(e,t){this.toDOM=e,this.spec=t||ei,this.side=this.spec.side||0}map(e,t,r,i){let{pos:s,deleted:a}=e.mapResult(t.from+i,this.side<0?-1:1);return a?null:new St(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof oa&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&ls(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Mr{constructor(e,t){this.attrs=e,this.spec=t||ei}map(e,t,r,i){let s=e.map(t.from+i,this.spec.inclusiveStart?-1:1)-r,a=e.map(t.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=a?null:new St(s,a,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof Mr&&ls(this.attrs,e.attrs)&&ls(this.spec,e.spec)}static is(e){return e.type instanceof Mr}destroy(){}}class Af{constructor(e,t){this.attrs=e,this.spec=t||ei}map(e,t,r,i){let s=e.mapResult(t.from+i,1);if(s.deleted)return null;let a=e.mapResult(t.to+i,-1);return a.deleted||a.pos<=s.pos?null:new St(s.pos-r,a.pos-r,this)}valid(e,t){let{index:r,offset:i}=e.content.findIndex(t.from),s;return i==t.from&&!(s=e.child(r)).isText&&i+s.nodeSize==t.to}eq(e){return this==e||e instanceof Af&&ls(this.attrs,e.attrs)&&ls(this.spec,e.spec)}destroy(){}}class St{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new St(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new St(e,e,new oa(t,r))}static inline(e,t,r,i){return new St(e,t,new Mr(r,i))}static node(e,t,r,i){return new St(e,t,new Af(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Mr}get widget(){return this.type instanceof oa}}const Fi=[],ei={};class Fe{constructor(e,t){this.local=e.length?e:Fi,this.children=t.length?t:Fi}static create(e,t){return t.length?sa(t,e,0,ei):kt}find(e,t,r){let i=[];return this.findInner(e??0,t??1e9,i,0,r),i}findInner(e,t,r,i,s){for(let a=0;a<this.local.length;a++){let u=this.local[a];u.from<=t&&u.to>=e&&(!s||s(u.spec))&&r.push(u.copy(u.from+i,u.to+i))}for(let a=0;a<this.children.length;a+=3)if(this.children[a]<t&&this.children[a+1]>e){let u=this.children[a]+1;this.children[a+2].findInner(e-u,t-u,r,i+u,s)}}map(e,t,r){return this==kt||e.maps.length==0?this:this.mapInner(e,t,0,0,r||ei)}mapInner(e,t,r,i,s){let a;for(let u=0;u<this.local.length;u++){let d=this.local[u].map(e,r,i);d&&d.type.valid(t,d)?(a||(a=[])).push(d):s.onRemove&&s.onRemove(this.local[u].spec)}return this.children.length?TS(this.children,a||[],e,t,r,i,s):a?new Fe(a.sort(ti),Fi):kt}add(e,t){return t.length?this==kt?Fe.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let i,s=0;e.forEach((u,d)=>{let f=d+r,p;if(p=l1(t,u,f)){for(i||(i=this.children.slice());s<i.length&&i[s]<d;)s+=3;i[s]==d?i[s+2]=i[s+2].addInner(u,p,f+1):i.splice(s,0,d,d+u.nodeSize,sa(p,u,f+1,ei)),s+=3}});let a=s1(s?a1(t):t,-r);for(let u=0;u<a.length;u++)a[u].type.valid(e,a[u])||a.splice(u--,1);return new Fe(a.length?this.local.concat(a).sort(ti):this.local,i||this.children)}remove(e){return e.length==0||this==kt?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let a,u=r[s]+t,d=r[s+1]+t;for(let p=0,g;p<e.length;p++)(g=e[p])&&g.from>u&&g.to<d&&(e[p]=null,(a||(a=[])).push(g));if(!a)continue;r==this.children&&(r=this.children.slice());let f=r[s+2].removeInner(a,u+1);f!=kt?r[s+2]=f:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,a;s<e.length;s++)if(a=e[s])for(let u=0;u<i.length;u++)i[u].eq(a,t)&&(i==this.local&&(i=this.local.slice()),i.splice(u--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new Fe(i,r):kt}forChild(e,t){if(this==kt)return this;if(t.isLeaf)return Fe.empty;let r,i;for(let u=0;u<this.children.length;u+=3)if(this.children[u]>=e){this.children[u]==e&&(r=this.children[u+2]);break}let s=e+1,a=s+t.content.size;for(let u=0;u<this.local.length;u++){let d=this.local[u];if(d.from<a&&d.to>s&&d.type instanceof Mr){let f=Math.max(s,d.from)-s,p=Math.min(a,d.to)-s;f<p&&(i||(i=[])).push(d.copy(f,p))}}if(i){let u=new Fe(i.sort(ti),Fi);return r?new gr([u,r]):u}return r||kt}eq(e){if(this==e)return!0;if(!(e instanceof Fe)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return Of(this.localsInner(e))}localsInner(e){if(this==kt)return Fi;if(e.inlineContent||!this.local.some(Mr.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Mr||t.push(this.local[r]);return t}forEachSet(e){e(this)}}Fe.empty=new Fe([],[]);Fe.removeOverlap=Of;const kt=Fe.empty;class gr{constructor(e){this.members=e}map(e,t){const r=this.members.map(i=>i.map(e,t,ei));return gr.from(r)}forChild(e,t){if(t.isLeaf)return Fe.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,t);s!=kt&&(s instanceof gr?r=r.concat(s.members):r.push(s))}return gr.from(r)}eq(e){if(!(e instanceof gr)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!t)t=s;else{r&&(t=t.slice(),r=!1);for(let a=0;a<s.length;a++)t.push(s[a])}}return t?Of(r?t:t.sort(ti)):Fi}static from(e){switch(e.length){case 0:return kt;case 1:return e[0];default:return new gr(e.every(t=>t instanceof Fe)?e:e.reduce((t,r)=>t.concat(r instanceof Fe?r:r.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function TS(n,e,t,r,i,s,a){let u=n.slice();for(let f=0,p=s;f<t.maps.length;f++){let g=0;t.maps[f].forEach((v,x,k,S)=>{let C=S-k-(x-v);for(let M=0;M<u.length;M+=3){let P=u[M+1];if(P<0||v>P+p-g)continue;let I=u[M]+p-g;x>=I?u[M+1]=v<=I?-2:-1:v>=p&&C&&(u[M]+=C,u[M+1]+=C)}g+=C}),p=t.maps[f].map(p,-1)}let d=!1;for(let f=0;f<u.length;f+=3)if(u[f+1]<0){if(u[f+1]==-2){d=!0,u[f+1]=-1;continue}let p=t.map(n[f]+s),g=p-i;if(g<0||g>=r.content.size){d=!0;continue}let v=t.map(n[f+1]+s,-1),x=v-i,{index:k,offset:S}=r.content.findIndex(g),C=r.maybeChild(k);if(C&&S==g&&S+C.nodeSize==x){let M=u[f+2].mapInner(t,C,p+1,n[f]+s+1,a);M!=kt?(u[f]=g,u[f+1]=x,u[f+2]=M):(u[f+1]=-2,d=!0)}else d=!0}if(d){let f=AS(u,n,e,t,i,s,a),p=sa(f,r,0,a);e=p.local;for(let g=0;g<u.length;g+=3)u[g+1]<0&&(u.splice(g,3),g-=3);for(let g=0,v=0;g<p.children.length;g+=3){let x=p.children[g];for(;v<u.length&&u[v]<x;)v+=3;u.splice(v,0,p.children[g],p.children[g+1],p.children[g+2])}}return new Fe(e.sort(ti),u)}function s1(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let i=n[r];t.push(new St(i.from+e,i.to+e,i.type))}return t}function AS(n,e,t,r,i,s,a){function u(d,f){for(let p=0;p<d.local.length;p++){let g=d.local[p].map(r,i,f);g?t.push(g):a.onRemove&&a.onRemove(d.local[p].spec)}for(let p=0;p<d.children.length;p+=3)u(d.children[p+2],d.children[p]+f+1)}for(let d=0;d<n.length;d+=3)n[d+1]==-1&&u(n[d+2],e[d]+s+1);return t}function l1(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,i=null;for(let s=0,a;s<n.length;s++)(a=n[s])&&a.from>t&&a.to<r&&((i||(i=[])).push(a),n[s]=null);return i}function a1(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function sa(n,e,t,r){let i=[],s=!1;e.forEach((u,d)=>{let f=l1(n,u,d+t);if(f){s=!0;let p=sa(f,u,t+d+1,r);p!=kt&&i.push(d,d+u.nodeSize,p)}});let a=s1(s?a1(n):n,-t).sort(ti);for(let u=0;u<a.length;u++)a[u].type.valid(e,a[u])||(r.onRemove&&r.onRemove(a[u].spec),a.splice(u--,1));return a.length||i.length?new Fe(a,i):kt}function ti(n,e){return n.from-e.from||n.to-e.to}function Of(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let i=t+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==n&&(e=n.slice()),e[i]=s.copy(s.from,r.to),Gg(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,s.from),Gg(e,i,r.copy(s.from,r.to)));break}}}return e}function Gg(n,e,t){for(;e<n.length&&ti(t,n[e])>0;)e++;n.splice(e,0,t)}function cd(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=kt&&e.push(r)}),n.cursorWrapper&&e.push(Fe.create(n.state.doc,[n.cursorWrapper.deco])),gr.from(e)}const OS={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},RS=Bt&&br<=11;class DS{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class PS{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new DS,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Bt&&br<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),RS&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,OS)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Hg(this.view)){if(this.suppressingSelectionUpdates)return Wn(this.view);if(Bt&&br<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&oi(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let s=e.focusNode;s;s=Wi(s))t.add(s);for(let s=e.anchorNode;s;s=Wi(s))if(t.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&Hg(e)&&!this.ignoreSelectionChange(r),s=-1,a=-1,u=!1,d=[];if(e.editable)for(let p=0;p<t.length;p++){let g=this.registerMutation(t[p],d);g&&(s=s<0?g.from:Math.min(g.from,s),a=a<0?g.to:Math.max(g.to,a),g.typeOver&&(u=!0))}if(mn&&d.length){let p=d.filter(g=>g.nodeName=="BR");if(p.length==2){let[g,v]=p;g.parentNode&&g.parentNode.parentNode==v.parentNode?v.remove():g.remove()}else{let{focusNode:g}=this.currentSelection;for(let v of p){let x=v.parentNode;x&&x.nodeName=="LI"&&(!g||zS(e,g)!=x)&&v.remove()}}}let f=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&$a(r)&&(f=Cf(e))&&f.eq(le.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Wn(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,a),LS(e)),this.handleDOMChange(s,a,u,d),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Wn(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let p=0;p<e.addedNodes.length;p++){let g=e.addedNodes[p];t.push(g),g.nodeType==3&&(this.lastChangedTextNode=g)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(Bt&&br<=11&&e.addedNodes.length)for(let p=0;p<e.addedNodes.length;p++){let{previousSibling:g,nextSibling:v}=e.addedNodes[p];(!g||Array.prototype.indexOf.call(e.addedNodes,g)<0)&&(i=g),(!v||Array.prototype.indexOf.call(e.addedNodes,v)<0)&&(s=v)}let a=i&&i.parentNode==e.target?ht(i)+1:0,u=r.localPosFromDOM(e.target,a,-1),d=s&&s.parentNode==e.target?ht(s):e.target.childNodes.length,f=r.localPosFromDOM(e.target,d,1);return{from:u,to:f}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Qg=new WeakMap,Yg=!1;function LS(n){if(!Qg.has(n)&&(Qg.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=mn,Yg)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Yg=!0}}function Xg(n,e){let t=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,a=n.domAtPos(n.state.selection.anchor);return oi(a.node,a.offset,i,s)&&([t,r,i,s]=[i,s,t,r]),{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:s}}function IS(n,e){if(e.getComposedRanges){let i=e.getComposedRanges(n.root)[0];if(i)return Xg(n,i)}let t;function r(i){i.preventDefault(),i.stopImmediatePropagation(),t=i.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",r,!0),t?Xg(n,t):null}function zS(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let r=n.docView.nearestDesc(t,!0);if(r&&r.node.isBlock)return t}return null}function jS(n,e,t){let{node:r,fromOffset:i,toOffset:s,from:a,to:u}=n.docView.parseRange(e,t),d=n.domSelectionRange(),f,p=d.anchorNode;if(p&&n.dom.contains(p.nodeType==1?p:p.parentNode)&&(f=[{node:p,offset:d.anchorOffset}],$a(d)||f.push({node:d.focusNode,offset:d.focusOffset})),wt&&n.input.lastKeyCode===8)for(let C=s;C>i;C--){let M=r.childNodes[C-1],P=M.pmViewDesc;if(M.nodeName=="BR"&&!P){s=C;break}if(!P||P.size)break}let g=n.state.doc,v=n.someProp("domParser")||Cr.fromSchema(n.state.schema),x=g.resolve(a),k=null,S=v.parse(r,{topNode:x.parent,topMatch:x.parent.contentMatchAt(x.index()),topOpen:!0,from:i,to:s,preserveWhitespace:x.parent.type.whitespace=="pre"?"full":!0,findPositions:f,ruleFromNode:FS,context:x});if(f&&f[0].pos!=null){let C=f[0].pos,M=f[1]&&f[1].pos;M==null&&(M=C),k={anchor:C+a,head:M+a}}return{doc:S,sel:k,from:a,to:u}}function FS(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(At&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||At&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const BS=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function _S(n,e,t,r,i){let s=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let ue=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,te=Cf(n,ue);if(te&&!n.state.selection.eq(te)){if(wt&&Vn&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",Ce=>Ce(n,Kr(13,"Enter"))))return;let ye=n.state.tr.setSelection(te);ue=="pointer"?ye.setMeta("pointer",!0):ue=="key"&&ye.scrollIntoView(),s&&ye.setMeta("composition",s),n.dispatch(ye)}return}let a=n.state.doc.resolve(e),u=a.sharedDepth(t);e=a.before(u+1),t=n.state.doc.resolve(t).after(u+1);let d=n.state.selection,f=jS(n,e,t),p=n.state.doc,g=p.slice(f.from,f.to),v,x;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(v=n.state.selection.to,x="end"):(v=n.state.selection.from,x="start"),n.input.lastKeyCode=null;let k=VS(g.content,f.doc.content,f.from,v,x);if(k&&n.input.domChangeCount++,(Ki&&n.input.lastIOSEnter>Date.now()-225||Vn)&&i.some(ue=>ue.nodeType==1&&!BS.test(ue.nodeName))&&(!k||k.endA>=k.endB)&&n.someProp("handleKeyDown",ue=>ue(n,Kr(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!k)if(r&&d instanceof re&&!d.empty&&d.$head.sameParent(d.$anchor)&&!n.composing&&!(f.sel&&f.sel.anchor!=f.sel.head))k={start:d.from,endA:d.to,endB:d.to};else{if(f.sel){let ue=Zg(n,n.state.doc,f.sel);if(ue&&!ue.eq(n.state.selection)){let te=n.state.tr.setSelection(ue);s&&te.setMeta("composition",s),n.dispatch(te)}}return}n.state.selection.from<n.state.selection.to&&k.start==k.endB&&n.state.selection instanceof re&&(k.start>n.state.selection.from&&k.start<=n.state.selection.from+2&&n.state.selection.from>=f.from?k.start=n.state.selection.from:k.endA<n.state.selection.to&&k.endA>=n.state.selection.to-2&&n.state.selection.to<=f.to&&(k.endB+=n.state.selection.to-k.endA,k.endA=n.state.selection.to)),Bt&&br<=11&&k.endB==k.start+1&&k.endA==k.start&&k.start>f.from&&f.doc.textBetween(k.start-f.from-1,k.start-f.from+1)==" "&&(k.start--,k.endA--,k.endB--);let S=f.doc.resolveNoCache(k.start-f.from),C=f.doc.resolveNoCache(k.endB-f.from),M=p.resolve(k.start),P=S.sameParent(C)&&S.parent.inlineContent&&M.end()>=k.endA,I;if((Ki&&n.input.lastIOSEnter>Date.now()-225&&(!P||i.some(ue=>ue.nodeName=="DIV"||ue.nodeName=="P"))||!P&&S.pos<f.doc.content.size&&(!S.sameParent(C)||!S.parent.inlineContent)&&!/\S/.test(f.doc.textBetween(S.pos,C.pos,"",""))&&(I=le.findFrom(f.doc.resolve(S.pos+1),1,!0))&&I.head>S.pos)&&n.someProp("handleKeyDown",ue=>ue(n,Kr(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>k.start&&$S(p,k.start,k.endA,S,C)&&n.someProp("handleKeyDown",ue=>ue(n,Kr(8,"Backspace")))){Vn&&wt&&n.domObserver.suppressSelectionUpdates();return}wt&&k.endB==k.start&&(n.input.lastChromeDelete=Date.now()),Vn&&!P&&S.start()!=C.start()&&C.parentOffset==0&&S.depth==C.depth&&f.sel&&f.sel.anchor==f.sel.head&&f.sel.head==k.endA&&(k.endB-=2,C=f.doc.resolveNoCache(k.endB-f.from),setTimeout(()=>{n.someProp("handleKeyDown",function(ue){return ue(n,Kr(13,"Enter"))})},20));let V=k.start,B=k.endA,K,se,de;if(P){if(S.pos==C.pos)Bt&&br<=11&&S.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>Wn(n),20)),K=n.state.tr.delete(V,B),se=p.resolve(k.start).marksAcross(p.resolve(k.endA));else if(k.endA==k.endB&&(de=HS(S.parent.content.cut(S.parentOffset,C.parentOffset),M.parent.content.cut(M.parentOffset,k.endA-M.start()))))K=n.state.tr,de.type=="add"?K.addMark(V,B,de.mark):K.removeMark(V,B,de.mark);else if(S.parent.child(S.index()).isText&&S.index()==C.index()-(C.textOffset?0:1)){let ue=S.parent.textBetween(S.parentOffset,C.parentOffset);if(n.someProp("handleTextInput",te=>te(n,V,B,ue)))return;K=n.state.tr.insertText(ue,V,B)}}if(K||(K=n.state.tr.replace(V,B,f.doc.slice(k.start-f.from,k.endB-f.from))),f.sel){let ue=Zg(n,K.doc,f.sel);ue&&!(wt&&n.composing&&ue.empty&&(k.start!=k.endB||n.input.lastChromeDelete<Date.now()-100)&&(ue.head==V||ue.head==K.mapping.map(B)-1)||Bt&&ue.empty&&ue.head==V)&&K.setSelection(ue)}se&&K.ensureMarks(se),s&&K.setMeta("composition",s),n.dispatch(K.scrollIntoView())}function Zg(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:bf(n,e.resolve(t.anchor),e.resolve(t.head))}function HS(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,i=t,s=r,a,u,d;for(let p=0;p<r.length;p++)i=r[p].removeFromSet(i);for(let p=0;p<t.length;p++)s=t[p].removeFromSet(s);if(i.length==1&&s.length==0)u=i[0],a="add",d=p=>p.mark(u.addToSet(p.marks));else if(i.length==0&&s.length==1)u=s[0],a="remove",d=p=>p.mark(u.removeFromSet(p.marks));else return null;let f=[];for(let p=0;p<e.childCount;p++)f.push(d(e.child(p)));if(L.from(f).eq(n))return{mark:u,type:a}}function $S(n,e,t,r,i){if(t-e<=i.pos-r.pos||dd(r,!0,!1)<i.pos)return!1;let s=n.resolve(e);if(!r.parent.isTextblock){let u=s.nodeAfter;return u!=null&&t==e+u.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let a=n.resolve(dd(s,!0,!0));return!a.parent.isTextblock||a.pos>t||dd(a,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(a.parent.content)}function dd(n,e,t){let r=n.depth,i=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,i++,e=!1;if(t){let s=n.node(r).maybeChild(n.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function VS(n,e,t,r,i){let s=n.findDiffStart(e,t);if(s==null)return null;let{a,b:u}=n.findDiffEnd(e,t+n.size,t+e.size);if(i=="end"){let d=Math.max(0,s-Math.min(a,u));r-=a+d-s}if(a<s&&n.size<e.size){let d=r<=s&&r>=a?s-r:0;s-=d,s&&s<e.size&&e0(e.textBetween(s-1,s+1))&&(s+=d?1:-1),u=s+(u-a),a=s}else if(u<s){let d=r<=s&&r>=u?s-r:0;s-=d,s&&s<n.size&&e0(n.textBetween(s-1,s+1))&&(s+=d?1:-1),a=s+(a-u),u=s}return{start:s,endA:a,endB:u}}function e0(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class US{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new aS,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(o0),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=r0(this),n0(this),this.nodeViews=i0(this),this.docView=Ig(this.state.doc,t0(this),cd(this),this.dom,this),this.domObserver=new PS(this,(r,i,s,a)=>_S(this,r,i,s,a)),this.domObserver.start(),uS(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Ud(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(o0),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var r;let i=this.state,s=!1,a=!1;e.storedMarks&&this.composing&&(n1(this),a=!0),this.state=e;let u=i.plugins!=e.plugins||this._props.plugins!=t.plugins;if(u||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let x=i0(this);KS(x,this.nodeViews)&&(this.nodeViews=x,s=!0)}(u||t.handleDOMEvents!=this._props.handleDOMEvents)&&Ud(this),this.editable=r0(this),n0(this);let d=cd(this),f=t0(this),p=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",g=s||!this.docView.matchesNode(e.doc,f,d);(g||!e.selection.eq(i.selection))&&(a=!0);let v=p=="preserve"&&a&&this.dom.style.overflowAnchor==null&&Cw(this);if(a){this.domObserver.stop();let x=g&&(Bt||wt)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&WS(i.selection,e.selection);if(g){let k=wt?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=SS(this)),(s||!this.docView.update(e.doc,f,d,this))&&(this.docView.updateOuterDeco(f),this.docView.destroy(),this.docView=Ig(e.doc,f,d,this.dom,this)),k&&!this.trackWrites&&(x=!0)}x||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&qw(this))?Wn(this,x):(Uy(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),p=="reset"?this.dom.scrollTop=0:p=="to selection"?this.scrollToSelection():v&&bw(v)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof ne){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&Ag(this,t.getBoundingClientRect(),e)}else Ag(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}updateDraggedNode(e,t){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-t.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new i1(e.slice,e.move,i<0?void 0:ne.create(this.state.doc,i))}someProp(e,t){let r=this._props&&this._props[e],i;if(r!=null&&(i=t?t(r):r))return i;for(let a=0;a<this.directPlugins.length;a++){let u=this.directPlugins[a].props[e];if(u!=null&&(i=t?t(u):u))return i}let s=this.state.plugins;if(s)for(let a=0;a<s.length;a++){let u=s[a].props[e];if(u!=null&&(i=t?t(u):u))return i}}hasFocus(){if(Bt){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Ew(this.dom),Wn(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return Ow(this,e)}coordsAtPos(e,t=1){return zy(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let i=this.docView.posFromDOM(e,t,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,t){return Iw(this,t||this.state,e)}pasteHTML(e,t){return ss(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return ss(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return Ef(this,e)}destroy(){this.docView&&(cS(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],cd(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,fw())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return fS(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?At&&this.root.nodeType===11&&yw(this.dom.ownerDocument)==this.dom&&IS(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function t0(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"?e.class+=" "+t[r]:r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),e.translate||(e.translate="no"),[St.node(0,n.state.doc.content.size,e)]}function n0(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:St.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function r0(n){return!n.someProp("editable",e=>e(n.state)===!1)}function WS(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function i0(n){let e=Object.create(null);function t(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function KS(n,e){let t=0,r=0;for(let i in n){if(n[i]!=e[i])return!0;t++}for(let i in e)r++;return t!=r}function o0(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Nr={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},la={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},qS=typeof navigator<"u"&&/Mac/.test(navigator.platform),JS=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var pt=0;pt<10;pt++)Nr[48+pt]=Nr[96+pt]=String(pt);for(var pt=1;pt<=24;pt++)Nr[pt+111]="F"+pt;for(var pt=65;pt<=90;pt++)Nr[pt]=String.fromCharCode(pt+32),la[pt]=String.fromCharCode(pt);for(var fd in Nr)la.hasOwnProperty(fd)||(la[fd]=Nr[fd]);function GS(n){var e=qS&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||JS&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?la:Nr)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const QS=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),YS=typeof navigator<"u"&&/Win/.test(navigator.platform);function XS(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,i,s,a;for(let u=0;u<e.length-1;u++){let d=e[u];if(/^(cmd|meta|m)$/i.test(d))a=!0;else if(/^a(lt)?$/i.test(d))r=!0;else if(/^(c|ctrl|control)$/i.test(d))i=!0;else if(/^s(hift)?$/i.test(d))s=!0;else if(/^mod$/i.test(d))QS?a=!0:i=!0;else throw new Error("Unrecognized modifier name: "+d)}return r&&(t="Alt-"+t),i&&(t="Ctrl-"+t),a&&(t="Meta-"+t),s&&(t="Shift-"+t),t}function ZS(n){let e=Object.create(null);for(let t in n)e[XS(t)]=n[t];return e}function hd(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function eC(n){return new Ge({props:{handleKeyDown:Rf(n)}})}function Rf(n){let e=ZS(n);return function(t,r){let i=GS(r),s,a=e[hd(i,r)];if(a&&a(t.state,t.dispatch,t))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let u=e[hd(i,r,!1)];if(u&&u(t.state,t.dispatch,t))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(YS&&r.ctrlKey&&r.altKey)&&(s=Nr[r.keyCode])&&s!=i){let u=e[hd(s,r)];if(u&&u(t.state,t.dispatch,t))return!0}}return!1}}const Df=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function u1(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const c1=(n,e,t)=>{let r=u1(n,t);if(!r)return!1;let i=Pf(r);if(!i){let a=r.blockRange(),u=a&&Gi(a);return u==null?!1:(e&&e(n.tr.lift(a,u).scrollIntoView()),!0)}let s=i.nodeBefore;if(x1(n,i,e,-1))return!0;if(r.parent.content.size==0&&(qi(s,"end")||ne.isSelectable(s)))for(let a=r.depth;;a--){let u=_a(n.doc,r.before(a),r.after(a),U.empty);if(u&&u.slice.size<u.to-u.from){if(e){let d=n.tr.step(u);d.setSelection(qi(s,"end")?le.findFrom(d.doc.resolve(d.mapping.map(i.pos,-1)),-1):ne.create(d.doc,i.pos-s.nodeSize)),e(d.scrollIntoView())}return!0}if(a==1||r.node(a-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},tC=(n,e,t)=>{let r=u1(n,t);if(!r)return!1;let i=Pf(r);return i?d1(n,i,e):!1},nC=(n,e,t)=>{let r=h1(n,t);if(!r)return!1;let i=Lf(r);return i?d1(n,i,e):!1};function d1(n,e,t){let r=e.nodeBefore,i=r,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let p=i.lastChild;if(!p)return!1;i=p}let a=e.nodeAfter,u=a,d=e.pos+1;for(;!u.isTextblock;d++){if(u.type.spec.isolating)return!1;let p=u.firstChild;if(!p)return!1;u=p}let f=_a(n.doc,s,d,U.empty);if(!f||f.from!=s||f instanceof ot&&f.slice.size>=d-s)return!1;if(t){let p=n.tr.step(f);p.setSelection(re.create(p.doc,s)),t(p.scrollIntoView())}return!0}function qi(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const f1=(n,e,t)=>{let{$head:r,empty:i}=n.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;s=Pf(r)}let a=s&&s.nodeBefore;return!a||!ne.isSelectable(a)?!1:(e&&e(n.tr.setSelection(ne.create(n.doc,s.pos-a.nodeSize)).scrollIntoView()),!0)};function Pf(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function h1(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const p1=(n,e,t)=>{let r=h1(n,t);if(!r)return!1;let i=Lf(r);if(!i)return!1;let s=i.nodeAfter;if(x1(n,i,e,1))return!0;if(r.parent.content.size==0&&(qi(s,"start")||ne.isSelectable(s))){let a=_a(n.doc,r.before(),r.after(),U.empty);if(a&&a.slice.size<a.to-a.from){if(e){let u=n.tr.step(a);u.setSelection(qi(s,"start")?le.findFrom(u.doc.resolve(u.mapping.map(i.pos)),1):ne.create(u.doc,u.mapping.map(i.pos))),e(u.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},m1=(n,e,t)=>{let{$head:r,empty:i}=n.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;s=Lf(r)}let a=s&&s.nodeAfter;return!a||!ne.isSelectable(a)?!1:(e&&e(n.tr.setSelection(ne.create(n.doc,s.pos)).scrollIntoView()),!0)};function Lf(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const rC=(n,e)=>{let t=n.selection,r=t instanceof ne,i;if(r){if(t.node.isTextblock||!Ar(n.doc,t.from))return!1;i=t.from}else if(i=Ba(n.doc,t.from,-1),i==null)return!1;if(e){let s=n.tr.join(i);r&&s.setSelection(ne.create(s.doc,i-n.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},iC=(n,e)=>{let t=n.selection,r;if(t instanceof ne){if(t.node.isTextblock||!Ar(n.doc,t.to))return!1;r=t.to}else if(r=Ba(n.doc,t.to,1),r==null)return!1;return e&&e(n.tr.join(r).scrollIntoView()),!0},oC=(n,e)=>{let{$from:t,$to:r}=n.selection,i=t.blockRange(r),s=i&&Gi(i);return s==null?!1:(e&&e(n.tr.lift(i,s).scrollIntoView()),!0)},g1=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function If(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const sC=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let i=t.node(-1),s=t.indexAfter(-1),a=If(i.contentMatchAt(s));if(!a||!i.canReplaceWith(s,s,a))return!1;if(e){let u=t.after(),d=n.tr.replaceWith(u,u,a.createAndFill());d.setSelection(le.near(d.doc.resolve(u),1)),e(d.scrollIntoView())}return!0},y1=(n,e)=>{let t=n.selection,{$from:r,$to:i}=t;if(t instanceof qt||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=If(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let a=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,u=n.tr.insert(a,s.createAndFill());u.setSelection(re.create(u.doc,a+1)),e(u.scrollIntoView())}return!0},v1=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let s=t.before();if(Un(n.doc,s))return e&&e(n.tr.split(s).scrollIntoView()),!0}let r=t.blockRange(),i=r&&Gi(r);return i==null?!1:(e&&e(n.tr.lift(r,i).scrollIntoView()),!0)};function lC(n){return(e,t)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof ne&&e.selection.node.isBlock)return!r.parentOffset||!Un(e.doc,r.pos)?!1:(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],a,u,d=!1,f=!1;for(let x=r.depth;;x--)if(r.node(x).isBlock){d=r.end(x)==r.pos+(r.depth-x),f=r.start(x)==r.pos-(r.depth-x),u=If(r.node(x-1).contentMatchAt(r.indexAfter(x-1))),s.unshift(d&&u?{type:u}:null),a=x;break}else{if(x==1)return!1;s.unshift(null)}let p=e.tr;(e.selection instanceof re||e.selection instanceof qt)&&p.deleteSelection();let g=p.mapping.map(r.pos),v=Un(p.doc,g,s.length,s);if(v||(s[0]=u?{type:u}:null,v=Un(p.doc,g,s.length,s)),!v)return!1;if(p.split(g,s.length,s),!d&&f&&r.node(a).type!=u){let x=p.mapping.map(r.before(a)),k=p.doc.resolve(x);u&&r.node(a-1).canReplaceWith(k.index(),k.index()+1,u)&&p.setNodeMarkup(p.mapping.map(r.before(a)),u)}return t&&t(p.scrollIntoView()),!0}}const aC=lC(),uC=(n,e)=>{let{$from:t,to:r}=n.selection,i,s=t.sharedDepth(r);return s==0?!1:(i=t.before(s),e&&e(n.tr.setSelection(ne.create(n.doc,i))),!0)};function cC(n,e,t){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||Ar(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function x1(n,e,t,r){let i=e.nodeBefore,s=e.nodeAfter,a,u,d=i.type.spec.isolating||s.type.spec.isolating;if(!d&&cC(n,e,t))return!0;let f=!d&&e.parent.canReplace(e.index(),e.index()+1);if(f&&(a=(u=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&u.matchType(a[0]||s.type).validEnd){if(t){let x=e.pos+s.nodeSize,k=L.empty;for(let M=a.length-1;M>=0;M--)k=L.from(a[M].create(null,k));k=L.from(i.copy(k));let S=n.tr.step(new st(e.pos-1,x,e.pos,x,new U(k,1,0),a.length,!0)),C=S.doc.resolve(x+2*a.length);C.nodeAfter&&C.nodeAfter.type==i.type&&Ar(S.doc,C.pos)&&S.join(C.pos),t(S.scrollIntoView())}return!0}let p=s.type.spec.isolating||r>0&&d?null:le.findFrom(e,1),g=p&&p.$from.blockRange(p.$to),v=g&&Gi(g);if(v!=null&&v>=e.depth)return t&&t(n.tr.lift(g,v).scrollIntoView()),!0;if(f&&qi(s,"start",!0)&&qi(i,"end")){let x=i,k=[];for(;k.push(x),!x.isTextblock;)x=x.lastChild;let S=s,C=1;for(;!S.isTextblock;S=S.firstChild)C++;if(x.canReplace(x.childCount,x.childCount,S.content)){if(t){let M=L.empty;for(let I=k.length-1;I>=0;I--)M=L.from(k[I].copy(M));let P=n.tr.step(new st(e.pos-k.length,e.pos+s.nodeSize,e.pos+C,e.pos+s.nodeSize-C,new U(M,k.length,0),0,!0));t(P.scrollIntoView())}return!0}}return!1}function k1(n){return function(e,t){let r=e.selection,i=n<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(t&&t(e.tr.setSelection(re.create(e.doc,n<0?i.start(s):i.end(s)))),!0):!1}}const dC=k1(-1),fC=k1(1);function hC(n,e=null){return function(t,r){let{$from:i,$to:s}=t.selection,a=i.blockRange(s),u=a&&xf(a,n,e);return u?(r&&r(t.tr.wrap(a,u).scrollIntoView()),!0):!1}}function s0(n,e=null){return function(t,r){let i=!1;for(let s=0;s<t.selection.ranges.length&&!i;s++){let{$from:{pos:a},$to:{pos:u}}=t.selection.ranges[s];t.doc.nodesBetween(a,u,(d,f)=>{if(i)return!1;if(!(!d.isTextblock||d.hasMarkup(n,e)))if(d.type==n)i=!0;else{let p=t.doc.resolve(f),g=p.index();i=p.parent.canReplaceWith(g,g+1,n)}})}if(!i)return!1;if(r){let s=t.tr;for(let a=0;a<t.selection.ranges.length;a++){let{$from:{pos:u},$to:{pos:d}}=t.selection.ranges[a];s.setBlockType(u,d,n,e)}r(s.scrollIntoView())}return!0}}function zf(...n){return function(e,t,r){for(let i=0;i<n.length;i++)if(n[i](e,t,r))return!0;return!1}}zf(Df,c1,f1);zf(Df,p1,m1);zf(g1,y1,v1,aC);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function pC(n,e=null){return function(t,r){let{$from:i,$to:s}=t.selection,a=i.blockRange(s);if(!a)return!1;let u=r?t.tr:null;return mC(u,a,n,e)?(r&&r(u.scrollIntoView()),!0):!1}}function mC(n,e,t,r=null){let i=!1,s=e,a=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let d=a.resolve(e.start-2);s=new ea(d,d,e.depth),e.endIndex<e.parent.childCount&&(e=new ea(e.$from,a.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let u=xf(s,t,r,e);return u?(n&&gC(n,e,u,i,t),!0):!1}function gC(n,e,t,r,i){let s=L.empty;for(let p=t.length-1;p>=0;p--)s=L.from(t[p].type.create(t[p].attrs,s));n.step(new st(e.start-(r?2:0),e.end,e.start,e.end,new U(s,0,0),t.length,!0));let a=0;for(let p=0;p<t.length;p++)t[p].type==i&&(a=p+1);let u=t.length-a,d=e.start+t.length-(r?2:0),f=e.parent;for(let p=e.startIndex,g=e.endIndex,v=!0;p<g;p++,v=!1)!v&&Un(n.doc,d,u)&&(n.split(d,u),d+=2*u),d+=f.child(p).nodeSize;return n}function yC(n){return function(e,t){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,a=>a.childCount>0&&a.firstChild.type==n);return s?t?r.node(s.depth-1).type==n?vC(e,t,n,s):xC(e,t,s):!0:!1}}function vC(n,e,t,r){let i=n.tr,s=r.end,a=r.$to.end(r.depth);s<a&&(i.step(new st(s-1,a,s,a,new U(L.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new ea(i.doc.resolve(r.$from.pos),i.doc.resolve(a),r.depth));const u=Gi(r);if(u==null)return!1;i.lift(r,u);let d=i.doc.resolve(i.mapping.map(s,-1)-1);return Ar(i.doc,d.pos)&&d.nodeBefore.type==d.nodeAfter.type&&i.join(d.pos),e(i.scrollIntoView()),!0}function xC(n,e,t){let r=n.tr,i=t.parent;for(let x=t.end,k=t.endIndex-1,S=t.startIndex;k>S;k--)x-=i.child(k).nodeSize,r.delete(x-1,x+1);let s=r.doc.resolve(t.start),a=s.nodeAfter;if(r.mapping.map(t.end)!=t.start+s.nodeAfter.nodeSize)return!1;let u=t.startIndex==0,d=t.endIndex==i.childCount,f=s.node(-1),p=s.index(-1);if(!f.canReplace(p+(u?0:1),p+1,a.content.append(d?L.empty:L.from(i))))return!1;let g=s.pos,v=g+a.nodeSize;return r.step(new st(g-(u?1:0),v+(d?1:0),g+1,v-1,new U((u?L.empty:L.from(i.copy(L.empty))).append(d?L.empty:L.from(i.copy(L.empty))),u?0:1,d?0:1),u?0:1)),e(r.scrollIntoView()),!0}function kC(n){return function(e,t){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,f=>f.childCount>0&&f.firstChild.type==n);if(!s)return!1;let a=s.startIndex;if(a==0)return!1;let u=s.parent,d=u.child(a-1);if(d.type!=n)return!1;if(t){let f=d.lastChild&&d.lastChild.type==u.type,p=L.from(f?n.create():null),g=new U(L.from(n.create(null,L.from(u.type.create(null,p)))),f?3:1,0),v=s.start,x=s.end;t(e.tr.step(new st(v-(f?3:1),x,v,x,g,1,!0)).scrollIntoView())}return!0}}function Wa(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:i}=t,{storedMarks:s}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=t.selection,i=t.doc,s=t.storedMarks,t}}}class Ka{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:i}=t,{tr:s}=r,a=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([u,d])=>[u,(...p)=>{const g=d(...p)(a);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),g}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:a}=i,u=[],d=!!e,f=e||s.tr,p=()=>(!d&&t&&!f.getMeta("preventDispatch")&&!this.hasCustomState&&a.dispatch(f),u.every(v=>v===!0)),g={...Object.fromEntries(Object.entries(r).map(([v,x])=>[v,(...S)=>{const C=this.buildProps(f,t),M=x(...S)(C);return u.push(M),g}])),run:p};return g}createCan(e){const{rawCommands:t,state:r}=this,i=!1,s=e||r.tr,a=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(t).map(([d,f])=>[d,(...p)=>f(...p)({...a,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:a}=i,u={tr:e,editor:i,view:a,state:Wa({state:s,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([d,f])=>[d,(...p)=>f(...p)(u)]))}};return u}}class wC{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,t)),this}off(e,t){const r=this.callbacks[e];return r&&(t?this.callbacks[e]=r.filter(i=>i!==t):delete this.callbacks[e]),this}once(e,t){const r=(...i)=>{this.off(e,r),t.apply(this,i)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function X(n,e,t){return n.config[e]===void 0&&n.parent?X(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?X(n.parent,e,t):null}):n.config[e]}function qa(n){const e=n.filter(i=>i.type==="extension"),t=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function w1(n){const e=[],{nodeExtensions:t,markExtensions:r}=qa(n),i=[...t,...r],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(a=>{const u={name:a.name,options:a.options,storage:a.storage,extensions:i},d=X(a,"addGlobalAttributes",u);if(!d)return;d().forEach(p=>{p.types.forEach(g=>{Object.entries(p.attributes).forEach(([v,x])=>{e.push({type:g,name:v,attribute:{...s,...x}})})})})}),i.forEach(a=>{const u={name:a.name,options:a.options,storage:a.storage},d=X(a,"addAttributes",u);if(!d)return;const f=d();Object.entries(f).forEach(([p,g])=>{const v={...s,...g};typeof(v==null?void 0:v.default)=="function"&&(v.default=v.default()),v!=null&&v.isRequired&&(v==null?void 0:v.default)===void 0&&delete v.default,e.push({type:a.name,name:p,attribute:v})})}),e}function at(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function Ie(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const u=s?String(s).split(" "):[],d=r[i]?r[i].split(" "):[],f=u.filter(p=>!d.includes(p));r[i]=[...d,...f].join(" ")}else if(i==="style"){const u=s?s.split(";").map(p=>p.trim()).filter(Boolean):[],d=r[i]?r[i].split(";").map(p=>p.trim()).filter(Boolean):[],f=new Map;d.forEach(p=>{const[g,v]=p.split(":").map(x=>x.trim());f.set(g,v)}),u.forEach(p=>{const[g,v]=p.split(":").map(x=>x.trim());f.set(g,v)}),r[i]=Array.from(f.entries()).map(([p,g])=>`${p}: ${g}`).join("; ")}else r[i]=s}),r},{})}function Wd(n,e){return e.filter(t=>t.type===n.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,r)=>Ie(t,r),{})}function S1(n){return typeof n=="function"}function he(n,e=void 0,...t){return S1(n)?e?n.bind(e)(...t):n(...t):n}function SC(n={}){return Object.keys(n).length===0&&n.constructor===Object}function CC(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function l0(n,e){return"style"in n?n:{...n,getAttrs:t=>{const r=n.getAttrs?n.getAttrs(t):n.attrs;if(r===!1)return!1;const i=e.reduce((s,a)=>{const u=a.attribute.parseHTML?a.attribute.parseHTML(t):CC(t.getAttribute(a.name));return u==null?s:{...s,[a.name]:u}},{});return{...r,...i}}}}function a0(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&SC(t)?!1:t!=null))}function bC(n,e){var t;const r=w1(n),{nodeExtensions:i,markExtensions:s}=qa(n),a=(t=i.find(f=>X(f,"topNode")))===null||t===void 0?void 0:t.name,u=Object.fromEntries(i.map(f=>{const p=r.filter(M=>M.type===f.name),g={name:f.name,options:f.options,storage:f.storage,editor:e},v=n.reduce((M,P)=>{const I=X(P,"extendNodeSchema",g);return{...M,...I?I(f):{}}},{}),x=a0({...v,content:he(X(f,"content",g)),marks:he(X(f,"marks",g)),group:he(X(f,"group",g)),inline:he(X(f,"inline",g)),atom:he(X(f,"atom",g)),selectable:he(X(f,"selectable",g)),draggable:he(X(f,"draggable",g)),code:he(X(f,"code",g)),whitespace:he(X(f,"whitespace",g)),linebreakReplacement:he(X(f,"linebreakReplacement",g)),defining:he(X(f,"defining",g)),isolating:he(X(f,"isolating",g)),attrs:Object.fromEntries(p.map(M=>{var P;return[M.name,{default:(P=M==null?void 0:M.attribute)===null||P===void 0?void 0:P.default}]}))}),k=he(X(f,"parseHTML",g));k&&(x.parseDOM=k.map(M=>l0(M,p)));const S=X(f,"renderHTML",g);S&&(x.toDOM=M=>S({node:M,HTMLAttributes:Wd(M,p)}));const C=X(f,"renderText",g);return C&&(x.toText=C),[f.name,x]})),d=Object.fromEntries(s.map(f=>{const p=r.filter(C=>C.type===f.name),g={name:f.name,options:f.options,storage:f.storage,editor:e},v=n.reduce((C,M)=>{const P=X(M,"extendMarkSchema",g);return{...C,...P?P(f):{}}},{}),x=a0({...v,inclusive:he(X(f,"inclusive",g)),excludes:he(X(f,"excludes",g)),group:he(X(f,"group",g)),spanning:he(X(f,"spanning",g)),code:he(X(f,"code",g)),attrs:Object.fromEntries(p.map(C=>{var M;return[C.name,{default:(M=C==null?void 0:C.attribute)===null||M===void 0?void 0:M.default}]}))}),k=he(X(f,"parseHTML",g));k&&(x.parseDOM=k.map(C=>l0(C,p)));const S=X(f,"renderHTML",g);return S&&(x.toDOM=C=>S({mark:C,HTMLAttributes:Wd(C,p)})),[f.name,x]}));return new dy({topNode:a,nodes:u,marks:d})}function pd(n,e){return e.nodes[n]||e.marks[n]||null}function u0(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}function jf(n,e){const t=ui.fromSchema(e).serializeFragment(n),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(t),i.innerHTML}const EC=(n,e=500)=>{let t="";const r=n.parentOffset;return n.parent.nodesBetween(Math.max(0,r-e),r,(i,s,a,u)=>{var d,f;const p=((f=(d=i.type.spec).toText)===null||f===void 0?void 0:f.call(d,{node:i,pos:s,parent:a,index:u}))||i.textContent||"%leaf%";t+=i.isAtom&&!i.isText?p:p.slice(0,Math.max(0,r-s))}),t};function Ff(n){return Object.prototype.toString.call(n)==="[object RegExp]"}class Ja{constructor(e){this.find=e.find,this.handler=e.handler}}const MC=(n,e)=>{if(Ff(e))return e.exec(n);const t=e(n);if(!t)return null;const r=[t.text];return r.index=t.index,r.input=n,r.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(t.replaceWith)),r};function Ol(n){var e;const{editor:t,from:r,to:i,text:s,rules:a,plugin:u}=n,{view:d}=t;if(d.composing)return!1;const f=d.state.doc.resolve(r);if(f.parent.type.spec.code||!((e=f.nodeBefore||f.nodeAfter)===null||e===void 0)&&e.marks.find(v=>v.type.spec.code))return!1;let p=!1;const g=EC(f)+s;return a.forEach(v=>{if(p)return;const x=MC(g,v.find);if(!x)return;const k=d.state.tr,S=Wa({state:d.state,transaction:k}),C={from:r-(x[0].length-s.length),to:i},{commands:M,chain:P,can:I}=new Ka({editor:t,state:S});v.handler({state:S,range:C,match:x,commands:M,chain:P,can:I})===null||!k.steps.length||(k.setMeta(u,{transform:k,from:r,to:i,text:s}),d.dispatch(k),p=!0)}),p}function NC(n){const{editor:e,rules:t}=n,r=new Ge({state:{init(){return null},apply(i,s,a){const u=i.getMeta(r);if(u)return u;const d=i.getMeta("applyInputRules");return!!d&&setTimeout(()=>{let{text:p}=d;typeof p=="string"?p=p:p=jf(L.from(p),a.schema);const{from:g}=d,v=g+p.length;Ol({editor:e,from:g,to:v,text:p,rules:t,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,a,u){return Ol({editor:e,from:s,to:a,text:u,rules:t,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&Ol({editor:e,from:s.pos,to:s.pos,text:"",rules:t,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:a}=i.state.selection;return a?Ol({editor:e,from:a.pos,to:a.pos,text:`
`,rules:t,plugin:r}):!1}},isInputRules:!0});return r}function TC(n){return Object.prototype.toString.call(n).slice(8,-1)}function Rl(n){return TC(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function Ga(n,e){const t={...n};return Rl(n)&&Rl(e)&&Object.keys(e).forEach(r=>{Rl(e[r])&&Rl(n[r])?t[r]=Ga(n[r],e[r]):t[r]=e[r]}),t}class sn{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=he(X(this,"addOptions",{name:this.name}))),this.storage=he(X(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new sn(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>Ga(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new sn(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=he(X(t,"addOptions",{name:t.name})),t.storage=he(X(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const a=i.marks();if(!!!a.find(f=>(f==null?void 0:f.type.name)===t.name))return!1;const d=a.find(f=>(f==null?void 0:f.type.name)===t.name);return d&&r.removeStoredMark(d),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}function AC(n){return typeof n=="number"}class OC{constructor(e){this.find=e.find,this.handler=e.handler}}const RC=(n,e,t)=>{if(Ff(e))return[...n.matchAll(e)];const r=e(n,t);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=n,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function DC(n){const{editor:e,state:t,from:r,to:i,rule:s,pasteEvent:a,dropEvent:u}=n,{commands:d,chain:f,can:p}=new Ka({editor:e,state:t}),g=[];return t.doc.nodesBetween(r,i,(x,k)=>{if(!x.isTextblock||x.type.spec.code)return;const S=Math.max(r,k),C=Math.min(i,k+x.content.size),M=x.textBetween(S-k,C-k,void 0,"");RC(M,s.find,a).forEach(I=>{if(I.index===void 0)return;const V=S+I.index+1,B=V+I[0].length,K={from:t.tr.mapping.map(V),to:t.tr.mapping.map(B)},se=s.handler({state:t,range:K,match:I,commands:d,chain:f,can:p,pasteEvent:a,dropEvent:u});g.push(se)})}),g.every(x=>x!==null)}let Dl=null;const PC=n=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)===null||e===void 0||e.setData("text/html",n),t};function LC(n){const{editor:e,rules:t}=n;let r=null,i=!1,s=!1,a=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,u;try{u=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{u=null}const d=({state:p,from:g,to:v,rule:x,pasteEvt:k})=>{const S=p.tr,C=Wa({state:p,transaction:S});if(!(!DC({editor:e,state:C,from:Math.max(g-1,0),to:v.b-1,rule:x,pasteEvent:k,dropEvent:u})||!S.steps.length)){try{u=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{u=null}return a=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,S}};return t.map(p=>new Ge({view(g){const v=k=>{var S;r=!((S=g.dom.parentElement)===null||S===void 0)&&S.contains(k.target)?g.dom.parentElement:null,r&&(Dl=e)},x=()=>{Dl&&(Dl=null)};return window.addEventListener("dragstart",v),window.addEventListener("dragend",x),{destroy(){window.removeEventListener("dragstart",v),window.removeEventListener("dragend",x)}}},props:{handleDOMEvents:{drop:(g,v)=>{if(s=r===g.dom.parentElement,u=v,!s){const x=Dl;x&&setTimeout(()=>{const k=x.state.selection;k&&x.commands.deleteRange({from:k.from,to:k.to})},10)}return!1},paste:(g,v)=>{var x;const k=(x=v.clipboardData)===null||x===void 0?void 0:x.getData("text/html");return a=v,i=!!(k!=null&&k.includes("data-pm-slice")),!1}}},appendTransaction:(g,v,x)=>{const k=g[0],S=k.getMeta("uiEvent")==="paste"&&!i,C=k.getMeta("uiEvent")==="drop"&&!s,M=k.getMeta("applyPasteRules"),P=!!M;if(!S&&!C&&!P)return;if(P){let{text:B}=M;typeof B=="string"?B=B:B=jf(L.from(B),x.schema);const{from:K}=M,se=K+B.length,de=PC(B);return d({rule:p,state:x,from:K,to:{b:se},pasteEvt:de})}const I=v.doc.content.findDiffStart(x.doc.content),V=v.doc.content.findDiffEnd(x.doc.content);if(!(!AC(I)||!V||I===V.b))return d({rule:p,state:x,from:I,to:V,pasteEvt:a})}}))}function IC(n){const e=n.filter((t,r)=>n.indexOf(t)!==r);return Array.from(new Set(e))}class Hi{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=Hi.resolve(e),this.schema=bC(this.extensions,t),this.setupExtensions()}static resolve(e){const t=Hi.sort(Hi.flatten(e)),r=IC(t.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{const r={name:t.name,options:t.options,storage:t.storage},i=X(t,"addExtensions",r);return i?[t,...this.flatten(i())]:t}).flat(10)}static sort(e){return e.sort((r,i)=>{const s=X(r,"priority")||100,a=X(i,"priority")||100;return s>a?-1:s<a?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const r={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:pd(t.name,this.schema)},i=X(t,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,t=Hi.sort([...this.extensions].reverse()),r=[],i=[],s=t.map(a=>{const u={name:a.name,options:a.options,storage:a.storage,editor:e,type:pd(a.name,this.schema)},d=[],f=X(a,"addKeyboardShortcuts",u);let p={};if(a.type==="mark"&&X(a,"exitable",u)&&(p.ArrowRight=()=>sn.handleExit({editor:e,mark:a})),f){const S=Object.fromEntries(Object.entries(f()).map(([C,M])=>[C,()=>M({editor:e})]));p={...p,...S}}const g=eC(p);d.push(g);const v=X(a,"addInputRules",u);u0(a,e.options.enableInputRules)&&v&&r.push(...v());const x=X(a,"addPasteRules",u);u0(a,e.options.enablePasteRules)&&x&&i.push(...x());const k=X(a,"addProseMirrorPlugins",u);if(k){const S=k();d.push(...S)}return d}).flat();return[NC({editor:e,rules:r}),...LC({editor:e,rules:i}),...s]}get attributes(){return w1(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=qa(this.extensions);return Object.fromEntries(t.filter(r=>!!X(r,"addNodeView")).map(r=>{const i=this.attributes.filter(d=>d.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:e,type:at(r.name,this.schema)},a=X(r,"addNodeView",s);if(!a)return[];const u=(d,f,p,g,v)=>{const x=Wd(d,i);return a()({node:d,view:f,getPos:p,decorations:g,innerDecorations:v,editor:e,extension:r,HTMLAttributes:x})};return[r.name,u]}))}setupExtensions(){this.extensions.forEach(e=>{var t;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:pd(e.name,this.schema)};e.type==="mark"&&(!((t=he(X(e,"keepOnSplit",r)))!==null&&t!==void 0)||t)&&this.splittableMarks.push(e.name);const i=X(e,"onBeforeCreate",r),s=X(e,"onCreate",r),a=X(e,"onUpdate",r),u=X(e,"onSelectionUpdate",r),d=X(e,"onTransaction",r),f=X(e,"onFocus",r),p=X(e,"onBlur",r),g=X(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),a&&this.editor.on("update",a),u&&this.editor.on("selectionUpdate",u),d&&this.editor.on("transaction",d),f&&this.editor.on("focus",f),p&&this.editor.on("blur",p),g&&this.editor.on("destroy",g)})}}class Xe{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=he(X(this,"addOptions",{name:this.name}))),this.storage=he(X(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Xe(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>Ga(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Xe({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=he(X(t,"addOptions",{name:t.name})),t.storage=he(X(t,"addStorage",{name:t.name,options:t.options})),t}}function C1(n,e,t){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:a={}}=t||{};let u="";return n.nodesBetween(r,i,(d,f,p,g)=>{var v;d.isBlock&&f>r&&(u+=s);const x=a==null?void 0:a[d.type.name];if(x)return p&&(u+=x({node:d,pos:f,parent:p,index:g,range:e})),!1;d.isText&&(u+=(v=d==null?void 0:d.text)===null||v===void 0?void 0:v.slice(Math.max(r,f)-f,i-f))}),u}function b1(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}const zC=Xe.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Ge({key:new ut("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:i}=e,{ranges:s}=i,a=Math.min(...s.map(p=>p.$from.pos)),u=Math.max(...s.map(p=>p.$to.pos)),d=b1(t);return C1(r,{from:a,to:u},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:d})}}})]}}),jC=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),FC=(n=!1)=>({commands:e})=>e.setContent("",n),BC=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:i}=r;return t&&i.forEach(({$from:s,$to:a})=>{n.doc.nodesBetween(s.pos,a.pos,(u,d)=>{if(u.type.isText)return;const{doc:f,mapping:p}=e,g=f.resolve(p.map(d)),v=f.resolve(p.map(d+u.nodeSize)),x=g.blockRange(v);if(!x)return;const k=Gi(x);if(u.type.isTextblock){const{defaultType:S}=g.parent.contentMatchAt(g.index());e.setNodeMarkup(x.start,S)}(k||k===0)&&e.lift(x,k)})}),!0},_C=n=>e=>n(e),HC=()=>({state:n,dispatch:e})=>y1(n,e),$C=(n,e)=>({editor:t,tr:r})=>{const{state:i}=t,s=i.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const a=r.mapping.map(e);return r.insert(a,s.content),r.setSelection(new re(r.doc.resolve(a-1))),!0},VC=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const i=n.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const u=i.before(s),d=i.after(s);n.delete(u,d).scrollIntoView()}return!0}return!1},UC=n=>({tr:e,state:t,dispatch:r})=>{const i=at(n,t.schema),s=e.selection.$anchor;for(let a=s.depth;a>0;a-=1)if(s.node(a).type===i){if(r){const d=s.before(a),f=s.after(a);e.delete(d,f).scrollIntoView()}return!0}return!1},WC=n=>({tr:e,dispatch:t})=>{const{from:r,to:i}=n;return t&&e.delete(r,i),!0},KC=()=>({state:n,dispatch:e})=>Df(n,e),qC=()=>({commands:n})=>n.keyboardShortcut("Enter"),JC=()=>({state:n,dispatch:e})=>sC(n,e);function aa(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>t.strict?e[i]===n[i]:Ff(e[i])?e[i].test(n[i]):e[i]===n[i]):!0}function E1(n,e,t={}){return n.find(r=>r.type===e&&aa(Object.fromEntries(Object.keys(t).map(i=>[i,r.attrs[i]])),t))}function c0(n,e,t={}){return!!E1(n,e,t)}function Bf(n,e,t){var r;if(!n||!e)return;let i=n.parent.childAfter(n.parentOffset);if((!i.node||!i.node.marks.some(p=>p.type===e))&&(i=n.parent.childBefore(n.parentOffset)),!i.node||!i.node.marks.some(p=>p.type===e)||(t=t||((r=i.node.marks[0])===null||r===void 0?void 0:r.attrs),!E1([...i.node.marks],e,t)))return;let a=i.index,u=n.start()+i.offset,d=a+1,f=u+i.node.nodeSize;for(;a>0&&c0([...n.parent.child(a-1).marks],e,t);)a-=1,u-=n.parent.child(a).nodeSize;for(;d<n.parent.childCount&&c0([...n.parent.child(d).marks],e,t);)f+=n.parent.child(d).nodeSize,d+=1;return{from:u,to:f}}function Rr(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const GC=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const s=Rr(n,r.schema),{doc:a,selection:u}=t,{$from:d,from:f,to:p}=u;if(i){const g=Bf(d,s,e);if(g&&g.from<=f&&g.to>=p){const v=re.create(a,g.from,g.to);t.setSelection(v)}}return!0},QC=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function M1(n){return n instanceof re}function Qr(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function N1(n,e=null){if(!e)return null;const t=le.atStart(n),r=le.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const i=t.from,s=r.to;return e==="all"?re.create(n,Qr(0,i,s),Qr(n.content.size,i,s)):re.create(n,Qr(e,i,s),Qr(e,i,s))}function YC(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function _f(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const XC=(n=null,e={})=>({editor:t,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const a=()=>{(_f()||YC())&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(s&&n===null&&!M1(t.state.selection))return a(),!0;const u=N1(i.doc,n)||t.state.selection,d=t.state.selection.eq(u);return s&&(d||i.setSelection(u),d&&i.storedMarks&&i.setStoredMarks(i.storedMarks),a()),!0},ZC=(n,e)=>t=>n.every((r,i)=>e(r,{...t,index:i})),eb=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),T1=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&T1(r)}return n};function Pl(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return T1(t)}function ua(n,e,t){if(n instanceof Sr||n instanceof L)return n;t={slice:!0,parseOptions:{},...t};const r=typeof n=="object"&&n!==null,i=typeof n=="string";if(r)try{if(Array.isArray(n)&&n.length>0)return L.fromArray(n.map(u=>e.nodeFromJSON(u)));const a=e.nodeFromJSON(n);return t.errorOnInvalidContent&&a.check(),a}catch(s){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",s),ua("",e,t)}if(i){if(t.errorOnInvalidContent){let a=!1,u="";const d=new dy({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:f=>(a=!0,u=typeof f=="string"?f:f.outerHTML,null)}]}})});if(t.slice?Cr.fromSchema(d).parseSlice(Pl(n),t.parseOptions):Cr.fromSchema(d).parse(Pl(n),t.parseOptions),t.errorOnInvalidContent&&a)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${u}`)})}const s=Cr.fromSchema(e);return t.slice?s.parseSlice(Pl(n),t.parseOptions).content:s.parse(Pl(n),t.parseOptions)}return ua("",e,t)}function tb(n,e,t){const r=n.steps.length-1;if(r<e)return;const i=n.steps[r];if(!(i instanceof ot||i instanceof st))return;const s=n.mapping.maps[r];let a=0;s.forEach((u,d,f,p)=>{a===0&&(a=p)}),n.setSelection(le.near(n.doc.resolve(a),t))}const nb=n=>!("type"in n),rb=(n,e,t)=>({tr:r,dispatch:i,editor:s})=>{var a;if(i){t={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let u;try{u=ua(e,s.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions},errorOnInvalidContent:(a=t.errorOnInvalidContent)!==null&&a!==void 0?a:s.options.enableContentCheck})}catch(k){return s.emit("contentError",{editor:s,error:k,disableCollaboration:()=>{s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}}),!1}let{from:d,to:f}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},p=!0,g=!0;if((nb(u)?u:[u]).forEach(k=>{k.check(),p=p?k.isText&&k.marks.length===0:!1,g=g?k.isBlock:!1}),d===f&&g){const{parent:k}=r.doc.resolve(d);k.isTextblock&&!k.type.spec.code&&!k.childCount&&(d-=1,f+=1)}let x;if(p){if(Array.isArray(e))x=e.map(k=>k.text||"").join("");else if(e instanceof L){let k="";e.forEach(S=>{S.text&&(k+=S.text)}),x=k}else typeof e=="object"&&e&&e.text?x=e.text:x=e;r.insertText(x,d,f)}else x=u,r.replaceWith(d,f,x);t.updateSelection&&tb(r,r.steps.length-1,-1),t.applyInputRules&&r.setMeta("applyInputRules",{from:d,text:x}),t.applyPasteRules&&r.setMeta("applyPasteRules",{from:d,text:x})}return!0},ib=()=>({state:n,dispatch:e})=>rC(n,e),ob=()=>({state:n,dispatch:e})=>iC(n,e),sb=()=>({state:n,dispatch:e})=>c1(n,e),lb=()=>({state:n,dispatch:e})=>p1(n,e),ab=()=>({state:n,dispatch:e,tr:t})=>{try{const r=Ba(n.doc,n.selection.$from.pos,-1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},ub=()=>({state:n,dispatch:e,tr:t})=>{try{const r=Ba(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},cb=()=>({state:n,dispatch:e})=>tC(n,e),db=()=>({state:n,dispatch:e})=>nC(n,e);function A1(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function fb(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,i,s,a;for(let u=0;u<e.length-1;u+=1){const d=e[u];if(/^(cmd|meta|m)$/i.test(d))a=!0;else if(/^a(lt)?$/i.test(d))r=!0;else if(/^(c|ctrl|control)$/i.test(d))i=!0;else if(/^s(hift)?$/i.test(d))s=!0;else if(/^mod$/i.test(d))_f()||A1()?a=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${d}`)}return r&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),a&&(t=`Meta-${t}`),s&&(t=`Shift-${t}`),t}const hb=n=>({editor:e,view:t,tr:r,dispatch:i})=>{const s=fb(n).split(/-(?!$)/),a=s.find(f=>!["Alt","Ctrl","Meta","Shift"].includes(f)),u=new KeyboardEvent("keydown",{key:a==="Space"?" ":a,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),d=e.captureTransaction(()=>{t.someProp("handleKeyDown",f=>f(t,u))});return d==null||d.steps.forEach(f=>{const p=f.map(r.mapping);p&&i&&r.maybeStep(p)}),!0};function as(n,e,t={}){const{from:r,to:i,empty:s}=n.selection,a=e?at(e,n.schema):null,u=[];n.doc.nodesBetween(r,i,(g,v)=>{if(g.isText)return;const x=Math.max(r,v),k=Math.min(i,v+g.nodeSize);u.push({node:g,from:x,to:k})});const d=i-r,f=u.filter(g=>a?a.name===g.node.type.name:!0).filter(g=>aa(g.node.attrs,t,{strict:!1}));return s?!!f.length:f.reduce((g,v)=>g+v.to-v.from,0)>=d}const pb=(n,e={})=>({state:t,dispatch:r})=>{const i=at(n,t.schema);return as(t,i,e)?oC(t,r):!1},mb=()=>({state:n,dispatch:e})=>v1(n,e),gb=n=>({state:e,dispatch:t})=>{const r=at(n,e.schema);return yC(r)(e,t)},yb=()=>({state:n,dispatch:e})=>g1(n,e);function Qa(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function d0(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,i)=>(t.includes(i)||(r[i]=n[i]),r),{})}const vb=(n,e)=>({tr:t,state:r,dispatch:i})=>{let s=null,a=null;const u=Qa(typeof n=="string"?n:n.name,r.schema);return u?(u==="node"&&(s=at(n,r.schema)),u==="mark"&&(a=Rr(n,r.schema)),i&&t.selection.ranges.forEach(d=>{r.doc.nodesBetween(d.$from.pos,d.$to.pos,(f,p)=>{s&&s===f.type&&t.setNodeMarkup(p,void 0,d0(f.attrs,e)),a&&f.marks.length&&f.marks.forEach(g=>{a===g.type&&t.addMark(p,p+f.nodeSize,a.create(d0(g.attrs,e)))})})}),!0):!1},xb=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),kb=()=>({tr:n,dispatch:e})=>{if(e){const t=new qt(n.doc);n.setSelection(t)}return!0},wb=()=>({state:n,dispatch:e})=>f1(n,e),Sb=()=>({state:n,dispatch:e})=>m1(n,e),Cb=()=>({state:n,dispatch:e})=>uC(n,e),bb=()=>({state:n,dispatch:e})=>fC(n,e),Eb=()=>({state:n,dispatch:e})=>dC(n,e);function Kd(n,e,t={},r={}){return ua(n,e,{slice:!1,parseOptions:t,errorOnInvalidContent:r.errorOnInvalidContent})}const Mb=(n,e=!1,t={},r={})=>({editor:i,tr:s,dispatch:a,commands:u})=>{var d,f;const{doc:p}=s;if(t.preserveWhitespace!=="full"){const g=Kd(n,i.schema,t,{errorOnInvalidContent:(d=r.errorOnInvalidContent)!==null&&d!==void 0?d:i.options.enableContentCheck});return a&&s.replaceWith(0,p.content.size,g).setMeta("preventUpdate",!e),!0}return a&&s.setMeta("preventUpdate",!e),u.insertContentAt({from:0,to:p.content.size},n,{parseOptions:t,errorOnInvalidContent:(f=r.errorOnInvalidContent)!==null&&f!==void 0?f:i.options.enableContentCheck})};function O1(n,e){const t=Rr(e,n.schema),{from:r,to:i,empty:s}=n.selection,a=[];s?(n.storedMarks&&a.push(...n.storedMarks),a.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,d=>{a.push(...d.marks)});const u=a.find(d=>d.type.name===t.name);return u?{...u.attrs}:{}}function Nb(n,e){const t=new kf(n);return e.forEach(r=>{r.steps.forEach(i=>{t.step(i)})}),t}function Tb(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function Ab(n,e,t){const r=[];return n.nodesBetween(e.from,e.to,(i,s)=>{t(i)&&r.push({node:i,pos:s})}),r}function R1(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function Hf(n){return e=>R1(e.$from,n)}function Ob(n,e){const t={from:0,to:n.content.size};return C1(n,t,e)}function Rb(n,e){const t=at(e,n.schema),{from:r,to:i}=n.selection,s=[];n.doc.nodesBetween(r,i,u=>{s.push(u)});const a=s.reverse().find(u=>u.type.name===t.name);return a?{...a.attrs}:{}}function D1(n,e){const t=Qa(typeof e=="string"?e:e.name,n.schema);return t==="node"?Rb(n,e):t==="mark"?O1(n,e):{}}function Db(n,e=JSON.stringify){const t={};return n.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(t,i)?!1:t[i]=!0})}function Pb(n){const e=Db(n);return e.length===1?e:e.filter((t,r)=>!e.filter((s,a)=>a!==r).some(s=>t.oldRange.from>=s.oldRange.from&&t.oldRange.to<=s.oldRange.to&&t.newRange.from>=s.newRange.from&&t.newRange.to<=s.newRange.to))}function Lb(n){const{mapping:e,steps:t}=n,r=[];return e.maps.forEach((i,s)=>{const a=[];if(i.ranges.length)i.forEach((u,d)=>{a.push({from:u,to:d})});else{const{from:u,to:d}=t[s];if(u===void 0||d===void 0)return;a.push({from:u,to:d})}a.forEach(({from:u,to:d})=>{const f=e.slice(s).map(u,-1),p=e.slice(s).map(d),g=e.invert().map(f,-1),v=e.invert().map(p);r.push({oldRange:{from:g,to:v},newRange:{from:f,to:p}})})}),Pb(r)}function $f(n,e,t){const r=[];return n===e?t.resolve(n).marks().forEach(i=>{const s=t.resolve(n),a=Bf(s,i.type);a&&r.push({mark:i,...a})}):t.nodesBetween(n,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(a=>({from:s,to:s+i.nodeSize,mark:a})))}),r}function Kl(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const i=n.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function qd(n,e,t={}){const{empty:r,ranges:i}=n.selection,s=e?Rr(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(g=>s?s.name===g.type.name:!0).find(g=>aa(g.attrs,t,{strict:!1}));let a=0;const u=[];if(i.forEach(({$from:g,$to:v})=>{const x=g.pos,k=v.pos;n.doc.nodesBetween(x,k,(S,C)=>{if(!S.isText&&!S.marks.length)return;const M=Math.max(x,C),P=Math.min(k,C+S.nodeSize),I=P-M;a+=I,u.push(...S.marks.map(V=>({mark:V,from:M,to:P})))})}),a===0)return!1;const d=u.filter(g=>s?s.name===g.mark.type.name:!0).filter(g=>aa(g.mark.attrs,t,{strict:!1})).reduce((g,v)=>g+v.to-v.from,0),f=u.filter(g=>s?g.mark.type!==s&&g.mark.type.excludes(s):!0).reduce((g,v)=>g+v.to-v.from,0);return(d>0?d+f:d)>=a}function Ib(n,e,t={}){if(!e)return as(n,null,t)||qd(n,null,t);const r=Qa(e,n.schema);return r==="node"?as(n,e,t):r==="mark"?qd(n,e,t):!1}function f0(n,e){const{nodeExtensions:t}=qa(e),r=t.find(a=>a.name===n);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=he(X(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function Vf(n,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var r;if(t){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((r=n.text)!==null&&r!==void 0?r:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(e){let i=!0;return n.content.forEach(s=>{i!==!1&&(Vf(s,{ignoreWhitespace:t,checkChildren:e})||(i=!1))}),i}return!1}function zb(n){return n instanceof ne}function jb(n,e,t){var r;const{selection:i}=e;let s=null;if(M1(i)&&(s=i.$cursor),s){const u=(r=n.storedMarks)!==null&&r!==void 0?r:s.marks();return!!t.isInSet(u)||!u.some(d=>d.type.excludes(t))}const{ranges:a}=i;return a.some(({$from:u,$to:d})=>{let f=u.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(u.pos,d.pos,(p,g,v)=>{if(f)return!1;if(p.isInline){const x=!v||v.type.allowsMarkType(t),k=!!t.isInSet(p.marks)||!p.marks.some(S=>S.type.excludes(t));f=x&&k}return!f}),f})}const Fb=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const{selection:s}=t,{empty:a,ranges:u}=s,d=Rr(n,r.schema);if(i)if(a){const f=O1(r,d);t.addStoredMark(d.create({...f,...e}))}else u.forEach(f=>{const p=f.$from.pos,g=f.$to.pos;r.doc.nodesBetween(p,g,(v,x)=>{const k=Math.max(x,p),S=Math.min(x+v.nodeSize,g);v.marks.find(M=>M.type===d)?v.marks.forEach(M=>{d===M.type&&t.addMark(k,S,d.create({...M.attrs,...e}))}):t.addMark(k,S,d.create(e))})});return jb(r,t,d)},Bb=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),_b=(n,e={})=>({state:t,dispatch:r,chain:i})=>{const s=at(n,t.schema);let a;return t.selection.$anchor.sameParent(t.selection.$head)&&(a=t.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:u})=>s0(s,{...a,...e})(t)?!0:u.clearNodes()).command(({state:u})=>s0(s,{...a,...e})(u,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},Hb=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,i=Qr(n,0,r.content.size),s=ne.create(r,i);e.setSelection(s)}return!0},$b=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:i,to:s}=typeof n=="number"?{from:n,to:n}:n,a=re.atStart(r).from,u=re.atEnd(r).to,d=Qr(i,a,u),f=Qr(s,a,u),p=re.create(r,d,f);e.setSelection(p)}return!0},Vb=n=>({state:e,dispatch:t})=>{const r=at(n,e.schema);return kC(r)(e,t)};function h0(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(i=>e==null?void 0:e.includes(i.type.name));n.tr.ensureMarks(r)}}const Ub=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:i})=>{const{selection:s,doc:a}=e,{$from:u,$to:d}=s,f=i.extensionManager.attributes,p=Kl(f,u.node().type.name,u.node().attrs);if(s instanceof ne&&s.node.isBlock)return!u.parentOffset||!Un(a,u.pos)?!1:(r&&(n&&h0(t,i.extensionManager.splittableMarks),e.split(u.pos).scrollIntoView()),!0);if(!u.parent.isBlock)return!1;const g=d.parentOffset===d.parent.content.size,v=u.depth===0?void 0:Tb(u.node(-1).contentMatchAt(u.indexAfter(-1)));let x=g&&v?[{type:v,attrs:p}]:void 0,k=Un(e.doc,e.mapping.map(u.pos),1,x);if(!x&&!k&&Un(e.doc,e.mapping.map(u.pos),1,v?[{type:v}]:void 0)&&(k=!0,x=v?[{type:v,attrs:p}]:void 0),r){if(k&&(s instanceof re&&e.deleteSelection(),e.split(e.mapping.map(u.pos),1,x),v&&!g&&!u.parentOffset&&u.parent.type!==v)){const S=e.mapping.map(u.before()),C=e.doc.resolve(S);u.node(-1).canReplaceWith(C.index(),C.index()+1,v)&&e.setNodeMarkup(e.mapping.map(u.before()),v)}n&&h0(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return k},Wb=(n,e={})=>({tr:t,state:r,dispatch:i,editor:s})=>{var a;const u=at(n,r.schema),{$from:d,$to:f}=r.selection,p=r.selection.node;if(p&&p.isBlock||d.depth<2||!d.sameParent(f))return!1;const g=d.node(-1);if(g.type!==u)return!1;const v=s.extensionManager.attributes;if(d.parent.content.size===0&&d.node(-1).childCount===d.indexAfter(-1)){if(d.depth===2||d.node(-3).type!==u||d.index(-2)!==d.node(-2).childCount-1)return!1;if(i){let M=L.empty;const P=d.index(-1)?1:d.index(-2)?2:3;for(let de=d.depth-P;de>=d.depth-3;de-=1)M=L.from(d.node(de).copy(M));const I=d.indexAfter(-1)<d.node(-2).childCount?1:d.indexAfter(-2)<d.node(-3).childCount?2:3,V={...Kl(v,d.node().type.name,d.node().attrs),...e},B=((a=u.contentMatch.defaultType)===null||a===void 0?void 0:a.createAndFill(V))||void 0;M=M.append(L.from(u.createAndFill(null,B)||void 0));const K=d.before(d.depth-(P-1));t.replace(K,d.after(-I),new U(M,4-P,0));let se=-1;t.doc.nodesBetween(K,t.doc.content.size,(de,ue)=>{if(se>-1)return!1;de.isTextblock&&de.content.size===0&&(se=ue+1)}),se>-1&&t.setSelection(re.near(t.doc.resolve(se))),t.scrollIntoView()}return!0}const x=f.pos===d.end()?g.contentMatchAt(0).defaultType:null,k={...Kl(v,g.type.name,g.attrs),...e},S={...Kl(v,d.node().type.name,d.node().attrs),...e};t.delete(d.pos,f.pos);const C=x?[{type:u,attrs:k},{type:x,attrs:S}]:[{type:u,attrs:k}];if(!Un(t.doc,d.pos,2))return!1;if(i){const{selection:M,storedMarks:P}=r,{splittableMarks:I}=s.extensionManager,V=P||M.$to.parentOffset&&M.$from.marks();if(t.split(d.pos,2,C).scrollIntoView(),!V||!i)return!0;const B=V.filter(K=>I.includes(K.type.name));t.ensureMarks(B)}return!0},md=(n,e)=>{const t=Hf(a=>a.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Ar(n.doc,t.pos)&&n.join(t.pos),!0},gd=(n,e)=>{const t=Hf(a=>a.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&Ar(n.doc,r)&&n.join(r),!0},Kb=(n,e,t,r={})=>({editor:i,tr:s,state:a,dispatch:u,chain:d,commands:f,can:p})=>{const{extensions:g,splittableMarks:v}=i.extensionManager,x=at(n,a.schema),k=at(e,a.schema),{selection:S,storedMarks:C}=a,{$from:M,$to:P}=S,I=M.blockRange(P),V=C||S.$to.parentOffset&&S.$from.marks();if(!I)return!1;const B=Hf(K=>f0(K.type.name,g))(S);if(I.depth>=1&&B&&I.depth-B.depth<=1){if(B.node.type===x)return f.liftListItem(k);if(f0(B.node.type.name,g)&&x.validContent(B.node.content)&&u)return d().command(()=>(s.setNodeMarkup(B.pos,x),!0)).command(()=>md(s,x)).command(()=>gd(s,x)).run()}return!t||!V||!u?d().command(()=>p().wrapInList(x,r)?!0:f.clearNodes()).wrapInList(x,r).command(()=>md(s,x)).command(()=>gd(s,x)).run():d().command(()=>{const K=p().wrapInList(x,r),se=V.filter(de=>v.includes(de.type.name));return s.ensureMarks(se),K?!0:f.clearNodes()}).wrapInList(x,r).command(()=>md(s,x)).command(()=>gd(s,x)).run()},qb=(n,e={},t={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=t,a=Rr(n,r.schema);return qd(r,a,e)?i.unsetMark(a,{extendEmptyMarkRange:s}):i.setMark(a,e)},Jb=(n,e,t={})=>({state:r,commands:i})=>{const s=at(n,r.schema),a=at(e,r.schema),u=as(r,s,t);let d;return r.selection.$anchor.sameParent(r.selection.$head)&&(d=r.selection.$anchor.parent.attrs),u?i.setNode(a,d):i.setNode(s,{...d,...t})},Gb=(n,e={})=>({state:t,commands:r})=>{const i=at(n,t.schema);return as(t,i,e)?r.lift(i):r.wrapIn(i,e)},Qb=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const i=t[r];let s;if(i.spec.isInputRules&&(s=i.getState(n))){if(e){const a=n.tr,u=s.transform;for(let d=u.steps.length-1;d>=0;d-=1)a.step(u.steps[d].invert(u.docs[d]));if(s.text){const d=a.doc.resolve(s.from).marks();a.replaceWith(s.from,s.to,n.schema.text(s.text,d))}else a.delete(s.from,s.to)}return!0}}return!1},Yb=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:i}=t;return r||e&&i.forEach(s=>{n.removeMark(s.$from.pos,s.$to.pos)}),!0},Xb=(n,e={})=>({tr:t,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:a=!1}=e,{selection:u}=t,d=Rr(n,r.schema),{$from:f,empty:p,ranges:g}=u;if(!i)return!0;if(p&&a){let{from:v,to:x}=u;const k=(s=f.marks().find(C=>C.type===d))===null||s===void 0?void 0:s.attrs,S=Bf(f,d,k);S&&(v=S.from,x=S.to),t.removeMark(v,x,d)}else g.forEach(v=>{t.removeMark(v.$from.pos,v.$to.pos,d)});return t.removeStoredMark(d),!0},Zb=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let s=null,a=null;const u=Qa(typeof n=="string"?n:n.name,r.schema);return u?(u==="node"&&(s=at(n,r.schema)),u==="mark"&&(a=Rr(n,r.schema)),i&&t.selection.ranges.forEach(d=>{const f=d.$from.pos,p=d.$to.pos;let g,v,x,k;t.selection.empty?r.doc.nodesBetween(f,p,(S,C)=>{s&&s===S.type&&(x=Math.max(C,f),k=Math.min(C+S.nodeSize,p),g=C,v=S)}):r.doc.nodesBetween(f,p,(S,C)=>{C<f&&s&&s===S.type&&(x=Math.max(C,f),k=Math.min(C+S.nodeSize,p),g=C,v=S),C>=f&&C<=p&&(s&&s===S.type&&t.setNodeMarkup(C,void 0,{...S.attrs,...e}),a&&S.marks.length&&S.marks.forEach(M=>{if(a===M.type){const P=Math.max(C,f),I=Math.min(C+S.nodeSize,p);t.addMark(P,I,a.create({...M.attrs,...e}))}}))}),v&&(g!==void 0&&t.setNodeMarkup(g,void 0,{...v.attrs,...e}),a&&v.marks.length&&v.marks.forEach(S=>{a===S.type&&t.addMark(x,k,a.create({...S.attrs,...e}))}))}),!0):!1},eE=(n,e={})=>({state:t,dispatch:r})=>{const i=at(n,t.schema);return hC(i,e)(t,r)},tE=(n,e={})=>({state:t,dispatch:r})=>{const i=at(n,t.schema);return pC(i,e)(t,r)};var nE=Object.freeze({__proto__:null,blur:jC,clearContent:FC,clearNodes:BC,command:_C,createParagraphNear:HC,cut:$C,deleteCurrentNode:VC,deleteNode:UC,deleteRange:WC,deleteSelection:KC,enter:qC,exitCode:JC,extendMarkRange:GC,first:QC,focus:XC,forEach:ZC,insertContent:eb,insertContentAt:rb,joinBackward:sb,joinDown:ob,joinForward:lb,joinItemBackward:ab,joinItemForward:ub,joinTextblockBackward:cb,joinTextblockForward:db,joinUp:ib,keyboardShortcut:hb,lift:pb,liftEmptyBlock:mb,liftListItem:gb,newlineInCode:yb,resetAttributes:vb,scrollIntoView:xb,selectAll:kb,selectNodeBackward:wb,selectNodeForward:Sb,selectParentNode:Cb,selectTextblockEnd:bb,selectTextblockStart:Eb,setContent:Mb,setMark:Fb,setMeta:Bb,setNode:_b,setNodeSelection:Hb,setTextSelection:$b,sinkListItem:Vb,splitBlock:Ub,splitListItem:Wb,toggleList:Kb,toggleMark:qb,toggleNode:Jb,toggleWrap:Gb,undoInputRule:Qb,unsetAllMarks:Yb,unsetMark:Xb,updateAttributes:Zb,wrapIn:eE,wrapInList:tE});const rE=Xe.create({name:"commands",addCommands(){return{...nE}}}),iE=Xe.create({name:"drop",addProseMirrorPlugins(){return[new Ge({key:new ut("tiptapDrop"),props:{handleDrop:(n,e,t,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:r})}}})]}}),oE=Xe.create({name:"editable",addProseMirrorPlugins(){return[new Ge({key:new ut("editable"),props:{editable:()=>this.editor.options.editable}})]}}),sE=new ut("focusEvents"),lE=Xe.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Ge({key:sE,props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),aE=Xe.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:a})=>[()=>a.undoInputRule(),()=>a.command(({tr:u})=>{const{selection:d,doc:f}=u,{empty:p,$anchor:g}=d,{pos:v,parent:x}=g,k=g.parent.isTextblock&&v>0?u.doc.resolve(v-1):g,S=k.parent.type.spec.isolating,C=g.pos-g.parentOffset,M=S&&k.parent.childCount===1?C===g.pos:le.atStart(f).from===v;return!p||!x.type.isTextblock||x.textContent.length||!M||M&&g.parent.type.name==="paragraph"?!1:a.clearNodes()}),()=>a.deleteSelection(),()=>a.joinBackward(),()=>a.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:a})=>[()=>a.deleteSelection(),()=>a.deleteCurrentNode(),()=>a.joinForward(),()=>a.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:a})=>[()=>a.newlineInCode(),()=>a.createParagraphNear(),()=>a.liftEmptyBlock(),()=>a.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return _f()||A1()?s:i},addProseMirrorPlugins(){return[new Ge({key:new ut("clearDocument"),appendTransaction:(n,e,t)=>{if(n.some(S=>S.getMeta("composition")))return;const r=n.some(S=>S.docChanged)&&!e.doc.eq(t.doc),i=n.some(S=>S.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:a,to:u}=e.selection,d=le.atStart(e.doc).from,f=le.atEnd(e.doc).to;if(s||!(a===d&&u===f)||!Vf(t.doc))return;const v=t.tr,x=Wa({state:t,transaction:v}),{commands:k}=new Ka({editor:this.editor,state:x});if(k.clearNodes(),!!v.steps.length)return v}})]}}),uE=Xe.create({name:"paste",addProseMirrorPlugins(){return[new Ge({key:new ut("tiptapPaste"),props:{handlePaste:(n,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),cE=Xe.create({name:"tabindex",addProseMirrorPlugins(){return[new Ge({key:new ut("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class qr{get name(){return this.node.type.name}constructor(e,t,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=t,this.currentNode=i}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:t,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new qr(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new qr(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new qr(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,r)=>{const i=t.isBlock&&!t.isTextblock,s=t.isAtom&&!t.isText,a=this.pos+r+(s?0:1),u=this.resolvedPos.doc.resolve(a);if(!i&&u.depth<=this.depth)return;const d=new qr(u,this.editor,i,i?t:null);i&&(d.actualDepth=this.depth+1),e.push(new qr(u,this.editor,i,i?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(t).length>0){const s=i.node.attrs,a=Object.keys(t);for(let u=0;u<a.length;u+=1){const d=a[u];if(s[d]!==t[d])break}}else r=i;i=i.parent}return r}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(t);return this.children.forEach(a=>{r&&i.length>0||(a.node.type.name===e&&s.every(d=>t[d]===a.node.attrs[d])&&i.push(a),!(r&&i.length>0)&&(i=i.concat(a.querySelectorAll(e,t,r))))}),i}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}}const dE=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function fE(n,e,t){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(i),i}class hE extends wC{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:t})=>{throw t},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:t,slice:r,moved:i})=>this.options.onDrop(t,r,i)),this.on("paste",({event:t,slice:r})=>this.options.onPaste(t,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=fE(dE,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const r=S1(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let r=t;if([].concat(e).forEach(s=>{const a=typeof s=="string"?`${s}$`:s.key;r=r.filter(u=>!u.key.startsWith(a))}),t.length===r.length)return;const i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}createExtensionManager(){var e,t;const i=[...this.options.enableCoreExtensions?[oE,zC.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||t===void 0?void 0:t.blockSeparator}),rE,lE,aE,cE,iE,uE].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new Hi(i,this)}createCommandManager(){this.commandManager=new Ka({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let t;try{t=Kd(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(a){if(!(a instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(a.message))throw a;this.emit("contentError",{editor:this,error:a,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(u=>u.name!=="collaboration"),this.createExtensionManager()}}),t=Kd(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=N1(t,this.options.autofocus);this.view=new US(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:_i.create({doc:t,selection:r||void 0})});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.prependClass();const s=this.view.dom;s.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(a=>{var u;return(u=this.capturedTransaction)===null||u===void 0?void 0:u.step(a)});return}const t=this.state.apply(e),r=!this.state.selection.eq(t.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),s=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),s&&this.emit("blur",{editor:this,event:s.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return D1(this.state,e)}isActive(e,t){const r=typeof e=="string"?e:null,i=typeof e=="string"?t:e;return Ib(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return jf(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:r={}}=e||{};return Ob(this.state.doc,{blockSeparator:t,textSerializers:{...b1(this.schema),...r}})}get isEmpty(){return Vf(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,t))||null}$nodes(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new qr(t,this)}get $doc(){return this.$pos(0)}}function li(n){return new Ja({find:n.find,handler:({state:e,range:t,match:r})=>{const i=he(n.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,a=r[r.length-1],u=r[0];if(a){const d=u.search(/\S/),f=t.from+u.indexOf(a),p=f+a.length;if($f(t.from,t.to,e.doc).filter(x=>x.mark.type.excluded.find(S=>S===n.type&&S!==x.mark.type)).filter(x=>x.to>f).length)return null;p<t.to&&s.delete(p,t.to),f>t.from&&s.delete(t.from+d,f);const v=t.from+d+a.length;s.addMark(t.from+d,v,n.type.create(i||{})),s.removeStoredMark(n.type)}}})}function P1(n){return new Ja({find:n.find,handler:({state:e,range:t,match:r})=>{const i=he(n.getAttributes,void 0,r)||{},{tr:s}=e,a=t.from;let u=t.to;const d=n.type.create(i);if(r[1]){const f=r[0].lastIndexOf(r[1]);let p=a+f;p>u?p=u:u=p+r[1].length;const g=r[0][r[0].length-1];s.insertText(g,a+r[0].length-1),s.replaceWith(p,u,d)}else if(r[0]){const f=n.type.isInline?a:a-1;s.insert(f,n.type.create(i)).delete(s.mapping.map(a),s.mapping.map(u))}s.scrollIntoView()}})}function Jd(n){return new Ja({find:n.find,handler:({state:e,range:t,match:r})=>{const i=e.doc.resolve(t.from),s=he(n.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,s)}})}function us(n){return new Ja({find:n.find,handler:({state:e,range:t,match:r,chain:i})=>{const s=he(n.getAttributes,void 0,r)||{},a=e.tr.delete(t.from,t.to),d=a.doc.resolve(t.from).blockRange(),f=d&&xf(d,n.type,s);if(!f)return null;if(a.wrap(d,f),n.keepMarks&&n.editor){const{selection:g,storedMarks:v}=e,{splittableMarks:x}=n.editor.extensionManager,k=v||g.$to.parentOffset&&g.$from.marks();if(k){const S=k.filter(C=>x.includes(C.type.name));a.ensureMarks(S)}}if(n.keepAttributes){const g=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(g,s).run()}const p=a.doc.resolve(t.from-1).nodeBefore;p&&p.type===n.type&&Ar(a.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(r,p))&&a.join(t.from-1)}})}class tt{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=he(X(this,"addOptions",{name:this.name}))),this.storage=he(X(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new tt(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>Ga(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new tt(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=he(X(t,"addOptions",{name:t.name})),t.storage=he(X(t,"addStorage",{name:t.name,options:t.options})),t}}function Tr(n){return new OC({find:n.find,handler:({state:e,range:t,match:r,pasteEvent:i})=>{const s=he(n.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:a}=e,u=r[r.length-1],d=r[0];let f=t.to;if(u){const p=d.search(/\S/),g=t.from+d.indexOf(u),v=g+u.length;if($f(t.from,t.to,e.doc).filter(k=>k.mark.type.excluded.find(C=>C===n.type&&C!==k.mark.type)).filter(k=>k.to>g).length)return null;v<t.to&&a.delete(v,t.to),g>t.from&&a.delete(t.from+p,g),f=t.from+p+u.length,a.addMark(t.from+p,f,n.type.create(s||{})),a.removeStoredMark(n.type)}}})}var pE=G0();const mE=J0(pE);function gE(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var L1={exports:{}},yd={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p0;function yE(){if(p0)return yd;p0=1;var n=Se;function e(g,v){return g===v&&(g!==0||1/g===1/v)||g!==g&&v!==v}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,i=n.useEffect,s=n.useLayoutEffect,a=n.useDebugValue;function u(g,v){var x=v(),k=r({inst:{value:x,getSnapshot:v}}),S=k[0].inst,C=k[1];return s(function(){S.value=x,S.getSnapshot=v,d(S)&&C({inst:S})},[g,x,v]),i(function(){return d(S)&&C({inst:S}),g(function(){d(S)&&C({inst:S})})},[g]),a(x),x}function d(g){var v=g.getSnapshot;g=g.value;try{var x=v();return!t(g,x)}catch{return!0}}function f(g,v){return v()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:u;return yd.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:p,yd}L1.exports=yE();var Uf=L1.exports;const vE=(...n)=>e=>{n.forEach(t=>{typeof t=="function"?t(e):t&&(t.current=e)})},xE=({contentComponent:n})=>{const e=Uf.useSyncExternalStore(n.subscribe,n.getSnapshot,n.getServerSnapshot);return Se.createElement(Se.Fragment,null,Object.values(e))};function kE(){const n=new Set;let e={};return{subscribe(t){return n.add(t),()=>{n.delete(t)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(t,r){e={...e,[t]:mE.createPortal(r.reactElement,r.element,t)},n.forEach(i=>i())},removeRenderer(t){const r={...e};delete r[t],e=r,n.forEach(i=>i())}}}class wE extends Se.Component{constructor(e){var t;super(e),this.editorContentRef=Se.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((t=e.editor)===null||t===void 0)&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=kE(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){const{editor:e,innerRef:t,...r}=this.props;return Se.createElement(Se.Fragment,null,Se.createElement("div",{ref:vE(t,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&Se.createElement(xE,{contentComponent:e.contentComponent}))}}const SE=J.forwardRef((n,e)=>{const t=Se.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[n.editor]);return Se.createElement(wE,{key:t,innerRef:e,...n})}),CE=Se.memo(SE);var bE=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(i=r;i--!==0;)if(!n(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(i of e.entries())if(!t.has(i[0]))return!1;for(i of e.entries())if(!n(i[1],t.get(i[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(i of e.entries())if(!t.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(i=r;i--!==0;)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,s[i]))return!1;for(i=r;i--!==0;){var a=s[i];if(!(a==="_owner"&&e.$$typeof)&&!n(e[a],t[a]))return!1}return!0}return e!==e&&t!==t},EE=gE(bE),I1={exports:{}},vd={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m0;function ME(){if(m0)return vd;m0=1;var n=Se,e=Uf;function t(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var r=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,s=n.useRef,a=n.useEffect,u=n.useMemo,d=n.useDebugValue;return vd.useSyncExternalStoreWithSelector=function(f,p,g,v,x){var k=s(null);if(k.current===null){var S={hasValue:!1,value:null};k.current=S}else S=k.current;k=u(function(){function M(K){if(!P){if(P=!0,I=K,K=v(K),x!==void 0&&S.hasValue){var se=S.value;if(x(se,K))return V=se}return V=K}if(se=V,r(I,K))return se;var de=v(K);return x!==void 0&&x(se,de)?se:(I=K,V=de)}var P=!1,I,V,B=g===void 0?null:g;return[function(){return M(p())},B===null?void 0:function(){return M(B())}]},[p,g,v,x]);var C=i(f,k[0],k[1]);return a(function(){S.hasValue=!0,S.value=C},[C]),d(C),C},vd}I1.exports=ME();var NE=I1.exports;const TE=typeof window<"u"?J.useLayoutEffect:J.useEffect;class AE{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(i=>i())},r=this.editor;return r.on("transaction",t),()=>{r.off("transaction",t)}}}}function OE(n){var e;const[t]=J.useState(()=>new AE(n.editor)),r=NE.useSyncExternalStoreWithSelector(t.subscribe,t.getSnapshot,t.getServerSnapshot,n.selector,(e=n.equalityFn)!==null&&e!==void 0?e:EE);return TE(()=>t.watch(n.editor),[n.editor,t]),J.useDebugValue(r),r}const RE=!1,Gd=typeof window>"u",DE=Gd||!!(typeof window<"u"&&window.next);class Wf{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(t=>t())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?Gd||DE?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)===null||s===void 0?void 0:s.call(i,...r)},onBlur:(...r)=>{var i,s;return(s=(i=this.options.current).onBlur)===null||s===void 0?void 0:s.call(i,...r)},onCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onCreate)===null||s===void 0?void 0:s.call(i,...r)},onDestroy:(...r)=>{var i,s;return(s=(i=this.options.current).onDestroy)===null||s===void 0?void 0:s.call(i,...r)},onFocus:(...r)=>{var i,s;return(s=(i=this.options.current).onFocus)===null||s===void 0?void 0:s.call(i,...r)},onSelectionUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)===null||s===void 0?void 0:s.call(i,...r)},onTransaction:(...r)=>{var i,s;return(s=(i=this.options.current).onTransaction)===null||s===void 0?void 0:s.call(i,...r)},onUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onUpdate)===null||s===void 0?void 0:s.call(i,...r)},onContentError:(...r)=>{var i,s;return(s=(i=this.options.current).onContentError)===null||s===void 0?void 0:s.call(i,...r)},onDrop:(...r)=>{var i,s;return(s=(i=this.options.current).onDrop)===null||s===void 0?void 0:s.call(i,...r)},onPaste:(...r)=>{var i,s;return(s=(i=this.options.current).onPaste)===null||s===void 0?void 0:s.call(i,...r)}};return new hE(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,t){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&t.extensions?e.extensions.length!==t.extensions.length?!1:e.extensions.every((i,s)=>{var a;return i===((a=t.extensions)===null||a===void 0?void 0:a[s])}):e[r]===t[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?Wf.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){t&&t.setOptions(this.options.current);return}t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function PE(n={},e=[]){const t=J.useRef(n);t.current=n;const[r]=J.useState(()=>new Wf(t)),i=Uf.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return J.useDebugValue(i),J.useEffect(r.onRender(e)),OE({editor:i,selector:({transactionNumber:s})=>n.shouldRerenderOnTransaction===!1?null:n.immediatelyRender&&s===0?0:s+1}),i}const LE=J.createContext({editor:null});LE.Consumer;const IE=J.createContext({onDragStart:void 0}),zE=()=>J.useContext(IE);Se.forwardRef((n,e)=>{const{onDragStart:t}=zE(),r=n.as||"div";return Se.createElement(r,{...n,ref:e,"data-node-view-wrapper":"",onDragStart:t,style:{whiteSpace:"normal",...n.style}})});const jE=/^\s*>\s$/,FE=tt.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return["blockquote",Ie(this.options.HTMLAttributes,n),0]},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[us({find:jE,type:this.type})]}}),BE=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,_E=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,HE=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,$E=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,VE=sn.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name===this.name},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return["strong",Ie(this.options.HTMLAttributes,n),0]},addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[li({find:BE,type:this.type}),li({find:HE,type:this.type})]},addPasteRules(){return[Tr({find:_E,type:this.type}),Tr({find:$E,type:this.type})]}}),UE="listItem",g0="textStyle",y0=/^\s*([-+*])\s$/,WE=tt.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",Ie(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(UE,this.editor.getAttributes(g0)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=us({find:y0,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=us({find:y0,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(g0),editor:this.editor})),[n]}}),KE=/(^|[^`])`([^`]+)`(?!`)/,qE=/(^|[^`])`([^`]+)`(?!`)/g,JE=sn.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",Ie(this.options.HTMLAttributes,n),0]},addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[li({find:KE,type:this.type})]},addPasteRules(){return[Tr({find:qE,type:this.type})]}}),GE=/^```([a-z]+)?[\s\n]$/,QE=/^~~~([a-z]+)?[\s\n]$/,YE=tt.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options,s=[...((e=n.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(a=>a.startsWith(t)).map(a=>a.replace(t,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",Ie(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:r,empty:i}=t;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,a=r.parent.textContent.endsWith(`

`);return!s||!a?!1:n.chain().command(({tr:u})=>(u.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:r}=e,{$from:i,empty:s}=t;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const u=i.after();return u===void 0?!1:r.nodeAt(u)?n.commands.command(({tr:f})=>(f.setSelection(le.near(r.resolve(u))),!0)):n.commands.exitCode()}}},addInputRules(){return[Jd({find:GE,type:this.type,getAttributes:n=>({language:n[1]})}),Jd({find:QE,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new Ge({key:new ut("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i==null?void 0:i.mode;if(!t||!s)return!1;const{tr:a,schema:u}=n.state,d=u.text(t.replace(/\r\n?/g,`
`));return a.replaceSelectionWith(this.type.create({language:s},d)),a.selection.$from.parent.type!==this.type&&a.setSelection(re.near(a.doc.resolve(Math.max(0,a.selection.from-2)))),a.setMeta("paste",!0),n.dispatch(a),!0}}})]}}),XE=tt.create({name:"doc",topNode:!0,content:"block+"});function ZE(n={}){return new Ge({view(e){return new eM(e,n)}})}class eM{constructor(e,t){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=t.width)!==null&&r!==void 0?r:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=a=>{this[i](a)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,r,i=this.editorView.dom,s=i.getBoundingClientRect(),a=s.width/i.offsetWidth,u=s.height/i.offsetHeight;if(t){let g=e.nodeBefore,v=e.nodeAfter;if(g||v){let x=this.editorView.nodeDOM(this.cursorPos-(g?g.nodeSize:0));if(x){let k=x.getBoundingClientRect(),S=g?k.bottom:k.top;g&&v&&(S=(S+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let C=this.width/2*u;r={left:k.left,right:k.right,top:S-C,bottom:S+C}}}}if(!r){let g=this.editorView.coordsAtPos(this.cursorPos),v=this.width/2*a;r={left:g.left-v,right:g.left+v,top:g.top,bottom:g.bottom}}let d=this.editorView.dom.offsetParent;this.element||(this.element=d.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let f,p;if(!d||d==document.body&&getComputedStyle(d).position=="static")f=-pageXOffset,p=-pageYOffset;else{let g=d.getBoundingClientRect(),v=g.width/d.offsetWidth,x=g.height/d.offsetHeight;f=g.left-d.scrollLeft*v,p=g.top-d.scrollTop*x}this.element.style.left=(r.left-f)/a+"px",this.element.style.top=(r.top-p)/u+"px",this.element.style.width=(r.right-r.left)/a+"px",this.element.style.height=(r.bottom-r.top)/u+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,t,e):i;if(t&&!s){let a=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let u=Sy(this.editorView.state.doc,a,this.editorView.dragging.slice);u!=null&&(a=u)}this.setCursor(a),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const tM=Xe.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[ZE(this.options)]}});class Ve extends le{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return Ve.valid(r)?new Ve(r):le.near(r)}content(){return U.empty}eq(e){return e instanceof Ve&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Ve(e.resolve(t.pos))}getBookmark(){return new Kf(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!nM(e)||!rM(e))return!1;let r=t.type.spec.allowGapCursor;if(r!=null)return r;let i=t.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&Ve.valid(e))return e;let i=e.pos,s=null;for(let a=e.depth;;a--){let u=e.node(a);if(t>0?e.indexAfter(a)<u.childCount:e.index(a)>0){s=u.child(t>0?e.indexAfter(a):e.index(a)-1);break}else if(a==0)return null;i+=t;let d=e.doc.resolve(i);if(Ve.valid(d))return d}for(;;){let a=t>0?s.firstChild:s.lastChild;if(!a){if(s.isAtom&&!s.isText&&!ne.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*t),r=!1;continue e}break}s=a,i+=t;let u=e.doc.resolve(i);if(Ve.valid(u))return u}return null}}}Ve.prototype.visible=!1;Ve.findFrom=Ve.findGapCursorFrom;le.jsonID("gapcursor",Ve);class Kf{constructor(e){this.pos=e}map(e){return new Kf(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return Ve.valid(t)?new Ve(t):le.near(t)}}function nM(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),r=n.node(e);if(t==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function rM(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),r=n.node(e);if(t==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function iM(){return new Ge({props:{decorations:aM,createSelectionBetween(n,e,t){return e.pos==t.pos&&Ve.valid(t)?new Ve(t):null},handleClick:sM,handleKeyDown:oM,handleDOMEvents:{beforeinput:lM}}})}const oM=Rf({ArrowLeft:Ll("horiz",-1),ArrowRight:Ll("horiz",1),ArrowUp:Ll("vert",-1),ArrowDown:Ll("vert",1)});function Ll(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let a=r.selection,u=e>0?a.$to:a.$from,d=a.empty;if(a instanceof re){if(!s.endOfTextblock(t)||u.depth==0)return!1;d=!1,u=r.doc.resolve(e>0?u.after():u.before())}let f=Ve.findGapCursorFrom(u,e,d);return f?(i&&i(r.tr.setSelection(new Ve(f))),!0):!1}}function sM(n,e,t){if(!n||!n.editable)return!1;let r=n.state.doc.resolve(e);if(!Ve.valid(r))return!1;let i=n.posAtCoords({left:t.clientX,top:t.clientY});return i&&i.inside>-1&&ne.isSelectable(n.state.doc.nodeAt(i.inside))?!1:(n.dispatch(n.state.tr.setSelection(new Ve(r))),!0)}function lM(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof Ve))return!1;let{$from:t}=n.state.selection,r=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!r)return!1;let i=L.empty;for(let a=r.length-1;a>=0;a--)i=L.from(r[a].createAndFill(null,i));let s=n.state.tr.replace(t.pos,t.pos,new U(i,0,0));return s.setSelection(re.near(s.doc.resolve(t.pos+1))),n.dispatch(s),!1}function aM(n){if(!(n.selection instanceof Ve))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Fe.create(n.doc,[St.widget(n.selection.head,e,{key:"gapcursor"})])}const uM=Xe.create({name:"gapCursor",addProseMirrorPlugins(){return[iM()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=he(X(n,"allowGapCursor",t)))!==null&&e!==void 0?e:null}}}),cM=tt.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",Ie(this.options.HTMLAttributes,n)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:r})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:i,storedMarks:s}=t;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:a}=this.options,{splittableMarks:u}=r.extensionManager,d=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:f,dispatch:p})=>{if(p&&d&&a){const g=d.filter(v=>u.includes(v.type.name));f.ensureMarks(g)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),dM=tt.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,Ie(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>Jd({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}});var ca=200,lt=function(){};lt.prototype.append=function(e){return e.length?(e=lt.from(e),!this.length&&e||e.length<ca&&this.leafAppend(e)||this.length<ca&&e.leafPrepend(this)||this.appendInner(e)):this};lt.prototype.prepend=function(e){return e.length?lt.from(e).append(this):this};lt.prototype.appendInner=function(e){return new fM(this,e)};lt.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?lt.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};lt.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};lt.prototype.forEach=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)};lt.prototype.map=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,a){return i.push(e(s,a))},t,r),i};lt.from=function(e){return e instanceof lt?e:e&&e.length?new z1(e):lt.empty};var z1=function(n){function e(r){n.call(this),this.values=r}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,a,u){for(var d=s;d<a;d++)if(i(this.values[d],u+d)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,a,u){for(var d=s-1;d>=a;d--)if(i(this.values[d],u+d)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=ca)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=ca)return new e(i.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(lt);lt.empty=new z1([]);var fM=function(n){function e(t,r){n.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,a){var u=this.left.length;if(i<u&&this.left.forEachInner(r,i,Math.min(s,u),a)===!1||s>u&&this.right.forEachInner(r,Math.max(i-u,0),Math.min(this.length,s)-u,a+u)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,a){var u=this.left.length;if(i>u&&this.right.forEachInvertedInner(r,i-u,Math.max(s,u)-u,a+u)===!1||s<u&&this.left.forEachInvertedInner(r,Math.min(i,u),s,a)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(lt);const hM=500;class pn{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;t&&(i=this.remapping(r,this.items.length),s=i.maps.length);let a=e.tr,u,d,f=[],p=[];return this.items.forEach((g,v)=>{if(!g.step){i||(i=this.remapping(r,v+1),s=i.maps.length),s--,p.push(g);return}if(i){p.push(new Sn(g.map));let x=g.step.map(i.slice(s)),k;x&&a.maybeStep(x).doc&&(k=a.mapping.maps[a.mapping.maps.length-1],f.push(new Sn(k,void 0,void 0,f.length+p.length))),s--,k&&i.appendMap(k,s)}else a.maybeStep(g.step);if(g.selection)return u=i?g.selection.map(i.slice(s)):g.selection,d=new pn(this.items.slice(0,r).append(p.reverse().concat(f)),this.eventCount-1),!1},this.items.length,0),{remaining:d,transform:a,selection:u}}addTransform(e,t,r,i){let s=[],a=this.eventCount,u=this.items,d=!i&&u.length?u.get(u.length-1):null;for(let p=0;p<e.steps.length;p++){let g=e.steps[p].invert(e.docs[p]),v=new Sn(e.mapping.maps[p],g,t),x;(x=d&&d.merge(v))&&(v=x,p?s.pop():u=u.slice(0,u.length-1)),s.push(v),t&&(a++,t=void 0),i||(d=v)}let f=a-r.depth;return f>mM&&(u=pM(u,f),a-=f),new pn(u.append(s),a)}remapping(e,t){let r=new ns;return this.items.forEach((i,s)=>{let a=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,a)},e,t),r}addMaps(e){return this.eventCount==0?this:new pn(this.items.append(e.map(t=>new Sn(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-t),s=e.mapping,a=e.steps.length,u=this.eventCount;this.items.forEach(v=>{v.selection&&u--},i);let d=t;this.items.forEach(v=>{let x=s.getMirror(--d);if(x==null)return;a=Math.min(a,x);let k=s.maps[x];if(v.step){let S=e.steps[x].invert(e.docs[x]),C=v.selection&&v.selection.map(s.slice(d+1,x));C&&u++,r.push(new Sn(k,S,C))}else r.push(new Sn(k))},i);let f=[];for(let v=t;v<a;v++)f.push(new Sn(s.maps[v]));let p=this.items.slice(0,i).append(f).append(r),g=new pn(p,u);return g.emptyItemCount()>hM&&(g=g.compress(this.items.length-r.length)),g}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,i=[],s=0;return this.items.forEach((a,u)=>{if(u>=e)i.push(a),a.selection&&s++;else if(a.step){let d=a.step.map(t.slice(r)),f=d&&d.getMap();if(r--,f&&t.appendMap(f,r),d){let p=a.selection&&a.selection.map(t.slice(r));p&&s++;let g=new Sn(f.invert(),d,p),v,x=i.length-1;(v=i.length&&i[x].merge(g))?i[x]=v:i.push(g)}}else a.map&&r--},this.items.length,0),new pn(lt.from(i.reverse()),s)}}pn.empty=new pn(lt.empty,0);function pM(n,e){let t;return n.forEach((r,i)=>{if(r.selection&&e--==0)return t=i,!1}),n.slice(t)}class Sn{constructor(e,t,r,i){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new Sn(t.getMap().invert(),t,this.selection)}}}class pr{constructor(e,t,r,i,s){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const mM=20;function gM(n,e,t,r){let i=t.getMeta(ni),s;if(i)return i.historyState;t.getMeta(xM)&&(n=new pr(n.done,n.undone,null,0,-1));let a=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(a&&a.getMeta(ni))return a.getMeta(ni).redo?new pr(n.done.addTransform(t,void 0,r,ql(e)),n.undone,v0(t.mapping.maps),n.prevTime,n.prevComposition):new pr(n.done,n.undone.addTransform(t,void 0,r,ql(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(a&&a.getMeta("addToHistory")===!1)){let u=t.getMeta("composition"),d=n.prevTime==0||!a&&n.prevComposition!=u&&(n.prevTime<(t.time||0)-r.newGroupDelay||!yM(t,n.prevRanges)),f=a?xd(n.prevRanges,t.mapping):v0(t.mapping.maps);return new pr(n.done.addTransform(t,d?e.selection.getBookmark():void 0,r,ql(e)),pn.empty,f,t.time,u??n.prevComposition)}else return(s=t.getMeta("rebased"))?new pr(n.done.rebased(t,s),n.undone.rebased(t,s),xd(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new pr(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),xd(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function yM(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(t=!0)}),t}function v0(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((r,i,s,a)=>e.push(s,a));return e}function xd(n,e){if(!n)return null;let t=[];for(let r=0;r<n.length;r+=2){let i=e.map(n[r],1),s=e.map(n[r+1],-1);i<=s&&t.push(i,s)}return t}function vM(n,e,t){let r=ql(e),i=ni.get(e).spec.config,s=(t?n.undone:n.done).popEvent(e,r);if(!s)return null;let a=s.selection.resolve(s.transform.doc),u=(t?n.done:n.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),d=new pr(t?u:s.remaining,t?s.remaining:u,null,0,-1);return s.transform.setSelection(a).setMeta(ni,{redo:t,historyState:d})}let kd=!1,x0=null;function ql(n){let e=n.plugins;if(x0!=e){kd=!1,x0=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){kd=!0;break}}return kd}const ni=new ut("history"),xM=new ut("closeHistory");function kM(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new Ge({key:ni,state:{init(){return new pr(pn.empty,pn.empty,null,0,-1)},apply(e,t,r){return gM(t,r,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,i=r=="historyUndo"?F1:r=="historyRedo"?B1:null;return i?(t.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function j1(n,e){return(t,r)=>{let i=ni.getState(t);if(!i||(n?i.undone:i.done).eventCount==0)return!1;if(r){let s=vM(i,t,n);s&&r(e?s.scrollIntoView():s)}return!0}}const F1=j1(!1,!0),B1=j1(!0,!0),wM=Xe.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>F1(n,e),redo:()=>({state:n,dispatch:e})=>B1(n,e)}},addProseMirrorPlugins(){return[kM(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),SM=tt.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",Ie(this.options.HTMLAttributes,n)]},addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{const{selection:t}=e,{$from:r,$to:i}=t,s=n();return r.parentOffset===0?s.insertContentAt({from:Math.max(r.pos-1,0),to:i.pos},{type:this.name}):zb(t)?s.insertContentAt(i.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({tr:a,dispatch:u})=>{var d;if(u){const{$to:f}=a.selection,p=f.end();if(f.nodeAfter)f.nodeAfter.isTextblock?a.setSelection(re.create(a.doc,f.pos+1)):f.nodeAfter.isBlock?a.setSelection(ne.create(a.doc,f.pos)):a.setSelection(re.create(a.doc,f.pos));else{const g=(d=f.parent.type.contentMatch.defaultType)===null||d===void 0?void 0:d.create();g&&(a.insert(p,g),a.setSelection(re.create(a.doc,p+1)))}a.scrollIntoView()}return!0}).run()}}},addInputRules(){return[P1({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),CM=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,bM=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,EM=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,MM=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,NM=sn.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:n=>n.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",Ie(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[li({find:CM,type:this.type}),li({find:EM,type:this.type})]},addPasteRules(){return[Tr({find:bM,type:this.type}),Tr({find:MM,type:this.type})]}}),Qd=tt.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",Ie(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),TM="listItem",k0="textStyle",w0=/^(\d+)\.\s$/,AM=tt.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:null,parseHTML:n=>n.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",Ie(this.options.HTMLAttributes,t),0]:["ol",Ie(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(TM,this.editor.getAttributes(k0)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=us({find:w0,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=us({find:w0,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(k0)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}}),OM=tt.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",Ie(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),RM=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,DM=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,PM=sn.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",Ie(this.options.HTMLAttributes,n),0]},addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[li({find:RM,type:this.type})]},addPasteRules(){return[Tr({find:DM,type:this.type})]}}),LM=tt.create({name:"text",group:"inline"}),IM=Xe.create({name:"starterKit",addExtensions(){const n=[];return this.options.bold!==!1&&n.push(VE.configure(this.options.bold)),this.options.blockquote!==!1&&n.push(FE.configure(this.options.blockquote)),this.options.bulletList!==!1&&n.push(WE.configure(this.options.bulletList)),this.options.code!==!1&&n.push(JE.configure(this.options.code)),this.options.codeBlock!==!1&&n.push(YE.configure(this.options.codeBlock)),this.options.document!==!1&&n.push(XE.configure(this.options.document)),this.options.dropcursor!==!1&&n.push(tM.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&n.push(uM.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&n.push(cM.configure(this.options.hardBreak)),this.options.heading!==!1&&n.push(dM.configure(this.options.heading)),this.options.history!==!1&&n.push(wM.configure(this.options.history)),this.options.horizontalRule!==!1&&n.push(SM.configure(this.options.horizontalRule)),this.options.italic!==!1&&n.push(NM.configure(this.options.italic)),this.options.listItem!==!1&&n.push(Qd.configure(this.options.listItem)),this.options.orderedList!==!1&&n.push(AM.configure(this.options.orderedList)),this.options.paragraph!==!1&&n.push(OM.configure(this.options.paragraph)),this.options.strike!==!1&&n.push(PM.configure(this.options.strike)),this.options.text!==!1&&n.push(LM.configure(this.options.text)),n}}),zM=n=>{if(!n.children.length)return;const e=n.querySelectorAll("span");e&&e.forEach(t=>{var r,i;const s=t.getAttribute("style"),a=(i=(r=t.parentElement)===null||r===void 0?void 0:r.closest("span"))===null||i===void 0?void 0:i.getAttribute("style");t.setAttribute("style",`${a};${s}`)})},wd=sn.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!1}},parseHTML(){return[{tag:"span",getAttrs:n=>n.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&zM(n),{}):!1}]},renderHTML({HTMLAttributes:n}){return["span",Ie(this.options.HTMLAttributes,n),0]},addCommands(){return{removeEmptyTextStyle:()=>({tr:n})=>{const{selection:e}=n;return n.doc.nodesBetween(e.from,e.to,(t,r)=>{if(t.isTextblock)return!0;t.marks.filter(i=>i.type===this.type).some(i=>Object.values(i.attrs).some(s=>!!s))||n.removeMark(r,r+t.nodeSize,this.type)}),!0}}}}),jM=Xe.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:n=>{var e;return(e=n.style.color)===null||e===void 0?void 0:e.replace(/['"]+/g,"")},renderHTML:n=>n.color?{style:`color: ${n.color}`}:{}}}}]},addCommands(){return{setColor:n=>({chain:e})=>e().setMark("textStyle",{color:n}).run(),unsetColor:()=>({chain:n})=>n().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),FM=Xe.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:n=>{const e=n.style.textAlign;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:n=>n.textAlign?{style:`text-align: ${n.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:n=>({commands:e})=>this.options.alignments.includes(n)?this.options.types.map(t=>e.updateAttributes(t,{textAlign:n})).every(t=>t):!1,unsetTextAlign:()=>({commands:n})=>this.options.types.map(e=>n.resetAttributes(e,"textAlign")).every(e=>e),toggleTextAlign:n=>({editor:e,commands:t})=>this.options.alignments.includes(n)?e.isActive({textAlign:n})?t.unsetTextAlign():t.setTextAlign(n):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),BM=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,_M=tt.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:n}){return["img",Ie(this.options.HTMLAttributes,n)]},addCommands(){return{setImage:n=>({commands:e})=>e.insertContent({type:this.name,attrs:n})}},addInputRules(){return[P1({find:BM,type:this.type,getAttributes:n=>{const[,,e,t,r]=n;return{src:t,alt:e,title:r}}})]}}),HM="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",$M="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",Ji=(n,e)=>{for(const t in e)n[t]=e[t];return n},Yd="numeric",Xd="ascii",Zd="alpha",qo="asciinumeric",Vo="alphanumeric",ef="domain",_1="emoji",VM="scheme",UM="slashscheme",Sd="whitespace";function WM(n,e){return n in e||(e[n]=[]),e[n]}function Yr(n,e,t){e[Yd]&&(e[qo]=!0,e[Vo]=!0),e[Xd]&&(e[qo]=!0,e[Zd]=!0),e[qo]&&(e[Vo]=!0),e[Zd]&&(e[Vo]=!0),e[Vo]&&(e[ef]=!0),e[_1]&&(e[ef]=!0);for(const r in e){const i=WM(r,t);i.indexOf(n)<0&&i.push(n)}}function KM(n,e){const t={};for(const r in e)e[r].indexOf(n)>=0&&(t[r]=!0);return t}function Ft(n=null){this.j={},this.jr=[],this.jd=null,this.t=n}Ft.groups={};Ft.prototype={accepts(){return!!this.t},go(n){const e=this,t=e.j[n];if(t)return t;for(let r=0;r<e.jr.length;r++){const i=e.jr[r][0],s=e.jr[r][1];if(s&&i.test(n))return s}return e.jd},has(n,e=!1){return e?n in this.j:!!this.go(n)},ta(n,e,t,r){for(let i=0;i<n.length;i++)this.tt(n[i],e,t,r)},tr(n,e,t,r){r=r||Ft.groups;let i;return e&&e.j?i=e:(i=new Ft(e),t&&r&&Yr(e,t,r)),this.jr.push([n,i]),i},ts(n,e,t,r){let i=this;const s=n.length;if(!s)return i;for(let a=0;a<s-1;a++)i=i.tt(n[a]);return i.tt(n[s-1],e,t,r)},tt(n,e,t,r){r=r||Ft.groups;const i=this;if(e&&e.j)return i.j[n]=e,e;const s=e;let a,u=i.go(n);if(u?(a=new Ft,Ji(a.j,u.j),a.jr.push.apply(a.jr,u.jr),a.jd=u.jd,a.t=u.t):a=new Ft,s){if(r)if(a.t&&typeof a.t=="string"){const d=Ji(KM(a.t,r),t);Yr(s,d,r)}else t&&Yr(s,t,r);a.t=s}return i.j[n]=a,a}};const fe=(n,e,t,r,i)=>n.ta(e,t,r,i),$e=(n,e,t,r,i)=>n.tr(e,t,r,i),S0=(n,e,t,r,i)=>n.ts(e,t,r,i),H=(n,e,t,r,i)=>n.tt(e,t,r,i),_n="WORD",tf="UWORD",H1="ASCIINUMERICAL",$1="ALPHANUMERICAL",cs="LOCALHOST",nf="TLD",rf="UTLD",Jl="SCHEME",Bi="SLASH_SCHEME",qf="NUM",of="WS",Jf="NL",Jo="OPENBRACE",Go="CLOSEBRACE",da="OPENBRACKET",fa="CLOSEBRACKET",ha="OPENPAREN",pa="CLOSEPAREN",ma="OPENANGLEBRACKET",ga="CLOSEANGLEBRACKET",ya="FULLWIDTHLEFTPAREN",va="FULLWIDTHRIGHTPAREN",xa="LEFTCORNERBRACKET",ka="RIGHTCORNERBRACKET",wa="LEFTWHITECORNERBRACKET",Sa="RIGHTWHITECORNERBRACKET",Ca="FULLWIDTHLESSTHAN",ba="FULLWIDTHGREATERTHAN",Ea="AMPERSAND",Ma="APOSTROPHE",Na="ASTERISK",mr="AT",Ta="BACKSLASH",Aa="BACKTICK",Oa="CARET",yr="COLON",Gf="COMMA",Ra="DOLLAR",Cn="DOT",Da="EQUALS",Qf="EXCLAMATION",tn="HYPHEN",Qo="PERCENT",Pa="PIPE",La="PLUS",Ia="POUND",Yo="QUERY",Yf="QUOTE",V1="FULLWIDTHMIDDLEDOT",Xf="SEMI",bn="SLASH",Xo="TILDE",za="UNDERSCORE",U1="EMOJI",ja="SYM";var W1=Object.freeze({__proto__:null,ALPHANUMERICAL:$1,AMPERSAND:Ea,APOSTROPHE:Ma,ASCIINUMERICAL:H1,ASTERISK:Na,AT:mr,BACKSLASH:Ta,BACKTICK:Aa,CARET:Oa,CLOSEANGLEBRACKET:ga,CLOSEBRACE:Go,CLOSEBRACKET:fa,CLOSEPAREN:pa,COLON:yr,COMMA:Gf,DOLLAR:Ra,DOT:Cn,EMOJI:U1,EQUALS:Da,EXCLAMATION:Qf,FULLWIDTHGREATERTHAN:ba,FULLWIDTHLEFTPAREN:ya,FULLWIDTHLESSTHAN:Ca,FULLWIDTHMIDDLEDOT:V1,FULLWIDTHRIGHTPAREN:va,HYPHEN:tn,LEFTCORNERBRACKET:xa,LEFTWHITECORNERBRACKET:wa,LOCALHOST:cs,NL:Jf,NUM:qf,OPENANGLEBRACKET:ma,OPENBRACE:Jo,OPENBRACKET:da,OPENPAREN:ha,PERCENT:Qo,PIPE:Pa,PLUS:La,POUND:Ia,QUERY:Yo,QUOTE:Yf,RIGHTCORNERBRACKET:ka,RIGHTWHITECORNERBRACKET:Sa,SCHEME:Jl,SEMI:Xf,SLASH:bn,SLASH_SCHEME:Bi,SYM:ja,TILDE:Xo,TLD:nf,UNDERSCORE:za,UTLD:rf,UWORD:tf,WORD:_n,WS:of});const Fn=/[a-z]/,Bo=new RegExp("\\p{L}","u"),Cd=new RegExp("\\p{Emoji}","u"),Bn=/\d/,bd=/\s/,C0="\r",Ed=`
`,qM="",JM="",Md="";let Il=null,zl=null;function GM(n=[]){const e={};Ft.groups=e;const t=new Ft;Il==null&&(Il=b0(HM)),zl==null&&(zl=b0($M)),H(t,"'",Ma),H(t,"{",Jo),H(t,"}",Go),H(t,"[",da),H(t,"]",fa),H(t,"(",ha),H(t,")",pa),H(t,"<",ma),H(t,">",ga),H(t,"",ya),H(t,"",va),H(t,"",xa),H(t,"",ka),H(t,"",wa),H(t,"",Sa),H(t,"",Ca),H(t,"",ba),H(t,"&",Ea),H(t,"*",Na),H(t,"@",mr),H(t,"`",Aa),H(t,"^",Oa),H(t,":",yr),H(t,",",Gf),H(t,"$",Ra),H(t,".",Cn),H(t,"=",Da),H(t,"!",Qf),H(t,"-",tn),H(t,"%",Qo),H(t,"|",Pa),H(t,"+",La),H(t,"#",Ia),H(t,"?",Yo),H(t,'"',Yf),H(t,"/",bn),H(t,";",Xf),H(t,"~",Xo),H(t,"_",za),H(t,"\\",Ta),H(t,"",V1);const r=$e(t,Bn,qf,{[Yd]:!0});$e(r,Bn,r);const i=$e(r,Fn,H1,{[qo]:!0}),s=$e(r,Bo,$1,{[Vo]:!0}),a=$e(t,Fn,_n,{[Xd]:!0});$e(a,Bn,i),$e(a,Fn,a),$e(i,Bn,i),$e(i,Fn,i);const u=$e(t,Bo,tf,{[Zd]:!0});$e(u,Fn),$e(u,Bn,s),$e(u,Bo,u),$e(s,Bn,s),$e(s,Fn),$e(s,Bo,s);const d=H(t,Ed,Jf,{[Sd]:!0}),f=H(t,C0,of,{[Sd]:!0}),p=$e(t,bd,of,{[Sd]:!0});H(t,Md,p),H(f,Ed,d),H(f,Md,p),$e(f,bd,p),H(p,C0),H(p,Ed),$e(p,bd,p),H(p,Md,p);const g=$e(t,Cd,U1,{[_1]:!0});H(g,"#"),$e(g,Cd,g),H(g,qM,g);const v=H(g,JM);H(v,"#"),$e(v,Cd,g);const x=[[Fn,a],[Bn,i]],k=[[Fn,null],[Bo,u],[Bn,s]];for(let S=0;S<Il.length;S++)dr(t,Il[S],nf,_n,x);for(let S=0;S<zl.length;S++)dr(t,zl[S],rf,tf,k);Yr(nf,{tld:!0,ascii:!0},e),Yr(rf,{utld:!0,alpha:!0},e),dr(t,"file",Jl,_n,x),dr(t,"mailto",Jl,_n,x),dr(t,"http",Bi,_n,x),dr(t,"https",Bi,_n,x),dr(t,"ftp",Bi,_n,x),dr(t,"ftps",Bi,_n,x),Yr(Jl,{scheme:!0,ascii:!0},e),Yr(Bi,{slashscheme:!0,ascii:!0},e),n=n.sort((S,C)=>S[0]>C[0]?1:-1);for(let S=0;S<n.length;S++){const C=n[S][0],P=n[S][1]?{[VM]:!0}:{[UM]:!0};C.indexOf("-")>=0?P[ef]=!0:Fn.test(C)?Bn.test(C)?P[qo]=!0:P[Xd]=!0:P[Yd]=!0,S0(t,C,C,P)}return S0(t,"localhost",cs,{ascii:!0}),t.jd=new Ft(ja),{start:t,tokens:Ji({groups:e},W1)}}function K1(n,e){const t=QM(e.replace(/[A-Z]/g,u=>u.toLowerCase())),r=t.length,i=[];let s=0,a=0;for(;a<r;){let u=n,d=null,f=0,p=null,g=-1,v=-1;for(;a<r&&(d=u.go(t[a]));)u=d,u.accepts()?(g=0,v=0,p=u):g>=0&&(g+=t[a].length,v++),f+=t[a].length,s+=t[a].length,a++;s-=g,a-=v,f-=g,i.push({t:p.t,v:e.slice(s-f,s),s:s-f,e:s})}return i}function QM(n){const e=[],t=n.length;let r=0;for(;r<t;){let i=n.charCodeAt(r),s,a=i<55296||i>56319||r+1===t||(s=n.charCodeAt(r+1))<56320||s>57343?n[r]:n.slice(r,r+2);e.push(a),r+=a.length}return e}function dr(n,e,t,r,i){let s;const a=e.length;for(let u=0;u<a-1;u++){const d=e[u];n.j[d]?s=n.j[d]:(s=new Ft(r),s.jr=i.slice(),n.j[d]=s),n=s}return s=new Ft(t),s.jr=i.slice(),n.j[e[a-1]]=s,s}function b0(n){const e=[],t=[];let r=0,i="0123456789";for(;r<n.length;){let s=0;for(;i.indexOf(n[r+s])>=0;)s++;if(s>0){e.push(t.join(""));for(let a=parseInt(n.substring(r,r+s),10);a>0;a--)t.pop();r+=s}else t.push(n[r]),r++}return e}const ds={defaultProtocol:"http",events:null,format:E0,formatHref:E0,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Zf(n,e=null){let t=Ji({},ds);n&&(t=Ji(t,n instanceof Zf?n.o:n));const r=t.ignoreTags,i=[];for(let s=0;s<r.length;s++)i.push(r[s].toUpperCase());this.o=t,e&&(this.defaultRender=e),this.ignoreTags=i}Zf.prototype={o:ds,ignoreTags:[],defaultRender(n){return n},check(n){return this.get("validate",n.toString(),n)},get(n,e,t){const r=e!=null;let i=this.o[n];return i&&(typeof i=="object"?(i=t.t in i?i[t.t]:ds[n],typeof i=="function"&&r&&(i=i(e,t))):typeof i=="function"&&r&&(i=i(e,t.t,t)),i)},getObj(n,e,t){let r=this.o[n];return typeof r=="function"&&e!=null&&(r=r(e,t.t,t)),r},render(n){const e=n.render(this);return(this.get("render",null,n)||this.defaultRender)(e,n.t,n)}};function E0(n){return n}function q1(n,e){this.t="token",this.v=n,this.tk=e}q1.prototype={isLink:!1,toString(){return this.v},toHref(n){return this.toString()},toFormattedString(n){const e=this.toString(),t=n.get("truncate",e,this),r=n.get("format",e,this);return t&&r.length>t?r.substring(0,t)+"":r},toFormattedHref(n){return n.get("formatHref",this.toHref(n.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(n=ds.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(n),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(n){return{type:this.t,value:this.toFormattedString(n),isLink:this.isLink,href:this.toFormattedHref(n),start:this.startIndex(),end:this.endIndex()}},validate(n){return n.get("validate",this.toString(),this)},render(n){const e=this,t=this.toHref(n.get("defaultProtocol")),r=n.get("formatHref",t,this),i=n.get("tagName",t,e),s=this.toFormattedString(n),a={},u=n.get("className",t,e),d=n.get("target",t,e),f=n.get("rel",t,e),p=n.getObj("attributes",t,e),g=n.getObj("events",t,e);return a.href=r,u&&(a.class=u),d&&(a.target=d),f&&(a.rel=f),p&&Ji(a,p),{tagName:i,attributes:a,content:s,eventListeners:g}}};function Ya(n,e){class t extends q1{constructor(i,s){super(i,s),this.t=n}}for(const r in e)t.prototype[r]=e[r];return t.t=n,t}const M0=Ya("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),N0=Ya("text"),YM=Ya("nl"),jl=Ya("url",{isLink:!0,toHref(n=ds.defaultProtocol){return this.hasProtocol()?this.v:`${n}://${this.v}`},hasProtocol(){const n=this.tk;return n.length>=2&&n[0].t!==cs&&n[1].t===yr}}),en=n=>new Ft(n);function XM({groups:n}){const e=n.domain.concat([Ea,Na,mr,Ta,Aa,Oa,Ra,Da,tn,qf,Qo,Pa,La,Ia,bn,ja,Xo,za]),t=[Ma,yr,Gf,Cn,Qf,Qo,Yo,Yf,Xf,ma,ga,Jo,Go,fa,da,ha,pa,ya,va,xa,ka,wa,Sa,Ca,ba],r=[Ea,Ma,Na,Ta,Aa,Oa,Ra,Da,tn,Jo,Go,Qo,Pa,La,Ia,Yo,bn,ja,Xo,za],i=en(),s=H(i,Xo);fe(s,r,s),fe(s,n.domain,s);const a=en(),u=en(),d=en();fe(i,n.domain,a),fe(i,n.scheme,u),fe(i,n.slashscheme,d),fe(a,r,s),fe(a,n.domain,a);const f=H(a,mr);H(s,mr,f),H(u,mr,f),H(d,mr,f);const p=H(s,Cn);fe(p,r,s),fe(p,n.domain,s);const g=en();fe(f,n.domain,g),fe(g,n.domain,g);const v=H(g,Cn);fe(v,n.domain,g);const x=en(M0);fe(v,n.tld,x),fe(v,n.utld,x),H(f,cs,x);const k=H(g,tn);H(k,tn,k),fe(k,n.domain,g),fe(x,n.domain,g),H(x,Cn,v),H(x,tn,k);const S=H(x,yr);fe(S,n.numeric,M0);const C=H(a,tn),M=H(a,Cn);H(C,tn,C),fe(C,n.domain,a),fe(M,r,s),fe(M,n.domain,a);const P=en(jl);fe(M,n.tld,P),fe(M,n.utld,P),fe(P,n.domain,a),fe(P,r,s),H(P,Cn,M),H(P,tn,C),H(P,mr,f);const I=H(P,yr),V=en(jl);fe(I,n.numeric,V);const B=en(jl),K=en();fe(B,e,B),fe(B,t,K),fe(K,e,B),fe(K,t,K),H(P,bn,B),H(V,bn,B);const se=H(u,yr),de=H(d,yr),ue=H(de,bn),te=H(ue,bn);fe(u,n.domain,a),H(u,Cn,M),H(u,tn,C),fe(d,n.domain,a),H(d,Cn,M),H(d,tn,C),fe(se,n.domain,B),H(se,bn,B),H(se,Yo,B),fe(te,n.domain,B),fe(te,e,B),H(te,bn,B);const ye=[[Jo,Go],[da,fa],[ha,pa],[ma,ga],[ya,va],[xa,ka],[wa,Sa],[Ca,ba]];for(let Ce=0;Ce<ye.length;Ce++){const[We,Et]=ye[Ce],Mt=H(B,We);H(K,We,Mt),H(Mt,Et,B);const Ke=en(jl);fe(Mt,e,Ke);const Ne=en();fe(Mt,t),fe(Ke,e,Ke),fe(Ke,t,Ne),fe(Ne,e,Ke),fe(Ne,t,Ne),H(Ke,Et,B),H(Ne,Et,B)}return H(i,cs,P),H(i,Jf,YM),{start:i,tokens:W1}}function ZM(n,e,t){let r=t.length,i=0,s=[],a=[];for(;i<r;){let u=n,d=null,f=null,p=0,g=null,v=-1;for(;i<r&&!(d=u.go(t[i].t));)a.push(t[i++]);for(;i<r&&(f=d||u.go(t[i].t));)d=null,u=f,u.accepts()?(v=0,g=u):v>=0&&v++,i++,p++;if(v<0)i-=p,i<r&&(a.push(t[i]),i++);else{a.length>0&&(s.push(Nd(N0,e,a)),a=[]),i-=v,p-=v;const x=g.t,k=t.slice(i-p,i);s.push(Nd(x,e,k))}}return a.length>0&&s.push(Nd(N0,e,a)),s}function Nd(n,e,t){const r=t[0].s,i=t[t.length-1].e,s=e.slice(r,i);return new n(s,t)}const e2=typeof console<"u"&&console&&console.warn||(()=>{}),t2="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Le={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function n2(){return Ft.groups={},Le.scanner=null,Le.parser=null,Le.tokenQueue=[],Le.pluginQueue=[],Le.customSchemes=[],Le.initialized=!1,Le}function T0(n,e=!1){if(Le.initialized&&e2(`linkifyjs: already initialized - will not register custom scheme "${n}" ${t2}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(n))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Le.customSchemes.push([n,e])}function r2(){Le.scanner=GM(Le.customSchemes);for(let n=0;n<Le.tokenQueue.length;n++)Le.tokenQueue[n][1]({scanner:Le.scanner});Le.parser=XM(Le.scanner.tokens);for(let n=0;n<Le.pluginQueue.length;n++)Le.pluginQueue[n][1]({scanner:Le.scanner,parser:Le.parser});return Le.initialized=!0,Le}function eh(n){return Le.initialized||r2(),ZM(Le.parser.start,n,K1(Le.scanner.start,n))}eh.scan=K1;function J1(n,e=null,t=null){if(e&&typeof e=="object"){if(t)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);t=e,e=null}const r=new Zf(t),i=eh(n),s=[];for(let a=0;a<i.length;a++){const u=i[a];u.isLink&&(!e||u.t===e)&&r.check(u)&&s.push(u.toFormattedObject(r))}return s}function i2(n){return n.length===1?n[0].isLink:n.length===3&&n[1].isLink?["()","[]"].includes(n[0].value+n[2].value):!1}function o2(n){return new Ge({key:new ut("autolink"),appendTransaction:(e,t,r)=>{const i=e.some(f=>f.docChanged)&&!t.doc.eq(r.doc),s=e.some(f=>f.getMeta("preventAutolink"));if(!i||s)return;const{tr:a}=r,u=Nb(t.doc,[...e]);if(Lb(u).forEach(({newRange:f})=>{const p=Ab(r.doc,f,x=>x.isTextblock);let g,v;if(p.length>1?(g=p[0],v=r.doc.textBetween(g.pos,g.pos+g.node.nodeSize,void 0," ")):p.length&&r.doc.textBetween(f.from,f.to," "," ").endsWith(" ")&&(g=p[0],v=r.doc.textBetween(g.pos,f.to,void 0," ")),g&&v){const x=v.split(" ").filter(M=>M!=="");if(x.length<=0)return!1;const k=x[x.length-1],S=g.pos+v.lastIndexOf(k);if(!k)return!1;const C=eh(k).map(M=>M.toObject(n.defaultProtocol));if(!i2(C))return!1;C.filter(M=>M.isLink).map(M=>({...M,from:S+M.start+1,to:S+M.end+1})).filter(M=>r.schema.marks.code?!r.doc.rangeHasMark(M.from,M.to,r.schema.marks.code):!0).filter(M=>n.validate(M.value)).filter(M=>n.shouldAutoLink(M.value)).forEach(M=>{$f(M.from,M.to,r.doc).some(P=>P.mark.type===n.type)||a.addMark(M.from,M.to,n.type.create({href:M.href}))})}}),!!a.steps.length)return a}})}function s2(n){return new Ge({key:new ut("handleClickLink"),props:{handleClick:(e,t,r)=>{var i,s;if(r.button!==0||!e.editable)return!1;let a=r.target;const u=[];for(;a.nodeName!=="DIV";)u.push(a),a=a.parentNode;if(!u.find(v=>v.nodeName==="A"))return!1;const d=D1(e.state,n.type.name),f=r.target,p=(i=f==null?void 0:f.href)!==null&&i!==void 0?i:d.href,g=(s=f==null?void 0:f.target)!==null&&s!==void 0?s:d.target;return f&&p?(window.open(p,g),!0):!1}}})}function l2(n){return new Ge({key:new ut("handlePasteLink"),props:{handlePaste:(e,t,r)=>{const{state:i}=e,{selection:s}=i,{empty:a}=s;if(a)return!1;let u="";r.content.forEach(f=>{u+=f.textContent});const d=J1(u,{defaultProtocol:n.defaultProtocol}).find(f=>f.isLink&&f.value===u);return!u||!d?!1:n.editor.commands.setMark(n.type,{href:d.href})}}})}const a2=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g;function Wr(n,e){const t=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&t.push(i)}),!n||n.replace(a2,"").match(new RegExp(`^(?:(?:${t.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}const u2=sn.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(n=>{if(typeof n=="string"){T0(n);return}T0(n.scheme,n.optionalSlashes)})},onDestroy(){n2()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(n,e)=>!!Wr(n,e.protocols),validate:n=>!!n,shouldAutoLink:n=>!!n}},addAttributes(){return{href:{default:null,parseHTML(n){return n.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:n=>{const e=n.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:t=>!!Wr(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:n}){return this.options.isAllowedUri(n.href,{defaultValidate:e=>!!Wr(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Ie(this.options.HTMLAttributes,n),0]:["a",Ie(this.options.HTMLAttributes,{...n,href:""}),0]},addCommands(){return{setLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:r=>!!Wr(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,n).setMeta("preventAutolink",!0).run():!1},toggleLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:r=>!!Wr(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().toggleMark(this.name,n,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run():!1},unsetLink:()=>({chain:n})=>n().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Tr({find:n=>{const e=[];if(n){const{protocols:t,defaultProtocol:r}=this.options,i=J1(n).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:a=>!!Wr(a,t),protocols:t,defaultProtocol:r}));i.length&&i.forEach(s=>e.push({text:s.value,data:{href:s.href},index:s.start}))}return e},type:this.type,getAttributes:n=>{var e;return{href:(e=n.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const n=[],{protocols:e,defaultProtocol:t}=this.options;return this.options.autolink&&n.push(o2({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!Wr(i,e),protocols:e,defaultProtocol:t}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&n.push(s2({type:this.type})),this.options.linkOnPaste&&n.push(l2({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),n}});var sf,lf;if(typeof WeakMap<"u"){let n=new WeakMap;sf=e=>n.get(e),lf=(e,t)=>(n.set(e,t),t)}else{const n=[];let t=0;sf=r=>{for(let i=0;i<n.length;i+=2)if(n[i]==r)return n[i+1]},lf=(r,i)=>(t==10&&(t=0),n[t++]=r,n[t++]=i)}var Ue=class{constructor(n,e,t,r){this.width=n,this.height=e,this.map=t,this.problems=r}findCell(n){for(let e=0;e<this.map.length;e++){const t=this.map[e];if(t!=n)continue;const r=e%this.width,i=e/this.width|0;let s=r+1,a=i+1;for(let u=1;s<this.width&&this.map[e+u]==t;u++)s++;for(let u=1;a<this.height&&this.map[e+this.width*u]==t;u++)a++;return{left:r,top:i,right:s,bottom:a}}throw new RangeError(`No cell with offset ${n} found`)}colCount(n){for(let e=0;e<this.map.length;e++)if(this.map[e]==n)return e%this.width;throw new RangeError(`No cell with offset ${n} found`)}nextCell(n,e,t){const{left:r,right:i,top:s,bottom:a}=this.findCell(n);return e=="horiz"?(t<0?r==0:i==this.width)?null:this.map[s*this.width+(t<0?r-1:i)]:(t<0?s==0:a==this.height)?null:this.map[r+this.width*(t<0?s-1:a)]}rectBetween(n,e){const{left:t,right:r,top:i,bottom:s}=this.findCell(n),{left:a,right:u,top:d,bottom:f}=this.findCell(e);return{left:Math.min(t,a),top:Math.min(i,d),right:Math.max(r,u),bottom:Math.max(s,f)}}cellsInRect(n){const e=[],t={};for(let r=n.top;r<n.bottom;r++)for(let i=n.left;i<n.right;i++){const s=r*this.width+i,a=this.map[s];t[a]||(t[a]=!0,!(i==n.left&&i&&this.map[s-1]==a||r==n.top&&r&&this.map[s-this.width]==a)&&e.push(a))}return e}positionAt(n,e,t){for(let r=0,i=0;;r++){const s=i+t.child(r).nodeSize;if(r==n){let a=e+n*this.width;const u=(n+1)*this.width;for(;a<u&&this.map[a]<i;)a++;return a==u?s-1:this.map[a]}i=s}}static get(n){return sf(n)||lf(n,c2(n))}};function c2(n){if(n.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+n.type.name);const e=d2(n),t=n.childCount,r=[];let i=0,s=null;const a=[];for(let f=0,p=e*t;f<p;f++)r[f]=0;for(let f=0,p=0;f<t;f++){const g=n.child(f);p++;for(let k=0;;k++){for(;i<r.length&&r[i]!=0;)i++;if(k==g.childCount)break;const S=g.child(k),{colspan:C,rowspan:M,colwidth:P}=S.attrs;for(let I=0;I<M;I++){if(I+f>=t){(s||(s=[])).push({type:"overlong_rowspan",pos:p,n:M-I});break}const V=i+I*e;for(let B=0;B<C;B++){r[V+B]==0?r[V+B]=p:(s||(s=[])).push({type:"collision",row:f,pos:p,n:C-B});const K=P&&P[B];if(K){const se=(V+B)%e*2,de=a[se];de==null||de!=K&&a[se+1]==1?(a[se]=K,a[se+1]=1):de==K&&a[se+1]++}}}i+=C,p+=S.nodeSize}const v=(f+1)*e;let x=0;for(;i<v;)r[i++]==0&&x++;x&&(s||(s=[])).push({type:"missing",row:f,n:x}),p++}(e===0||t===0)&&(s||(s=[])).push({type:"zero_sized"});const u=new Ue(e,t,r,s);let d=!1;for(let f=0;!d&&f<a.length;f+=2)a[f]!=null&&a[f+1]<t&&(d=!0);return d&&f2(u,a,n),u}function d2(n){let e=-1,t=!1;for(let r=0;r<n.childCount;r++){const i=n.child(r);let s=0;if(t)for(let a=0;a<r;a++){const u=n.child(a);for(let d=0;d<u.childCount;d++){const f=u.child(d);a+f.attrs.rowspan>r&&(s+=f.attrs.colspan)}}for(let a=0;a<i.childCount;a++){const u=i.child(a);s+=u.attrs.colspan,u.attrs.rowspan>1&&(t=!0)}e==-1?e=s:e!=s&&(e=Math.max(e,s))}return e}function f2(n,e,t){n.problems||(n.problems=[]);const r={};for(let i=0;i<n.map.length;i++){const s=n.map[i];if(r[s])continue;r[s]=!0;const a=t.nodeAt(s);if(!a)throw new RangeError(`No cell with offset ${s} found`);let u=null;const d=a.attrs;for(let f=0;f<d.colspan;f++){const p=(i+f)%n.width,g=e[p*2];g!=null&&(!d.colwidth||d.colwidth[f]!=g)&&((u||(u=h2(d)))[f]=g)}u&&n.problems.unshift({type:"colwidth mismatch",pos:s,colwidth:u})}}function h2(n){if(n.colwidth)return n.colwidth.slice();const e=[];for(let t=0;t<n.colspan;t++)e.push(0);return e}function Ct(n){let e=n.cached.tableNodeTypes;if(!e){e=n.cached.tableNodeTypes={};for(const t in n.nodes){const r=n.nodes[t],i=r.spec.tableRole;i&&(e[i]=r)}}return e}var vr=new ut("selectingCells");function Qi(n){for(let e=n.depth-1;e>0;e--)if(n.node(e).type.spec.tableRole=="row")return n.node(0).resolve(n.before(e+1));return null}function p2(n){for(let e=n.depth;e>0;e--){const t=n.node(e).type.spec.tableRole;if(t==="cell"||t==="header_cell")return n.node(e)}return null}function gn(n){const e=n.selection.$head;for(let t=e.depth;t>0;t--)if(e.node(t).type.spec.tableRole=="row")return!0;return!1}function Xa(n){const e=n.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const t=Qi(e.$head)||m2(e.$head);if(t)return t;throw new RangeError(`No cell found around position ${e.head}`)}function m2(n){for(let e=n.nodeAfter,t=n.pos;e;e=e.firstChild,t++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return n.doc.resolve(t)}for(let e=n.nodeBefore,t=n.pos;e;e=e.lastChild,t--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return n.doc.resolve(t-e.nodeSize)}}function af(n){return n.parent.type.spec.tableRole=="row"&&!!n.nodeAfter}function g2(n){return n.node(0).resolve(n.pos+n.nodeAfter.nodeSize)}function th(n,e){return n.depth==e.depth&&n.pos>=e.start(-1)&&n.pos<=e.end(-1)}function G1(n,e,t){const r=n.node(-1),i=Ue.get(r),s=n.start(-1),a=i.nextCell(n.pos-s,e,t);return a==null?null:n.node(0).resolve(s+a)}function ai(n,e,t=1){const r={...n,colspan:n.colspan-t};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,t),r.colwidth.some(i=>i>0)||(r.colwidth=null)),r}function Q1(n,e,t=1){const r={...n,colspan:n.colspan+t};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let i=0;i<t;i++)r.colwidth.splice(e,0,0)}return r}function y2(n,e,t){const r=Ct(e.type.schema).header_cell;for(let i=0;i<n.height;i++)if(e.nodeAt(n.map[t+i*n.width]).type!=r)return!1;return!0}var Re=class Hn extends le{constructor(e,t=e){const r=e.node(-1),i=Ue.get(r),s=e.start(-1),a=i.rectBetween(e.pos-s,t.pos-s),u=e.node(0),d=i.cellsInRect(a).filter(p=>p!=t.pos-s);d.unshift(t.pos-s);const f=d.map(p=>{const g=r.nodeAt(p);if(!g)throw RangeError(`No cell with offset ${p} found`);const v=s+p+1;return new Ny(u.resolve(v),u.resolve(v+g.content.size))});super(f[0].$from,f[0].$to,f),this.$anchorCell=e,this.$headCell=t}map(e,t){const r=e.resolve(t.map(this.$anchorCell.pos)),i=e.resolve(t.map(this.$headCell.pos));if(af(r)&&af(i)&&th(r,i)){const s=this.$anchorCell.node(-1)!=r.node(-1);return s&&this.isRowSelection()?Hn.rowSelection(r,i):s&&this.isColSelection()?Hn.colSelection(r,i):new Hn(r,i)}return re.between(r,i)}content(){const e=this.$anchorCell.node(-1),t=Ue.get(e),r=this.$anchorCell.start(-1),i=t.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),s={},a=[];for(let d=i.top;d<i.bottom;d++){const f=[];for(let p=d*t.width+i.left,g=i.left;g<i.right;g++,p++){const v=t.map[p];if(s[v])continue;s[v]=!0;const x=t.findCell(v);let k=e.nodeAt(v);if(!k)throw RangeError(`No cell with offset ${v} found`);const S=i.left-x.left,C=x.right-i.right;if(S>0||C>0){let M=k.attrs;if(S>0&&(M=ai(M,0,S)),C>0&&(M=ai(M,M.colspan-C,C)),x.left<i.left){if(k=k.type.createAndFill(M),!k)throw RangeError(`Could not create cell with attrs ${JSON.stringify(M)}`)}else k=k.type.create(M,k.content)}if(x.top<i.top||x.bottom>i.bottom){const M={...k.attrs,rowspan:Math.min(x.bottom,i.bottom)-Math.max(x.top,i.top)};x.top<i.top?k=k.type.createAndFill(M):k=k.type.create(M,k.content)}f.push(k)}a.push(e.child(d).copy(L.from(f)))}const u=this.isColSelection()&&this.isRowSelection()?e:a;return new U(L.from(u),1,1)}replace(e,t=U.empty){const r=e.steps.length,i=this.ranges;for(let a=0;a<i.length;a++){const{$from:u,$to:d}=i[a],f=e.mapping.slice(r);e.replace(f.map(u.pos),f.map(d.pos),a?U.empty:t)}const s=le.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);s&&e.setSelection(s)}replaceWith(e,t){this.replace(e,new U(L.from(t),0,0))}forEachCell(e){const t=this.$anchorCell.node(-1),r=Ue.get(t),i=this.$anchorCell.start(-1),s=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i));for(let a=0;a<s.length;a++)e(t.nodeAt(s[a]),i+s[a])}isColSelection(){const e=this.$anchorCell.index(-1),t=this.$headCell.index(-1);if(Math.min(e,t)>0)return!1;const r=e+this.$anchorCell.nodeAfter.attrs.rowspan,i=t+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,i)==this.$headCell.node(-1).childCount}static colSelection(e,t=e){const r=e.node(-1),i=Ue.get(r),s=e.start(-1),a=i.findCell(e.pos-s),u=i.findCell(t.pos-s),d=e.node(0);return a.top<=u.top?(a.top>0&&(e=d.resolve(s+i.map[a.left])),u.bottom<i.height&&(t=d.resolve(s+i.map[i.width*(i.height-1)+u.right-1]))):(u.top>0&&(t=d.resolve(s+i.map[u.left])),a.bottom<i.height&&(e=d.resolve(s+i.map[i.width*(i.height-1)+a.right-1]))),new Hn(e,t)}isRowSelection(){const e=this.$anchorCell.node(-1),t=Ue.get(e),r=this.$anchorCell.start(-1),i=t.colCount(this.$anchorCell.pos-r),s=t.colCount(this.$headCell.pos-r);if(Math.min(i,s)>0)return!1;const a=i+this.$anchorCell.nodeAfter.attrs.colspan,u=s+this.$headCell.nodeAfter.attrs.colspan;return Math.max(a,u)==t.width}eq(e){return e instanceof Hn&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,t=e){const r=e.node(-1),i=Ue.get(r),s=e.start(-1),a=i.findCell(e.pos-s),u=i.findCell(t.pos-s),d=e.node(0);return a.left<=u.left?(a.left>0&&(e=d.resolve(s+i.map[a.top*i.width])),u.right<i.width&&(t=d.resolve(s+i.map[i.width*(u.top+1)-1]))):(u.left>0&&(t=d.resolve(s+i.map[u.top*i.width])),a.right<i.width&&(e=d.resolve(s+i.map[i.width*(a.top+1)-1]))),new Hn(e,t)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,t){return new Hn(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){return new Hn(e.resolve(t),e.resolve(r))}getBookmark(){return new v2(this.$anchorCell.pos,this.$headCell.pos)}};Re.prototype.visible=!1;le.jsonID("cell",Re);var v2=class Y1{constructor(e,t){this.anchor=e,this.head=t}map(e){return new Y1(e.map(this.anchor),e.map(this.head))}resolve(e){const t=e.resolve(this.anchor),r=e.resolve(this.head);return t.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&t.index()<t.parent.childCount&&r.index()<r.parent.childCount&&th(t,r)?new Re(t,r):le.near(r,1)}};function x2(n){if(!(n.selection instanceof Re))return null;const e=[];return n.selection.forEachCell((t,r)=>{e.push(St.node(r,r+t.nodeSize,{class:"selectedCell"}))}),Fe.create(n.doc,e)}function k2({$from:n,$to:e}){if(n.pos==e.pos||n.pos<e.pos-6)return!1;let t=n.pos,r=e.pos,i=n.depth;for(;i>=0&&!(n.after(i+1)<n.end(i));i--,t++);for(let s=e.depth;s>=0&&!(e.before(s+1)>e.start(s));s--,r--);return t==r&&/row|table/.test(n.node(i).type.spec.tableRole)}function w2({$from:n,$to:e}){let t,r;for(let i=n.depth;i>0;i--){const s=n.node(i);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){t=s;break}}for(let i=e.depth;i>0;i--){const s=e.node(i);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){r=s;break}}return t!==r&&e.parentOffset===0}function S2(n,e,t){const r=(e||n).selection,i=(e||n).doc;let s,a;if(r instanceof ne&&(a=r.node.type.spec.tableRole)){if(a=="cell"||a=="header_cell")s=Re.create(i,r.from);else if(a=="row"){const u=i.resolve(r.from+1);s=Re.rowSelection(u,u)}else if(!t){const u=Ue.get(r.node),d=r.from+1,f=d+u.map[u.width*u.height-1];s=Re.create(i,d+1,f)}}else r instanceof re&&k2(r)?s=re.create(i,r.from):r instanceof re&&w2(r)&&(s=re.create(i,r.$from.start(),r.$from.end()));return s&&(e||(e=n.tr)).setSelection(s),e}var C2=new ut("fix-tables");function X1(n,e,t,r){const i=n.childCount,s=e.childCount;e:for(let a=0,u=0;a<s;a++){const d=e.child(a);for(let f=u,p=Math.min(i,a+3);f<p;f++)if(n.child(f)==d){u=f+1,t+=d.nodeSize;continue e}r(d,t),u<i&&n.child(u).sameMarkup(d)?X1(n.child(u),d,t+1,r):d.nodesBetween(0,d.content.size,r,t+1),t+=d.nodeSize}}function Z1(n,e){let t;const r=(i,s)=>{i.type.spec.tableRole=="table"&&(t=b2(n,i,s,t))};return e?e.doc!=n.doc&&X1(e.doc,n.doc,0,r):n.doc.descendants(r),t}function b2(n,e,t,r){const i=Ue.get(e);if(!i.problems)return r;r||(r=n.tr);const s=[];for(let d=0;d<i.height;d++)s.push(0);for(let d=0;d<i.problems.length;d++){const f=i.problems[d];if(f.type=="collision"){const p=e.nodeAt(f.pos);if(!p)continue;const g=p.attrs;for(let v=0;v<g.rowspan;v++)s[f.row+v]+=f.n;r.setNodeMarkup(r.mapping.map(t+1+f.pos),null,ai(g,g.colspan-f.n,f.n))}else if(f.type=="missing")s[f.row]+=f.n;else if(f.type=="overlong_rowspan"){const p=e.nodeAt(f.pos);if(!p)continue;r.setNodeMarkup(r.mapping.map(t+1+f.pos),null,{...p.attrs,rowspan:p.attrs.rowspan-f.n})}else if(f.type=="colwidth mismatch"){const p=e.nodeAt(f.pos);if(!p)continue;r.setNodeMarkup(r.mapping.map(t+1+f.pos),null,{...p.attrs,colwidth:f.colwidth})}else if(f.type=="zero_sized"){const p=r.mapping.map(t);r.delete(p,p+e.nodeSize)}}let a,u;for(let d=0;d<s.length;d++)s[d]&&(a==null&&(a=d),u=d);for(let d=0,f=t+1;d<i.height;d++){const p=e.child(d),g=f+p.nodeSize,v=s[d];if(v>0){let x="cell";p.firstChild&&(x=p.firstChild.type.spec.tableRole);const k=[];for(let C=0;C<v;C++){const M=Ct(n.schema)[x].createAndFill();M&&k.push(M)}const S=(d==0||a==d-1)&&u==d?f+1:g-1;r.insert(r.mapping.map(S),k)}f=g}return r.setMeta(C2,{fixTables:!0})}function Tn(n){const e=n.selection,t=Xa(n),r=t.node(-1),i=t.start(-1),s=Ue.get(r);return{...e instanceof Re?s.rectBetween(e.$anchorCell.pos-i,e.$headCell.pos-i):s.findCell(t.pos-i),tableStart:i,map:s,table:r}}function ev(n,{map:e,tableStart:t,table:r},i){let s=i>0?-1:0;y2(e,r,i+s)&&(s=i==0||i==e.width?null:0);for(let a=0;a<e.height;a++){const u=a*e.width+i;if(i>0&&i<e.width&&e.map[u-1]==e.map[u]){const d=e.map[u],f=r.nodeAt(d);n.setNodeMarkup(n.mapping.map(t+d),null,Q1(f.attrs,i-e.colCount(d))),a+=f.attrs.rowspan-1}else{const d=s==null?Ct(r.type.schema).cell:r.nodeAt(e.map[u+s]).type,f=e.positionAt(a,i,r);n.insert(n.mapping.map(t+f),d.createAndFill())}}return n}function E2(n,e){if(!gn(n))return!1;if(e){const t=Tn(n);e(ev(n.tr,t,t.left))}return!0}function M2(n,e){if(!gn(n))return!1;if(e){const t=Tn(n);e(ev(n.tr,t,t.right))}return!0}function N2(n,{map:e,table:t,tableStart:r},i){const s=n.mapping.maps.length;for(let a=0;a<e.height;){const u=a*e.width+i,d=e.map[u],f=t.nodeAt(d),p=f.attrs;if(i>0&&e.map[u-1]==d||i<e.width-1&&e.map[u+1]==d)n.setNodeMarkup(n.mapping.slice(s).map(r+d),null,ai(p,i-e.colCount(d)));else{const g=n.mapping.slice(s).map(r+d);n.delete(g,g+f.nodeSize)}a+=p.rowspan}}function T2(n,e){if(!gn(n))return!1;if(e){const t=Tn(n),r=n.tr;if(t.left==0&&t.right==t.map.width)return!1;for(let i=t.right-1;N2(r,t,i),i!=t.left;i--){const s=t.tableStart?r.doc.nodeAt(t.tableStart-1):r.doc;if(!s)throw RangeError("No table found");t.table=s,t.map=Ue.get(s)}e(r)}return!0}function A2(n,e,t){var r;const i=Ct(e.type.schema).header_cell;for(let s=0;s<n.width;s++)if(((r=e.nodeAt(n.map[s+t*n.width]))==null?void 0:r.type)!=i)return!1;return!0}function tv(n,{map:e,tableStart:t,table:r},i){var s;let a=t;for(let f=0;f<i;f++)a+=r.child(f).nodeSize;const u=[];let d=i>0?-1:0;A2(e,r,i+d)&&(d=i==0||i==e.height?null:0);for(let f=0,p=e.width*i;f<e.width;f++,p++)if(i>0&&i<e.height&&e.map[p]==e.map[p-e.width]){const g=e.map[p],v=r.nodeAt(g).attrs;n.setNodeMarkup(t+g,null,{...v,rowspan:v.rowspan+1}),f+=v.colspan-1}else{const g=d==null?Ct(r.type.schema).cell:(s=r.nodeAt(e.map[p+d*e.width]))==null?void 0:s.type,v=g==null?void 0:g.createAndFill();v&&u.push(v)}return n.insert(a,Ct(r.type.schema).row.create(null,u)),n}function O2(n,e){if(!gn(n))return!1;if(e){const t=Tn(n);e(tv(n.tr,t,t.top))}return!0}function R2(n,e){if(!gn(n))return!1;if(e){const t=Tn(n);e(tv(n.tr,t,t.bottom))}return!0}function D2(n,{map:e,table:t,tableStart:r},i){let s=0;for(let f=0;f<i;f++)s+=t.child(f).nodeSize;const a=s+t.child(i).nodeSize,u=n.mapping.maps.length;n.delete(s+r,a+r);const d=new Set;for(let f=0,p=i*e.width;f<e.width;f++,p++){const g=e.map[p];if(!d.has(g)){if(d.add(g),i>0&&g==e.map[p-e.width]){const v=t.nodeAt(g).attrs;n.setNodeMarkup(n.mapping.slice(u).map(g+r),null,{...v,rowspan:v.rowspan-1}),f+=v.colspan-1}else if(i<e.height&&g==e.map[p+e.width]){const v=t.nodeAt(g),x=v.attrs,k=v.type.create({...x,rowspan:v.attrs.rowspan-1},v.content),S=e.positionAt(i+1,f,t);n.insert(n.mapping.slice(u).map(r+S),k),f+=x.colspan-1}}}}function P2(n,e){if(!gn(n))return!1;if(e){const t=Tn(n),r=n.tr;if(t.top==0&&t.bottom==t.map.height)return!1;for(let i=t.bottom-1;D2(r,t,i),i!=t.top;i--){const s=t.tableStart?r.doc.nodeAt(t.tableStart-1):r.doc;if(!s)throw RangeError("No table found");t.table=s,t.map=Ue.get(t.table)}e(r)}return!0}function A0(n){const e=n.content;return e.childCount==1&&e.child(0).isTextblock&&e.child(0).childCount==0}function L2({width:n,height:e,map:t},r){let i=r.top*n+r.left,s=i,a=(r.bottom-1)*n+r.left,u=i+(r.right-r.left-1);for(let d=r.top;d<r.bottom;d++){if(r.left>0&&t[s]==t[s-1]||r.right<n&&t[u]==t[u+1])return!0;s+=n,u+=n}for(let d=r.left;d<r.right;d++){if(r.top>0&&t[i]==t[i-n]||r.bottom<e&&t[a]==t[a+n])return!0;i++,a++}return!1}function O0(n,e){const t=n.selection;if(!(t instanceof Re)||t.$anchorCell.pos==t.$headCell.pos)return!1;const r=Tn(n),{map:i}=r;if(L2(i,r))return!1;if(e){const s=n.tr,a={};let u=L.empty,d,f;for(let p=r.top;p<r.bottom;p++)for(let g=r.left;g<r.right;g++){const v=i.map[p*i.width+g],x=r.table.nodeAt(v);if(!(a[v]||!x))if(a[v]=!0,d==null)d=v,f=x;else{A0(x)||(u=u.append(x.content));const k=s.mapping.map(v+r.tableStart);s.delete(k,k+x.nodeSize)}}if(d==null||f==null)return!0;if(s.setNodeMarkup(d+r.tableStart,null,{...Q1(f.attrs,f.attrs.colspan,r.right-r.left-f.attrs.colspan),rowspan:r.bottom-r.top}),u.size){const p=d+1+f.content.size,g=A0(f)?d+1:p;s.replaceWith(g+r.tableStart,p+r.tableStart,u)}s.setSelection(new Re(s.doc.resolve(d+r.tableStart))),e(s)}return!0}function R0(n,e){const t=Ct(n.schema);return I2(({node:r})=>t[r.type.spec.tableRole])(n,e)}function I2(n){return(e,t)=>{var r;const i=e.selection;let s,a;if(i instanceof Re){if(i.$anchorCell.pos!=i.$headCell.pos)return!1;s=i.$anchorCell.nodeAfter,a=i.$anchorCell.pos}else{if(s=p2(i.$from),!s)return!1;a=(r=Qi(i.$from))==null?void 0:r.pos}if(s==null||a==null||s.attrs.colspan==1&&s.attrs.rowspan==1)return!1;if(t){let u=s.attrs;const d=[],f=u.colwidth;u.rowspan>1&&(u={...u,rowspan:1}),u.colspan>1&&(u={...u,colspan:1});const p=Tn(e),g=e.tr;for(let x=0;x<p.right-p.left;x++)d.push(f?{...u,colwidth:f&&f[x]?[f[x]]:null}:u);let v;for(let x=p.top;x<p.bottom;x++){let k=p.map.positionAt(x,p.left,p.table);x==p.top&&(k+=s.nodeSize);for(let S=p.left,C=0;S<p.right;S++,C++)S==p.left&&x==p.top||g.insert(v=g.mapping.map(k+p.tableStart,1),n({node:s,row:x,col:S}).createAndFill(d[C]))}g.setNodeMarkup(a,n({node:s,row:p.top,col:p.left}),d[0]),i instanceof Re&&g.setSelection(new Re(g.doc.resolve(i.$anchorCell.pos),v?g.doc.resolve(v):void 0)),t(g)}return!0}}function z2(n,e){return function(t,r){if(!gn(t))return!1;const i=Xa(t);if(i.nodeAfter.attrs[n]===e)return!1;if(r){const s=t.tr;t.selection instanceof Re?t.selection.forEachCell((a,u)=>{a.attrs[n]!==e&&s.setNodeMarkup(u,null,{...a.attrs,[n]:e})}):s.setNodeMarkup(i.pos,null,{...i.nodeAfter.attrs,[n]:e}),r(s)}return!0}}function j2(n){return function(e,t){if(!gn(e))return!1;if(t){const r=Ct(e.schema),i=Tn(e),s=e.tr,a=i.map.cellsInRect(n=="column"?{left:i.left,top:0,right:i.right,bottom:i.map.height}:n=="row"?{left:0,top:i.top,right:i.map.width,bottom:i.bottom}:i),u=a.map(d=>i.table.nodeAt(d));for(let d=0;d<a.length;d++)u[d].type==r.header_cell&&s.setNodeMarkup(i.tableStart+a[d],r.cell,u[d].attrs);if(s.steps.length==0)for(let d=0;d<a.length;d++)s.setNodeMarkup(i.tableStart+a[d],r.header_cell,u[d].attrs);t(s)}return!0}}function D0(n,e,t){const r=e.map.cellsInRect({left:0,top:0,right:n=="row"?e.map.width:1,bottom:n=="column"?e.map.height:1});for(let i=0;i<r.length;i++){const s=e.table.nodeAt(r[i]);if(s&&s.type!==t.header_cell)return!1}return!0}function fs(n,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?j2(n):function(t,r){if(!gn(t))return!1;if(r){const i=Ct(t.schema),s=Tn(t),a=t.tr,u=D0("row",s,i),d=D0("column",s,i),p=(n==="column"?u:n==="row"?d:!1)?1:0,g=n=="column"?{left:0,top:p,right:1,bottom:s.map.height}:n=="row"?{left:p,top:0,right:s.map.width,bottom:1}:s,v=n=="column"?d?i.cell:i.header_cell:n=="row"?u?i.cell:i.header_cell:i.cell;s.map.cellsInRect(g).forEach(x=>{const k=x+s.tableStart,S=a.doc.nodeAt(k);S&&a.setNodeMarkup(k,v,S.attrs)}),r(a)}return!0}}fs("row",{useDeprecatedLogic:!0});fs("column",{useDeprecatedLogic:!0});var F2=fs("cell",{useDeprecatedLogic:!0});function B2(n,e){if(e<0){const t=n.nodeBefore;if(t)return n.pos-t.nodeSize;for(let r=n.index(-1)-1,i=n.before();r>=0;r--){const s=n.node(-1).child(r),a=s.lastChild;if(a)return i-1-a.nodeSize;i-=s.nodeSize}}else{if(n.index()<n.parent.childCount-1)return n.pos+n.nodeAfter.nodeSize;const t=n.node(-1);for(let r=n.indexAfter(-1),i=n.after();r<t.childCount;r++){const s=t.child(r);if(s.childCount)return i+1;i+=s.nodeSize}}return null}function P0(n){return function(e,t){if(!gn(e))return!1;const r=B2(Xa(e),n);if(r==null)return!1;if(t){const i=e.doc.resolve(r);t(e.tr.setSelection(re.between(i,g2(i))).scrollIntoView())}return!0}}function _2(n,e){const t=n.selection.$anchor;for(let r=t.depth;r>0;r--)if(t.node(r).type.spec.tableRole=="table")return e&&e(n.tr.delete(t.before(r),t.after(r)).scrollIntoView()),!0;return!1}function Fl(n,e){const t=n.selection;if(!(t instanceof Re))return!1;if(e){const r=n.tr,i=Ct(n.schema).cell.createAndFill().content;t.forEachCell((s,a)=>{s.content.eq(i)||r.replace(r.mapping.map(a+1),r.mapping.map(a+s.nodeSize-1),new U(i,0,0))}),r.docChanged&&e(r)}return!0}function H2(n){if(!n.size)return null;let{content:e,openStart:t,openEnd:r}=n;for(;e.childCount==1&&(t>0&&r>0||e.child(0).type.spec.tableRole=="table");)t--,r--,e=e.child(0).content;const i=e.child(0),s=i.type.spec.tableRole,a=i.type.schema,u=[];if(s=="row")for(let d=0;d<e.childCount;d++){let f=e.child(d).content;const p=d?0:Math.max(0,t-1),g=d<e.childCount-1?0:Math.max(0,r-1);(p||g)&&(f=uf(Ct(a).row,new U(f,p,g)).content),u.push(f)}else if(s=="cell"||s=="header_cell")u.push(t||r?uf(Ct(a).row,new U(e,t,r)).content:e);else return null;return $2(a,u)}function $2(n,e){const t=[];for(let i=0;i<e.length;i++){const s=e[i];for(let a=s.childCount-1;a>=0;a--){const{rowspan:u,colspan:d}=s.child(a).attrs;for(let f=i;f<i+u;f++)t[f]=(t[f]||0)+d}}let r=0;for(let i=0;i<t.length;i++)r=Math.max(r,t[i]);for(let i=0;i<t.length;i++)if(i>=e.length&&e.push(L.empty),t[i]<r){const s=Ct(n).cell.createAndFill(),a=[];for(let u=t[i];u<r;u++)a.push(s);e[i]=e[i].append(L.from(a))}return{height:e.length,width:r,rows:e}}function uf(n,e){const t=n.createAndFill();return new kf(t).replace(0,t.content.size,e).doc}function V2({width:n,height:e,rows:t},r,i){if(n!=r){const s=[],a=[];for(let u=0;u<t.length;u++){const d=t[u],f=[];for(let p=s[u]||0,g=0;p<r;g++){let v=d.child(g%d.childCount);p+v.attrs.colspan>r&&(v=v.type.createChecked(ai(v.attrs,v.attrs.colspan,p+v.attrs.colspan-r),v.content)),f.push(v),p+=v.attrs.colspan;for(let x=1;x<v.attrs.rowspan;x++)s[u+x]=(s[u+x]||0)+v.attrs.colspan}a.push(L.from(f))}t=a,n=r}if(e!=i){const s=[];for(let a=0,u=0;a<i;a++,u++){const d=[],f=t[u%e];for(let p=0;p<f.childCount;p++){let g=f.child(p);a+g.attrs.rowspan>i&&(g=g.type.create({...g.attrs,rowspan:Math.max(1,i-g.attrs.rowspan)},g.content)),d.push(g)}s.push(L.from(d))}t=s,e=i}return{width:n,height:e,rows:t}}function U2(n,e,t,r,i,s,a){const u=n.doc.type.schema,d=Ct(u);let f,p;if(i>e.width)for(let g=0,v=0;g<e.height;g++){const x=t.child(g);v+=x.nodeSize;const k=[];let S;x.lastChild==null||x.lastChild.type==d.cell?S=f||(f=d.cell.createAndFill()):S=p||(p=d.header_cell.createAndFill());for(let C=e.width;C<i;C++)k.push(S);n.insert(n.mapping.slice(a).map(v-1+r),k)}if(s>e.height){const g=[];for(let k=0,S=(e.height-1)*e.width;k<Math.max(e.width,i);k++){const C=k>=e.width?!1:t.nodeAt(e.map[S+k]).type==d.header_cell;g.push(C?p||(p=d.header_cell.createAndFill()):f||(f=d.cell.createAndFill()))}const v=d.row.create(null,L.from(g)),x=[];for(let k=e.height;k<s;k++)x.push(v);n.insert(n.mapping.slice(a).map(r+t.nodeSize-2),x)}return!!(f||p)}function L0(n,e,t,r,i,s,a,u){if(a==0||a==e.height)return!1;let d=!1;for(let f=i;f<s;f++){const p=a*e.width+f,g=e.map[p];if(e.map[p-e.width]==g){d=!0;const v=t.nodeAt(g),{top:x,left:k}=e.findCell(g);n.setNodeMarkup(n.mapping.slice(u).map(g+r),null,{...v.attrs,rowspan:a-x}),n.insert(n.mapping.slice(u).map(e.positionAt(a,k,t)),v.type.createAndFill({...v.attrs,rowspan:x+v.attrs.rowspan-a})),f+=v.attrs.colspan-1}}return d}function I0(n,e,t,r,i,s,a,u){if(a==0||a==e.width)return!1;let d=!1;for(let f=i;f<s;f++){const p=f*e.width+a,g=e.map[p];if(e.map[p-1]==g){d=!0;const v=t.nodeAt(g),x=e.colCount(g),k=n.mapping.slice(u).map(g+r);n.setNodeMarkup(k,null,ai(v.attrs,a-x,v.attrs.colspan-(a-x))),n.insert(k+v.nodeSize,v.type.createAndFill(ai(v.attrs,0,a-x))),f+=v.attrs.rowspan-1}}return d}function z0(n,e,t,r,i){let s=t?n.doc.nodeAt(t-1):n.doc;if(!s)throw new Error("No table found");let a=Ue.get(s);const{top:u,left:d}=r,f=d+i.width,p=u+i.height,g=n.tr;let v=0;function x(){if(s=t?g.doc.nodeAt(t-1):g.doc,!s)throw new Error("No table found");a=Ue.get(s),v=g.mapping.maps.length}U2(g,a,s,t,f,p,v)&&x(),L0(g,a,s,t,d,f,u,v)&&x(),L0(g,a,s,t,d,f,p,v)&&x(),I0(g,a,s,t,u,p,d,v)&&x(),I0(g,a,s,t,u,p,f,v)&&x();for(let k=u;k<p;k++){const S=a.positionAt(k,d,s),C=a.positionAt(k,f,s);g.replace(g.mapping.slice(v).map(S+t),g.mapping.slice(v).map(C+t),new U(i.rows[k-u],0,0))}x(),g.setSelection(new Re(g.doc.resolve(t+a.positionAt(u,d,s)),g.doc.resolve(t+a.positionAt(p-1,f-1,s)))),e(g)}var W2=Rf({ArrowLeft:Bl("horiz",-1),ArrowRight:Bl("horiz",1),ArrowUp:Bl("vert",-1),ArrowDown:Bl("vert",1),"Shift-ArrowLeft":_l("horiz",-1),"Shift-ArrowRight":_l("horiz",1),"Shift-ArrowUp":_l("vert",-1),"Shift-ArrowDown":_l("vert",1),Backspace:Fl,"Mod-Backspace":Fl,Delete:Fl,"Mod-Delete":Fl});function Gl(n,e,t){return t.eq(n.selection)?!1:(e&&e(n.tr.setSelection(t).scrollIntoView()),!0)}function Bl(n,e){return(t,r,i)=>{if(!i)return!1;const s=t.selection;if(s instanceof Re)return Gl(t,r,le.near(s.$headCell,e));if(n!="horiz"&&!s.empty)return!1;const a=nv(i,n,e);if(a==null)return!1;if(n=="horiz")return Gl(t,r,le.near(t.doc.resolve(s.head+e),e));{const u=t.doc.resolve(a),d=G1(u,n,e);let f;return d?f=le.near(d,1):e<0?f=le.near(t.doc.resolve(u.before(-1)),-1):f=le.near(t.doc.resolve(u.after(-1)),1),Gl(t,r,f)}}}function _l(n,e){return(t,r,i)=>{if(!i)return!1;const s=t.selection;let a;if(s instanceof Re)a=s;else{const d=nv(i,n,e);if(d==null)return!1;a=new Re(t.doc.resolve(d))}const u=G1(a.$headCell,n,e);return u?Gl(t,r,new Re(a.$anchorCell,u)):!1}}function K2(n,e){const t=n.state.doc,r=Qi(t.resolve(e));return r?(n.dispatch(n.state.tr.setSelection(new Re(r))),!0):!1}function q2(n,e,t){if(!gn(n.state))return!1;let r=H2(t);const i=n.state.selection;if(i instanceof Re){r||(r={width:1,height:1,rows:[L.from(uf(Ct(n.state.schema).cell,t))]});const s=i.$anchorCell.node(-1),a=i.$anchorCell.start(-1),u=Ue.get(s).rectBetween(i.$anchorCell.pos-a,i.$headCell.pos-a);return r=V2(r,u.right-u.left,u.bottom-u.top),z0(n.state,n.dispatch,a,u,r),!0}else if(r){const s=Xa(n.state),a=s.start(-1);return z0(n.state,n.dispatch,a,Ue.get(s.node(-1)).findCell(s.pos-a),r),!0}else return!1}function J2(n,e){var t;if(e.ctrlKey||e.metaKey)return;const r=j0(n,e.target);let i;if(e.shiftKey&&n.state.selection instanceof Re)s(n.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&(i=Qi(n.state.selection.$anchor))!=null&&((t=Td(n,e))==null?void 0:t.pos)!=i.pos)s(i,e),e.preventDefault();else if(!r)return;function s(d,f){let p=Td(n,f);const g=vr.getState(n.state)==null;if(!p||!th(d,p))if(g)p=d;else return;const v=new Re(d,p);if(g||!n.state.selection.eq(v)){const x=n.state.tr.setSelection(v);g&&x.setMeta(vr,d.pos),n.dispatch(x)}}function a(){n.root.removeEventListener("mouseup",a),n.root.removeEventListener("dragstart",a),n.root.removeEventListener("mousemove",u),vr.getState(n.state)!=null&&n.dispatch(n.state.tr.setMeta(vr,-1))}function u(d){const f=d,p=vr.getState(n.state);let g;if(p!=null)g=n.state.doc.resolve(p);else if(j0(n,f.target)!=r&&(g=Td(n,e),!g))return a();g&&s(g,f)}n.root.addEventListener("mouseup",a),n.root.addEventListener("dragstart",a),n.root.addEventListener("mousemove",u)}function nv(n,e,t){if(!(n.state.selection instanceof re))return null;const{$head:r}=n.state.selection;for(let i=r.depth-1;i>=0;i--){const s=r.node(i);if((t<0?r.index(i):r.indexAfter(i))!=(t<0?0:s.childCount))return null;if(s.type.spec.tableRole=="cell"||s.type.spec.tableRole=="header_cell"){const u=r.before(i),d=e=="vert"?t>0?"down":"up":t>0?"right":"left";return n.endOfTextblock(d)?u:null}}return null}function j0(n,e){for(;e&&e!=n.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function Td(n,e){const t=n.posAtCoords({left:e.clientX,top:e.clientY});return t&&t?Qi(n.state.doc.resolve(t.pos)):null}var G2=class{constructor(e,t){this.node=e,this.defaultCellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${t}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),cf(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!=this.node.type?!1:(this.node=e,cf(e,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(e){return e.type=="attributes"&&(e.target==this.table||this.colgroup.contains(e.target))}};function cf(n,e,t,r,i,s){var a;let u=0,d=!0,f=e.firstChild;const p=n.firstChild;if(p){for(let g=0,v=0;g<p.childCount;g++){const{colspan:x,colwidth:k}=p.child(g).attrs;for(let S=0;S<x;S++,v++){const C=i==v?s:k&&k[S],M=C?C+"px":"";if(u+=C||r,C||(d=!1),f)f.style.width!=M&&(f.style.width=M),f=f.nextSibling;else{const P=document.createElement("col");P.style.width=M,e.appendChild(P)}}}for(;f;){const g=f.nextSibling;(a=f.parentNode)==null||a.removeChild(f),f=g}d?(t.style.width=u+"px",t.style.minWidth=""):(t.style.width="",t.style.minWidth=u+"px")}}var Kt=new ut("tableColumnResizing");function Q2({handleWidth:n=5,cellMinWidth:e=25,defaultCellMinWidth:t=100,View:r=G2,lastColumnResizable:i=!0}={}){const s=new Ge({key:Kt,state:{init(a,u){var d,f;const p=(f=(d=s.spec)==null?void 0:d.props)==null?void 0:f.nodeViews,g=Ct(u.schema).table.name;return r&&p&&(p[g]=(v,x)=>new r(v,t,x)),new Y2(-1,!1)},apply(a,u){return u.apply(a)}},props:{attributes:a=>{const u=Kt.getState(a);return u&&u.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(a,u)=>{X2(a,u,n,i)},mouseleave:a=>{Z2(a)},mousedown:(a,u)=>{eN(a,u,e,t)}},decorations:a=>{const u=Kt.getState(a);if(u&&u.activeHandle>-1)return oN(a,u.activeHandle)},nodeViews:{}}});return s}var Y2=class Ql{constructor(e,t){this.activeHandle=e,this.dragging=t}apply(e){const t=this,r=e.getMeta(Kt);if(r&&r.setHandle!=null)return new Ql(r.setHandle,!1);if(r&&r.setDragging!==void 0)return new Ql(t.activeHandle,r.setDragging);if(t.activeHandle>-1&&e.docChanged){let i=e.mapping.map(t.activeHandle,-1);return af(e.doc.resolve(i))||(i=-1),new Ql(i,t.dragging)}return t}};function X2(n,e,t,r){if(!n.editable)return;const i=Kt.getState(n.state);if(i&&!i.dragging){const s=nN(e.target);let a=-1;if(s){const{left:u,right:d}=s.getBoundingClientRect();e.clientX-u<=t?a=F0(n,e,"left",t):d-e.clientX<=t&&(a=F0(n,e,"right",t))}if(a!=i.activeHandle){if(!r&&a!==-1){const u=n.state.doc.resolve(a),d=u.node(-1),f=Ue.get(d),p=u.start(-1);if(f.colCount(u.pos-p)+u.nodeAfter.attrs.colspan-1==f.width-1)return}rv(n,a)}}}function Z2(n){if(!n.editable)return;const e=Kt.getState(n.state);e&&e.activeHandle>-1&&!e.dragging&&rv(n,-1)}function eN(n,e,t,r){var i;if(!n.editable)return!1;const s=(i=n.dom.ownerDocument.defaultView)!=null?i:window,a=Kt.getState(n.state);if(!a||a.activeHandle==-1||a.dragging)return!1;const u=n.state.doc.nodeAt(a.activeHandle),d=tN(n,a.activeHandle,u.attrs);n.dispatch(n.state.tr.setMeta(Kt,{setDragging:{startX:e.clientX,startWidth:d}}));function f(g){s.removeEventListener("mouseup",f),s.removeEventListener("mousemove",p);const v=Kt.getState(n.state);v!=null&&v.dragging&&(rN(n,v.activeHandle,B0(v.dragging,g,t)),n.dispatch(n.state.tr.setMeta(Kt,{setDragging:null})))}function p(g){if(!g.which)return f(g);const v=Kt.getState(n.state);if(v&&v.dragging){const x=B0(v.dragging,g,t);_0(n,v.activeHandle,x,r)}}return _0(n,a.activeHandle,d,r),s.addEventListener("mouseup",f),s.addEventListener("mousemove",p),e.preventDefault(),!0}function tN(n,e,{colspan:t,colwidth:r}){const i=r&&r[r.length-1];if(i)return i;const s=n.domAtPos(e);let u=s.node.childNodes[s.offset].offsetWidth,d=t;if(r)for(let f=0;f<t;f++)r[f]&&(u-=r[f],d--);return u/d}function nN(n){for(;n&&n.nodeName!="TD"&&n.nodeName!="TH";)n=n.classList&&n.classList.contains("ProseMirror")?null:n.parentNode;return n}function F0(n,e,t,r){const i=t=="right"?-r:r,s=n.posAtCoords({left:e.clientX+i,top:e.clientY});if(!s)return-1;const{pos:a}=s,u=Qi(n.state.doc.resolve(a));if(!u)return-1;if(t=="right")return u.pos;const d=Ue.get(u.node(-1)),f=u.start(-1),p=d.map.indexOf(u.pos-f);return p%d.width==0?-1:f+d.map[p-1]}function B0(n,e,t){const r=e.clientX-n.startX;return Math.max(t,n.startWidth+r)}function rv(n,e){n.dispatch(n.state.tr.setMeta(Kt,{setHandle:e}))}function rN(n,e,t){const r=n.state.doc.resolve(e),i=r.node(-1),s=Ue.get(i),a=r.start(-1),u=s.colCount(r.pos-a)+r.nodeAfter.attrs.colspan-1,d=n.state.tr;for(let f=0;f<s.height;f++){const p=f*s.width+u;if(f&&s.map[p]==s.map[p-s.width])continue;const g=s.map[p],v=i.nodeAt(g).attrs,x=v.colspan==1?0:u-s.colCount(g);if(v.colwidth&&v.colwidth[x]==t)continue;const k=v.colwidth?v.colwidth.slice():iN(v.colspan);k[x]=t,d.setNodeMarkup(a+g,null,{...v,colwidth:k})}d.docChanged&&n.dispatch(d)}function _0(n,e,t,r){const i=n.state.doc.resolve(e),s=i.node(-1),a=i.start(-1),u=Ue.get(s).colCount(i.pos-a)+i.nodeAfter.attrs.colspan-1;let d=n.domAtPos(i.start(-1)).node;for(;d&&d.nodeName!="TABLE";)d=d.parentNode;d&&cf(s,d.firstChild,d,r,u,t)}function iN(n){return Array(n).fill(0)}function oN(n,e){var t;const r=[],i=n.doc.resolve(e),s=i.node(-1);if(!s)return Fe.empty;const a=Ue.get(s),u=i.start(-1),d=a.colCount(i.pos-u)+i.nodeAfter.attrs.colspan-1;for(let f=0;f<a.height;f++){const p=d+f*a.width;if((d==a.width-1||a.map[p]!=a.map[p+1])&&(f==0||a.map[p]!=a.map[p-a.width])){const g=a.map[p],v=u+g+s.nodeAt(g).nodeSize-1,x=document.createElement("div");x.className="column-resize-handle",(t=Kt.getState(n))!=null&&t.dragging&&r.push(St.node(u+g,u+g+s.nodeAt(g).nodeSize,{class:"column-resize-dragging"})),r.push(St.widget(v,x))}}return Fe.create(n.doc,r)}function sN({allowTableNodeSelection:n=!1}={}){return new Ge({key:vr,state:{init(){return null},apply(e,t){const r=e.getMeta(vr);if(r!=null)return r==-1?null:r;if(t==null||!e.docChanged)return t;const{deleted:i,pos:s}=e.mapping.mapResult(t);return i?null:s}},props:{decorations:x2,handleDOMEvents:{mousedown:J2},createSelectionBetween(e){return vr.getState(e.state)!=null?e.state.selection:null},handleTripleClick:K2,handleKeyDown:W2,handlePaste:q2},appendTransaction(e,t,r){return S2(r,Z1(r,t),n)}})}function df(n,e){return e?["width",`${Math.max(e,n)}px`]:["min-width",`${n}px`]}function H0(n,e,t,r,i,s){var a;let u=0,d=!0,f=e.firstChild;const p=n.firstChild;if(p!==null)for(let g=0,v=0;g<p.childCount;g+=1){const{colspan:x,colwidth:k}=p.child(g).attrs;for(let S=0;S<x;S+=1,v+=1){const C=i===v?s:k&&k[S],M=C?`${C}px`:"";if(u+=C||r,C||(d=!1),f){if(f.style.width!==M){const[P,I]=df(r,C);f.style.setProperty(P,I)}f=f.nextSibling}else{const P=document.createElement("col"),[I,V]=df(r,C);P.style.setProperty(I,V),e.appendChild(P)}}}for(;f;){const g=f.nextSibling;(a=f.parentNode)===null||a===void 0||a.removeChild(f),f=g}d?(t.style.width=`${u}px`,t.style.minWidth=""):(t.style.width="",t.style.minWidth=`${u}px`)}class lN{constructor(e,t){this.node=e,this.cellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),H0(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!==this.node.type?!1:(this.node=e,H0(e,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(e){return e.type==="attributes"&&(e.target===this.table||this.colgroup.contains(e.target))}}function aN(n,e,t,r){let i=0,s=!0;const a=[],u=n.firstChild;if(!u)return{};for(let g=0,v=0;g<u.childCount;g+=1){const{colspan:x,colwidth:k}=u.child(g).attrs;for(let S=0;S<x;S+=1,v+=1){const C=t===v?r:k&&k[S];i+=C||e,C||(s=!1);const[M,P]=df(e,C);a.push(["col",{style:`${M}: ${P}`}])}}const d=s?`${i}px`:"",f=s?"":`${i}px`;return{colgroup:["colgroup",{},...a],tableWidth:d,tableMinWidth:f}}function $0(n,e){return n.createAndFill()}function uN(n){if(n.cached.tableNodeTypes)return n.cached.tableNodeTypes;const e={};return Object.keys(n.nodes).forEach(t=>{const r=n.nodes[t];r.spec.tableRole&&(e[r.spec.tableRole]=r)}),n.cached.tableNodeTypes=e,e}function cN(n,e,t,r,i){const s=uN(n),a=[],u=[];for(let f=0;f<t;f+=1){const p=$0(s.cell);if(p&&u.push(p),r){const g=$0(s.header_cell);g&&a.push(g)}}const d=[];for(let f=0;f<e;f+=1)d.push(s.row.createChecked(null,r&&f===0?a:u));return s.table.createChecked(null,d)}function dN(n){return n instanceof Re}const Hl=({editor:n})=>{const{selection:e}=n.state;if(!dN(e))return!1;let t=0;const r=R1(e.ranges[0].$from,s=>s.type.name==="table");return r==null||r.node.descendants(s=>{if(s.type.name==="table")return!1;["tableCell","tableHeader"].includes(s.type.name)&&(t+=1)}),t===e.ranges.length?(n.commands.deleteTable(),!0):!1},fN=tt.create({name:"table",addOptions(){return{HTMLAttributes:{},resizable:!1,handleWidth:5,cellMinWidth:25,View:lN,lastColumnResizable:!0,allowTableNodeSelection:!1}},content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML(){return[{tag:"table"}]},renderHTML({node:n,HTMLAttributes:e}){const{colgroup:t,tableWidth:r,tableMinWidth:i}=aN(n,this.options.cellMinWidth);return["table",Ie(this.options.HTMLAttributes,e,{style:r?`width: ${r}`:`min-width: ${i}`}),t,["tbody",0]]},addCommands(){return{insertTable:({rows:n=3,cols:e=3,withHeaderRow:t=!0}={})=>({tr:r,dispatch:i,editor:s})=>{const a=cN(s.schema,n,e,t);if(i){const u=r.selection.from+1;r.replaceSelectionWith(a).scrollIntoView().setSelection(re.near(r.doc.resolve(u)))}return!0},addColumnBefore:()=>({state:n,dispatch:e})=>E2(n,e),addColumnAfter:()=>({state:n,dispatch:e})=>M2(n,e),deleteColumn:()=>({state:n,dispatch:e})=>T2(n,e),addRowBefore:()=>({state:n,dispatch:e})=>O2(n,e),addRowAfter:()=>({state:n,dispatch:e})=>R2(n,e),deleteRow:()=>({state:n,dispatch:e})=>P2(n,e),deleteTable:()=>({state:n,dispatch:e})=>_2(n,e),mergeCells:()=>({state:n,dispatch:e})=>O0(n,e),splitCell:()=>({state:n,dispatch:e})=>R0(n,e),toggleHeaderColumn:()=>({state:n,dispatch:e})=>fs("column")(n,e),toggleHeaderRow:()=>({state:n,dispatch:e})=>fs("row")(n,e),toggleHeaderCell:()=>({state:n,dispatch:e})=>F2(n,e),mergeOrSplit:()=>({state:n,dispatch:e})=>O0(n,e)?!0:R0(n,e),setCellAttribute:(n,e)=>({state:t,dispatch:r})=>z2(n,e)(t,r),goToNextCell:()=>({state:n,dispatch:e})=>P0(1)(n,e),goToPreviousCell:()=>({state:n,dispatch:e})=>P0(-1)(n,e),fixTables:()=>({state:n,dispatch:e})=>(e&&Z1(n),!0),setCellSelection:n=>({tr:e,dispatch:t})=>{if(t){const r=Re.create(e.doc,n.anchorCell,n.headCell);e.setSelection(r)}return!0}}},addKeyboardShortcuts(){return{Tab:()=>this.editor.commands.goToNextCell()?!0:this.editor.can().addRowAfter()?this.editor.chain().addRowAfter().goToNextCell().run():!1,"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:Hl,"Mod-Backspace":Hl,Delete:Hl,"Mod-Delete":Hl}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[Q2({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,defaultCellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],sN({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(n){const e={name:n.name,options:n.options,storage:n.storage};return{tableRole:he(X(n,"tableRole",e))}}}),hN=tt.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:n}){return["tr",Ie(this.options.HTMLAttributes,n),0]}}),pN=tt.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:n=>{const e=n.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:n}){return["td",Ie(this.options.HTMLAttributes,n),0]}}),mN=tt.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:n=>{const e=n.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:n}){return["th",Ie(this.options.HTMLAttributes,n),0]}}),gN=sn.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["u",Ie(this.options.HTMLAttributes,n),0]},addCommands(){return{setUnderline:()=>({commands:n})=>n.setMark(this.name),toggleUnderline:()=>({commands:n})=>n.toggleMark(this.name),unsetUnderline:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),yN=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,vN=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,xN=sn.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:n=>n.getAttribute("data-color")||n.style.backgroundColor,renderHTML:n=>n.color?{"data-color":n.color,style:`background-color: ${n.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:n}){return["mark",Ie(this.options.HTMLAttributes,n),0]},addCommands(){return{setHighlight:n=>({commands:e})=>e.setMark(this.name,n),toggleHighlight:n=>({commands:e})=>e.toggleMark(this.name,n),unsetHighlight:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[li({find:yN,type:this.type})]},addPasteRules(){return[Tr({find:vN,type:this.type})]}}),kN=Xe.create({name:"fontFamily",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontFamily:{default:null,parseHTML:n=>n.style.fontFamily,renderHTML:n=>n.fontFamily?{style:`font-family: ${n.fontFamily}`}:{}}}}]},addCommands(){return{setFontFamily:n=>({chain:e})=>e().setMark("textStyle",{fontFamily:n}).run(),unsetFontFamily:()=>({chain:n})=>n().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()}}}),wN=Xe.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:n=>n.length,wordCounter:n=>n.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=n=>{const e=(n==null?void 0:n.node)||this.editor.state.doc;if(((n==null?void 0:n.mode)||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=n=>{const e=(n==null?void 0:n.node)||this.editor.state.doc,t=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(t)}},addProseMirrorPlugins(){let n=!1;return[new Ge({key:new ut("characterCount"),appendTransaction:(e,t,r)=>{if(n)return;const i=this.options.limit;if(i==null||i===0){n=!0;return}const s=this.storage.characters({node:r.doc});if(s>i){const a=s-i,u=0,d=a;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const f=r.tr.deleteRange(u,d);return n=!0,f}n=!0},filterTransaction:(e,t)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const i=this.storage.characters({node:t.doc}),s=this.storage.characters({node:e.doc});if(s<=r||i>r&&s>r&&s<=i)return!0;if(i>r&&s>r&&s>i||!e.getMeta("paste"))return!1;const u=e.selection.$head.pos,d=s-r,f=u-d,p=u;return e.deleteRange(f,p),!(this.storage.characters({node:e.doc})>r)}})]}}),SN=Xe.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Ge({key:new ut("focus"),props:{decorations:({doc:n,selection:e})=>{const{isEditable:t,isFocused:r}=this.editor,{anchor:i}=e,s=[];if(!t||!r)return Fe.create(n,[]);let a=0;this.options.mode==="deepest"&&n.descendants((d,f)=>{if(d.isText)return;if(!(i>=f&&i<=f+d.nodeSize-1))return!1;a+=1});let u=0;return n.descendants((d,f)=>{if(d.isText||!(i>=f&&i<=f+d.nodeSize-1))return!1;if(u+=1,this.options.mode==="deepest"&&a-u>0||this.options.mode==="shallowest"&&u>1)return this.options.mode==="deepest";s.push(St.node(f,f+d.nodeSize,{class:this.options.className}))}),Fe.create(n,s)}}})]}});/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var CN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bN=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=(n,e)=>{const t=J.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:u="",children:d,...f},p)=>J.createElement("svg",{ref:p,...CN,width:i,height:i,stroke:r,strokeWidth:a?Number(s)*24/Number(i):s,className:["lucide",`lucide-${bN(n)}`,u].join(" "),...f},[...e.map(([g,v])=>J.createElement(g,v)),...Array.isArray(d)?d:[d]]));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EN=Me("AlignCenter",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"17",x2:"7",y1:"12",y2:"12",key:"rsh8ii"}],["line",{x1:"19",x2:"5",y1:"18",y2:"18",key:"1t0tuv"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MN=Me("AlignJustify",[["line",{x1:"3",x2:"21",y1:"6",y2:"6",key:"4m8b97"}],["line",{x1:"3",x2:"21",y1:"12",y2:"12",key:"10d38w"}],["line",{x1:"3",x2:"21",y1:"18",y2:"18",key:"kwyyxn"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NN=Me("AlignLeft",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18",key:"1awlsn"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TN=Me("AlignRight",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}],["line",{x1:"21",x2:"7",y1:"18",y2:"18",key:"1g9eri"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AN=Me("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ON=Me("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=Me("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RN=Me("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DN=Me("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ov=Me("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PN=Me("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LN=Me("Highlighter",[["path",{d:"m9 11-6 6v3h9l3-3",key:"1a3l36"}],["path",{d:"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4",key:"14a9rk"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=Me("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IN=Me("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nh=Me("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zN=Me("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jN=Me("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FN=Me("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BN=Me("Quote",[["path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z",key:"4rm80e"}],["path",{d:"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z",key:"10za9r"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _N=Me("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HN=Me("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $N=Me("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VN=Me("Strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=Me("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=Me("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WN=Me("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KN=Me("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V0=Me("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Za=Me("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function eu(){return(eu=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}).apply(this,arguments)}function av(n,e){if(n==null)return{};var t,r,i={},s=Object.keys(n);for(r=0;r<s.length;r++)e.indexOf(t=s[r])>=0||(i[t]=n[t]);return i}function ff(n){var e=J.useRef(n),t=J.useRef(function(r){e.current&&e.current(r)});return e.current=n,t.current}var hs=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n<e?e:n},Zo=function(n){return"touches"in n},hf=function(n){return n&&n.ownerDocument.defaultView||self},U0=function(n,e,t){var r=n.getBoundingClientRect(),i=Zo(e)?function(s,a){for(var u=0;u<s.length;u++)if(s[u].identifier===a)return s[u];return s[0]}(e.touches,t):e;return{left:hs((i.pageX-(r.left+hf(n).pageXOffset))/r.width),top:hs((i.pageY-(r.top+hf(n).pageYOffset))/r.height)}},W0=function(n){!Zo(n)&&n.preventDefault()},uv=Se.memo(function(n){var e=n.onMove,t=n.onKey,r=av(n,["onMove","onKey"]),i=J.useRef(null),s=ff(e),a=ff(t),u=J.useRef(null),d=J.useRef(!1),f=J.useMemo(function(){var x=function(C){W0(C),(Zo(C)?C.touches.length>0:C.buttons>0)&&i.current?s(U0(i.current,C,u.current)):S(!1)},k=function(){return S(!1)};function S(C){var M=d.current,P=hf(i.current),I=C?P.addEventListener:P.removeEventListener;I(M?"touchmove":"mousemove",x),I(M?"touchend":"mouseup",k)}return[function(C){var M=C.nativeEvent,P=i.current;if(P&&(W0(M),!function(V,B){return B&&!Zo(V)}(M,d.current)&&P)){if(Zo(M)){d.current=!0;var I=M.changedTouches||[];I.length&&(u.current=I[0].identifier)}P.focus(),s(U0(P,M,u.current)),S(!0)}},function(C){var M=C.which||C.keyCode;M<37||M>40||(C.preventDefault(),a({left:M===39?.05:M===37?-.05:0,top:M===40?.05:M===38?-.05:0}))},S]},[a,s]),p=f[0],g=f[1],v=f[2];return J.useEffect(function(){return v},[v]),Se.createElement("div",eu({},r,{onTouchStart:p,onMouseDown:p,className:"react-colorful__interactive",ref:i,onKeyDown:g,tabIndex:0,role:"slider"}))}),rh=function(n){return n.filter(Boolean).join(" ")},cv=function(n){var e=n.color,t=n.left,r=n.top,i=r===void 0?.5:r,s=rh(["react-colorful__pointer",n.className]);return Se.createElement("div",{className:s,style:{top:100*i+"%",left:100*t+"%"}},Se.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},mt=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t},qN=function(n){return XN(pf(n))},pf=function(n){return n[0]==="#"&&(n=n.substring(1)),n.length<6?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?mt(parseInt(n[3]+n[3],16)/255,2):1}:{r:parseInt(n.substring(0,2),16),g:parseInt(n.substring(2,4),16),b:parseInt(n.substring(4,6),16),a:n.length===8?mt(parseInt(n.substring(6,8),16)/255,2):1}},JN=function(n){return YN(QN(n))},GN=function(n){var e=n.s,t=n.v,r=n.a,i=(200-e)*t/100;return{h:mt(n.h),s:mt(i>0&&i<200?e*t/100/(i<=100?i:200-i)*100:0),l:mt(i/2),a:mt(r,2)}},mf=function(n){var e=GN(n);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},QN=function(n){var e=n.h,t=n.s,r=n.v,i=n.a;e=e/360*6,t/=100,r/=100;var s=Math.floor(e),a=r*(1-t),u=r*(1-(e-s)*t),d=r*(1-(1-e+s)*t),f=s%6;return{r:mt(255*[r,u,a,a,d,r][f]),g:mt(255*[d,r,r,u,a,a][f]),b:mt(255*[a,a,d,r,r,u][f]),a:mt(i,2)}},$l=function(n){var e=n.toString(16);return e.length<2?"0"+e:e},YN=function(n){var e=n.r,t=n.g,r=n.b,i=n.a,s=i<1?$l(mt(255*i)):"";return"#"+$l(e)+$l(t)+$l(r)+s},XN=function(n){var e=n.r,t=n.g,r=n.b,i=n.a,s=Math.max(e,t,r),a=s-Math.min(e,t,r),u=a?s===e?(t-r)/a:s===t?2+(r-e)/a:4+(e-t)/a:0;return{h:mt(60*(u<0?u+6:u)),s:mt(s?a/s*100:0),v:mt(s/255*100),a:i}},ZN=Se.memo(function(n){var e=n.hue,t=n.onChange,r=rh(["react-colorful__hue",n.className]);return Se.createElement("div",{className:r},Se.createElement(uv,{onMove:function(i){t({h:360*i.left})},onKey:function(i){t({h:hs(e+360*i.left,0,360)})},"aria-label":"Hue","aria-valuenow":mt(e),"aria-valuemax":"360","aria-valuemin":"0"},Se.createElement(cv,{className:"react-colorful__hue-pointer",left:e/360,color:mf({h:e,s:100,v:100,a:1})})))}),eT=Se.memo(function(n){var e=n.hsva,t=n.onChange,r={backgroundColor:mf({h:e.h,s:100,v:100,a:1})};return Se.createElement("div",{className:"react-colorful__saturation",style:r},Se.createElement(uv,{onMove:function(i){t({s:100*i.left,v:100-100*i.top})},onKey:function(i){t({s:hs(e.s+100*i.left,0,100),v:hs(e.v-100*i.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+mt(e.s)+"%, Brightness "+mt(e.v)+"%"},Se.createElement(cv,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:mf(e)})))}),dv=function(n,e){if(n===e)return!0;for(var t in n)if(n[t]!==e[t])return!1;return!0},tT=function(n,e){return n.toLowerCase()===e.toLowerCase()||dv(pf(n),pf(e))};function nT(n,e,t){var r=ff(t),i=J.useState(function(){return n.toHsva(e)}),s=i[0],a=i[1],u=J.useRef({color:e,hsva:s});J.useEffect(function(){if(!n.equal(e,u.current.color)){var f=n.toHsva(e);u.current={hsva:f,color:e},a(f)}},[e,n]),J.useEffect(function(){var f;dv(s,u.current.hsva)||n.equal(f=n.fromHsva(s),u.current.color)||(u.current={hsva:s,color:f},r(f))},[s,n,r]);var d=J.useCallback(function(f){a(function(p){return Object.assign({},p,f)})},[]);return[s,d]}var rT=typeof window<"u"?J.useLayoutEffect:J.useEffect,iT=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},K0=new Map,oT=function(n){rT(function(){var e=n.current?n.current.ownerDocument:document;if(e!==void 0&&!K0.has(e)){var t=e.createElement("style");t.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,K0.set(e,t);var r=iT();r&&t.setAttribute("nonce",r),e.head.appendChild(t)}},[])},sT=function(n){var e=n.className,t=n.colorModel,r=n.color,i=r===void 0?t.defaultColor:r,s=n.onChange,a=av(n,["className","colorModel","color","onChange"]),u=J.useRef(null);oT(u);var d=nT(t,i,s),f=d[0],p=d[1],g=rh(["react-colorful",e]);return Se.createElement("div",eu({},a,{ref:u,className:g}),Se.createElement(eT,{hsva:f,onChange:p}),Se.createElement(ZN,{hue:f.h,onChange:p,className:"react-colorful__last-control"}))},lT={defaultColor:"000",toHsva:qN,fromHsva:function(n){return JN({h:n.h,s:n.s,v:n.v,a:1})},equal:tT},aT=function(n){return Se.createElement(sT,eu({},n,{colorModel:lT}))};const q0=({color:n,onChange:e,onClose:t})=>{const[r,i]=J.useState(n),s=J.useRef(null),a=["#000000","#FFFFFF","#FF0000","#00FF00","#0000FF","#FFFF00","#FF00FF","#00FFFF","#800000","#008000","#000080","#800080","#008080","#808000","#C0C0C0","#808080","#FF9999","#99FF99","#9999FF","#FFFF99","#FF99FF","#99FFFF","#FFE6CC","#E6E6E6"];J.useEffect(()=>{const f=p=>{s.current&&!s.current.contains(p.target)&&t()};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[t]);const u=f=>{i(f),e(f)},d=f=>{i(f),e(f)};return b.jsxs("div",{ref:s,className:"bg-white border border-gray-300 rounded-lg shadow-lg p-4 w-64",children:[b.jsxs("div",{className:"flex justify-between items-center mb-3",children:[b.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Pilih Warna"}),b.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-100 rounded",title:"Tutup",children:b.jsx(Za,{className:"w-4 h-4"})})]}),b.jsx("div",{className:"mb-4",children:b.jsx(aT,{color:r,onChange:u})}),b.jsxs("div",{className:"mb-4",children:[b.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Kode Warna (Hex)"}),b.jsx("input",{type:"text",value:r,onChange:f=>{const p=f.target.value;p.match(/^#[0-9A-Fa-f]{0,6}$/)&&(i(p),p.length===7&&e(p))},className:"w-full px-2 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"#000000"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Warna Cepat"}),b.jsx("div",{className:"grid grid-cols-8 gap-1",children:a.map(f=>b.jsx("button",{onClick:()=>d(f),className:`w-6 h-6 rounded border-2 hover:scale-110 transition-transform ${r===f?"border-blue-500":"border-gray-300"}`,style:{backgroundColor:f},title:f},f))})]}),b.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[b.jsx("div",{className:"w-8 h-8 rounded border border-gray-300",style:{backgroundColor:r}}),b.jsx("span",{className:"text-xs text-gray-600",children:r})]})]})},uT=({onSubmit:n,onClose:e,initialUrl:t="",initialText:r=""})=>{const[i,s]=J.useState(t),[a,u]=J.useState(r),[d,f]=J.useState(!0),p=J.useRef(null),g=J.useRef(null);J.useEffect(()=>{const S=M=>{p.current&&!p.current.contains(M.target)&&e()},C=M=>{M.key==="Escape"&&e()};return document.addEventListener("mousedown",S),document.addEventListener("keydown",C),setTimeout(()=>{var M;(M=g.current)==null||M.focus()},100),()=>{document.removeEventListener("mousedown",S),document.removeEventListener("keydown",C)}},[e]);const v=S=>{if(S.preventDefault(),!i.trim())return;let C=i.trim();!C.startsWith("http://")&&!C.startsWith("https://")&&(C="https://"+C),n(C,a.trim()||void 0),e()},x=()=>{n(""),e()},k=S=>{try{return new URL(S.startsWith("http")?S:"https://"+S),!0}catch{return!1}};return b.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:b.jsxs("div",{ref:p,className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md mx-4",children:[b.jsxs("div",{className:"flex justify-between items-center mb-4",children:[b.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[b.jsx(nh,{className:"w-5 h-5"}),t?"Edit Link":"Tambah Link"]}),b.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-100 rounded",title:"Tutup",children:b.jsx(Za,{className:"w-5 h-5"})})]}),b.jsxs("form",{onSubmit:v,className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL *"}),b.jsx("input",{ref:g,type:"text",value:i,onChange:S=>s(S.target.value),placeholder:"https://example.com atau example.com",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${i&&!k(i)?"border-red-300":"border-gray-300"}`,required:!0}),i&&!k(i)&&b.jsx("p",{className:"text-red-500 text-xs mt-1",children:"URL tidak valid"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Teks Link (opsional)"}),b.jsx("input",{type:"text",value:a,onChange:S=>u(S.target.value),placeholder:"Teks yang akan ditampilkan",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),b.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Jika kosong, URL akan digunakan sebagai teks"})]}),b.jsx("div",{children:b.jsxs("label",{className:"flex items-center gap-2",children:[b.jsx("input",{type:"checkbox",checked:d,onChange:S=>f(S.target.checked),className:"rounded"}),b.jsxs("span",{className:"text-sm text-gray-700 flex items-center gap-1",children:[b.jsx(RN,{className:"w-3 h-3"}),"Buka di tab baru"]})]})}),i&&k(i)&&b.jsxs("div",{className:"bg-gray-50 p-3 rounded-md",children:[b.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Preview:"}),b.jsx("a",{href:i.startsWith("http")?i:"https://"+i,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-sm underline break-all",children:a||i})]}),b.jsxs("div",{className:"flex justify-between pt-4",children:[b.jsx("div",{children:t&&b.jsx("button",{type:"button",onClick:x,className:"px-4 py-2 text-red-600 hover:bg-red-50 rounded-md text-sm font-medium",children:"Hapus Link"})}),b.jsxs("div",{className:"flex gap-2",children:[b.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-md text-sm font-medium",children:"Batal"}),b.jsxs("button",{type:"submit",disabled:!i.trim()||!k(i),className:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[t?"Update":"Tambah"," Link"]})]})]})]})]})})},cT=({onSubmit:n,onClose:e})=>{const[t,r]=J.useState("url"),[i,s]=J.useState(""),[a,u]=J.useState(""),[d,f]=J.useState(null),[p,g]=J.useState(""),[v,x]=J.useState(!1),k=J.useRef(null),S=J.useRef(null),C=J.useRef(null);J.useEffect(()=>{const te=Ce=>{k.current&&!k.current.contains(Ce.target)&&e()},ye=Ce=>{Ce.key==="Escape"&&e()};return document.addEventListener("mousedown",te),document.addEventListener("keydown",ye),setTimeout(()=>{var Ce;t==="url"&&((Ce=C.current)==null||Ce.focus())},100),()=>{document.removeEventListener("mousedown",te),document.removeEventListener("keydown",ye)}},[e,t]),J.useEffect(()=>{if(d){const te=URL.createObjectURL(d);return g(te),()=>URL.revokeObjectURL(te)}else g("")},[d]);const M=te=>{te&&te.type.startsWith("image/")&&(f(te),a||u(te.name.replace(/\.[^/.]+$/,"")))},P=te=>{var Ce;const ye=(Ce=te.target.files)==null?void 0:Ce[0];ye&&M(ye)},I=te=>{te.preventDefault(),x(!0)},V=te=>{te.preventDefault(),x(!1)},B=te=>{te.preventDefault(),x(!1);const ye=te.dataTransfer.files[0];ye&&M(ye)},K=te=>new Promise((ye,Ce)=>{const We=new FileReader;We.onload=()=>ye(We.result),We.onerror=Ce,We.readAsDataURL(te)}),se=async te=>{if(te.preventDefault(),t==="url"){if(!i.trim())return;n(i.trim(),a.trim()||void 0)}else{if(!d)return;try{const ye=await K(d);n(ye,a.trim()||void 0)}catch(ye){console.error("Error converting file to base64:",ye);return}}e()},de=te=>{try{return new URL(te),/\.(jpg|jpeg|png|gif|webp|svg)$/i.test(te)}catch{return!1}},ue=t==="url"?i:p;return b.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:b.jsxs("div",{ref:k,className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto",children:[b.jsxs("div",{className:"flex justify-between items-center mb-4",children:[b.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[b.jsx(sv,{className:"w-5 h-5"}),"Tambah Gambar"]}),b.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-100 rounded",title:"Tutup",children:b.jsx(Za,{className:"w-5 h-5"})})]}),b.jsxs("div",{className:"flex border-b border-gray-200 mb-4",children:[b.jsxs("button",{onClick:()=>r("url"),className:`px-4 py-2 text-sm font-medium border-b-2 ${t==="url"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[b.jsx(nh,{className:"w-4 h-4 inline mr-1"}),"URL Gambar"]}),b.jsxs("button",{onClick:()=>r("upload"),className:`px-4 py-2 text-sm font-medium border-b-2 ${t==="upload"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[b.jsx(V0,{className:"w-4 h-4 inline mr-1"}),"Upload File"]})]}),b.jsxs("form",{onSubmit:se,className:"space-y-4",children:[t==="url"&&b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL Gambar *"}),b.jsx("input",{ref:C,type:"url",value:i,onChange:te=>s(te.target.value),placeholder:"https://example.com/image.jpg",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${i&&!de(i)?"border-red-300":"border-gray-300"}`,required:!0}),i&&!de(i)&&b.jsx("p",{className:"text-red-500 text-xs mt-1",children:"URL gambar tidak valid. Pastikan berakhiran .jpg, .png, .gif, dll."})]}),t==="upload"&&b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Upload Gambar *"}),b.jsxs("div",{className:`border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-colors ${v?"border-blue-400 bg-blue-50":d?"border-green-400 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragOver:I,onDragLeave:V,onDrop:B,onClick:()=>{var te;return(te=S.current)==null?void 0:te.click()},children:[b.jsx(V0,{className:"w-8 h-8 mx-auto text-gray-400 mb-2"}),d?b.jsxs("div",{children:[b.jsx("p",{className:"text-sm font-medium text-green-600",children:d.name}),b.jsxs("p",{className:"text-xs text-gray-500",children:[(d.size/1024/1024).toFixed(2)," MB"]})]}):b.jsxs("div",{children:[b.jsx("p",{className:"text-sm text-gray-600",children:"Klik untuk memilih atau seret file gambar ke sini"}),b.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PNG, JPG, GIF hingga 10MB"})]}),b.jsx("input",{ref:S,type:"file",accept:"image/*",onChange:P,className:"hidden"})]})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Teks Alternatif (Alt Text)"}),b.jsx("input",{type:"text",value:a,onChange:te=>u(te.target.value),placeholder:"Deskripsi gambar untuk aksesibilitas",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),b.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Digunakan untuk aksesibilitas dan SEO"})]}),ue&&b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Preview"}),b.jsxs("div",{className:"border border-gray-300 rounded-md p-2 bg-gray-50",children:[b.jsx("img",{src:ue,alt:a||"Preview",className:"max-w-full max-h-48 mx-auto object-contain",onError:te=>{var Ce;const ye=te.target;ye.style.display="none",(Ce=ye.nextElementSibling)==null||Ce.classList.remove("hidden")}}),b.jsx("div",{className:"hidden text-center text-red-500 text-sm py-4",children:"Gagal memuat gambar"})]})]}),b.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[b.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-md text-sm font-medium",children:"Batal"}),b.jsx("button",{type:"submit",disabled:t==="url"?!i.trim()||!de(i):!d,className:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Tambah Gambar"})]})]})]})})},dT=({onSubmit:n,onClose:e})=>{const[t,r]=J.useState(3),[i,s]=J.useState(3),[a,u]=J.useState(!0),[d,f]=J.useState(null),p=J.useRef(null);J.useEffect(()=>{const M=I=>{p.current&&!p.current.contains(I.target)&&e()},P=I=>{I.key==="Escape"&&e()};return document.addEventListener("mousedown",M),document.addEventListener("keydown",P),()=>{document.removeEventListener("mousedown",M),document.removeEventListener("keydown",P)}},[e]);const g=M=>{M.preventDefault(),t>0&&i>0&&(n(t,i),e())},v=(M,P)=>{r(M),s(P)},x=()=>{const I=[];for(let V=1;V<=10;V++)for(let B=1;B<=10;B++){const K=V<=t&&B<=i,se=d&&V<=d.row&&B<=d.col;I.push(b.jsx("div",{className:`w-4 h-4 border border-gray-300 cursor-pointer transition-colors ${K||se?"bg-blue-500 border-blue-600":"bg-white hover:bg-gray-100"}`,onMouseEnter:()=>f({row:V,col:B}),onClick:()=>v(V,B)},`${V}-${B}`))}return b.jsx("div",{className:"inline-grid grid-cols-10 gap-0 p-2 border border-gray-200 rounded",onMouseLeave:()=>f(null),children:I})},k=()=>{const M=[];for(let P=0;P<t;P++){const I=[];for(let V=0;V<i;V++){const B=a&&P===0;I.push(b.jsx("td",{className:`border border-gray-300 px-2 py-1 text-xs ${B?"bg-gray-100 font-semibold":"bg-white"}`,children:B?`Header ${V+1}`:`Cell ${P}-${V+1}`},V))}M.push(b.jsx("tr",{children:I},P))}return b.jsx("div",{className:"overflow-auto max-h-48 border border-gray-200 rounded",children:b.jsx("table",{className:"w-full border-collapse",children:b.jsx("tbody",{children:M})})})},S=d?d.row:t,C=d?d.col:i;return b.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:b.jsxs("div",{ref:p,className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md mx-4",children:[b.jsxs("div",{className:"flex justify-between items-center mb-4",children:[b.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[b.jsx(lv,{className:"w-5 h-5"}),"Sisipkan Tabel"]}),b.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-100 rounded",title:"Tutup",children:b.jsx(Za,{className:"w-5 h-5"})})]}),b.jsxs("form",{onSubmit:g,className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pilih Ukuran Tabel"}),b.jsxs("div",{className:"flex flex-col items-center gap-2",children:[x(),b.jsxs("p",{className:"text-sm text-gray-600",children:[b.jsx(PN,{className:"w-4 h-4 inline mr-1"}),S,"  ",C," tabel"]})]})]}),b.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Baris"}),b.jsx("input",{type:"number",min:"1",max:"20",value:t,onChange:M=>r(Math.max(1,parseInt(M.target.value)||1)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kolom"}),b.jsx("input",{type:"number",min:"1",max:"20",value:i,onChange:M=>s(Math.max(1,parseInt(M.target.value)||1)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),b.jsx("div",{children:b.jsxs("label",{className:"flex items-center gap-2",children:[b.jsx("input",{type:"checkbox",checked:a,onChange:M=>u(M.target.checked),className:"rounded"}),b.jsx("span",{className:"text-sm text-gray-700",children:"Sertakan baris header"})]})}),t>0&&i>0&&b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preview Tabel"}),k()]}),b.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[b.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-md text-sm font-medium",children:"Batal"}),b.jsx("button",{type:"submit",disabled:t<=0||i<=0,className:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Sisipkan Tabel"})]})]})]})})},fT=({editor:n})=>{const[e,t]=J.useState(!1),[r,i]=J.useState(!1),[s,a]=J.useState(!1),[u,d]=J.useState(!1),[f,p]=J.useState(!1);if(!n)return null;const g=J.useCallback((P,I)=>{P&&n.chain().focus().setImage({src:P,alt:I||""}).run()},[n]),v=J.useCallback((P,I)=>{if(P===""){n.chain().focus().extendMarkRange("link").unsetLink().run();return}I?n.chain().focus().insertContent(`<a href="${P}">${I}</a>`).run():n.chain().focus().extendMarkRange("link").setLink({href:P}).run()},[n]),x=J.useCallback((P,I)=>{n.chain().focus().insertTable({rows:P,cols:I,withHeaderRow:!0}).run()},[n]),k=()=>{const P=n.getHTML(),I=new Blob([P],{type:"text/html"}),V=URL.createObjectURL(I),B=document.createElement("a");B.href=V,B.download="document.html",document.body.appendChild(B),B.click(),document.body.removeChild(B),URL.revokeObjectURL(V)},S=()=>{const P=n.getText(),I=new Blob([P],{type:"text/plain"}),V=URL.createObjectURL(I),B=document.createElement("a");B.href=V,B.download="document.txt",document.body.appendChild(B),B.click(),document.body.removeChild(B),URL.revokeObjectURL(V)},C=({onClick:P,isActive:I=!1,disabled:V=!1,children:B,title:K})=>b.jsx("button",{onClick:P,disabled:V,title:K,className:`p-2 rounded hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed border border-transparent ${I?"bg-blue-100 border-blue-300 text-blue-700":"text-gray-700"}`,children:B}),M=()=>b.jsx("div",{className:"w-px h-8 bg-gray-300 mx-1"});return b.jsxs("div",{className:"border-b border-gray-200 bg-gray-50 p-2",children:[b.jsxs("div",{className:"flex flex-wrap items-center gap-1 mb-2",children:[b.jsx(C,{onClick:()=>n.chain().focus().undo().run(),disabled:!n.can().chain().focus().undo().run(),title:"Urungkan (Ctrl+Z)",children:b.jsx(KN,{className:"w-4 h-4"})}),b.jsx(C,{onClick:()=>n.chain().focus().redo().run(),disabled:!n.can().chain().focus().redo().run(),title:"Ulangi (Ctrl+Y)",children:b.jsx(_N,{className:"w-4 h-4"})}),b.jsx(M,{}),b.jsx(C,{onClick:()=>n.chain().focus().toggleBold().run(),isActive:n.isActive("bold"),title:"Tebal (Ctrl+B)",children:b.jsx(AN,{className:"w-4 h-4"})}),b.jsx(C,{onClick:()=>n.chain().focus().toggleItalic().run(),isActive:n.isActive("italic"),title:"Miring (Ctrl+I)",children:b.jsx(IN,{className:"w-4 h-4"})}),b.jsx(C,{onClick:()=>n.chain().focus().toggleUnderline().run(),isActive:n.isActive("underline"),title:"Garis Bawah (Ctrl+U)",children:b.jsx(WN,{className:"w-4 h-4"})}),b.jsx(C,{onClick:()=>n.chain().focus().toggleStrike().run(),isActive:n.isActive("strike"),title:"Coret",children:b.jsx(VN,{className:"w-4 h-4"})}),b.jsx(M,{}),b.jsxs("div",{className:"relative",children:[b.jsx(C,{onClick:()=>t(!e),title:"Warna Teks",children:b.jsx(UN,{className:"w-4 h-4"})}),e&&b.jsx("div",{className:"absolute top-12 left-0 z-10",children:b.jsx(q0,{color:n.getAttributes("textStyle").color||"#000000",onChange:P=>{n.chain().focus().setColor(P).run(),t(!1)},onClose:()=>t(!1)})})]}),b.jsxs("div",{className:"relative",children:[b.jsx(C,{onClick:()=>i(!r),isActive:n.isActive("highlight"),title:"Sorotan",children:b.jsx(LN,{className:"w-4 h-4"})}),r&&b.jsx("div",{className:"absolute top-12 left-0 z-10",children:b.jsx(q0,{color:n.getAttributes("highlight").color||"#ffff00",onChange:P=>{n.chain().focus().toggleHighlight({color:P}).run(),i(!1)},onClose:()=>i(!1)})})]}),b.jsx(M,{}),b.jsx(C,{onClick:()=>n.chain().focus().setTextAlign("left").run(),isActive:n.isActive({textAlign:"left"}),title:"Rata Kiri",children:b.jsx(NN,{className:"w-4 h-4"})}),b.jsx(C,{onClick:()=>n.chain().focus().setTextAlign("center").run(),isActive:n.isActive({textAlign:"center"}),title:"Rata Tengah",children:b.jsx(EN,{className:"w-4 h-4"})}),b.jsx(C,{onClick:()=>n.chain().focus().setTextAlign("right").run(),isActive:n.isActive({textAlign:"right"}),title:"Rata Kanan",children:b.jsx(TN,{className:"w-4 h-4"})}),b.jsx(C,{onClick:()=>n.chain().focus().setTextAlign("justify").run(),isActive:n.isActive({textAlign:"justify"}),title:"Rata Kiri-Kanan",children:b.jsx(MN,{className:"w-4 h-4"})}),b.jsx(M,{}),b.jsx(C,{onClick:()=>n.chain().focus().toggleBulletList().run(),isActive:n.isActive("bulletList"),title:"Daftar Poin",children:b.jsx(jN,{className:"w-4 h-4"})}),b.jsx(C,{onClick:()=>n.chain().focus().toggleOrderedList().run(),isActive:n.isActive("orderedList"),title:"Daftar Nomor",children:b.jsx(zN,{className:"w-4 h-4"})}),b.jsx(M,{}),b.jsx(C,{onClick:()=>n.chain().focus().toggleBlockquote().run(),isActive:n.isActive("blockquote"),title:"Kutipan",children:b.jsx(BN,{className:"w-4 h-4"})}),b.jsx(C,{onClick:()=>n.chain().focus().toggleCode().run(),isActive:n.isActive("code"),title:"Kode Inline",children:b.jsx(ON,{className:"w-4 h-4"})}),b.jsx(M,{}),b.jsx(C,{onClick:()=>a(!0),isActive:n.isActive("link"),title:"Sisipkan Link",children:b.jsx(nh,{className:"w-4 h-4"})}),b.jsx(C,{onClick:()=>d(!0),title:"Sisipkan Gambar",children:b.jsx(sv,{className:"w-4 h-4"})}),b.jsx(C,{onClick:()=>p(!0),title:"Sisipkan Tabel",children:b.jsx(lv,{className:"w-4 h-4"})}),b.jsx(C,{onClick:()=>n.chain().focus().setHorizontalRule().run(),title:"Garis Horizontal",children:b.jsx(FN,{className:"w-4 h-4"})}),b.jsx(M,{}),b.jsx(C,{onClick:k,title:"Ekspor sebagai HTML",children:b.jsx(iv,{className:"w-4 h-4"})}),b.jsx(C,{onClick:S,title:"Ekspor sebagai Teks",children:b.jsx(ov,{className:"w-4 h-4"})})]}),b.jsxs("div",{className:"flex flex-wrap items-center gap-1",children:[b.jsxs("select",{value:n.isActive("heading",{level:1})?"1":n.isActive("heading",{level:2})?"2":n.isActive("heading",{level:3})?"3":n.isActive("heading",{level:4})?"4":n.isActive("heading",{level:5})?"5":n.isActive("heading",{level:6})?"6":"paragraph",onChange:P=>{const I=P.target.value;I==="paragraph"?n.chain().focus().setParagraph().run():n.chain().focus().toggleHeading({level:parseInt(I)}).run()},className:"px-3 py-1 border border-gray-300 rounded text-sm bg-white",children:[b.jsx("option",{value:"paragraph",children:"Paragraf"}),b.jsx("option",{value:"1",children:"Heading 1"}),b.jsx("option",{value:"2",children:"Heading 2"}),b.jsx("option",{value:"3",children:"Heading 3"}),b.jsx("option",{value:"4",children:"Heading 4"}),b.jsx("option",{value:"5",children:"Heading 5"}),b.jsx("option",{value:"6",children:"Heading 6"})]}),b.jsxs("select",{value:n.getAttributes("textStyle").fontFamily||"default",onChange:P=>{const I=P.target.value;I==="default"?n.chain().focus().unsetFontFamily().run():n.chain().focus().setFontFamily(I).run()},className:"px-3 py-1 border border-gray-300 rounded text-sm bg-white ml-2",children:[b.jsx("option",{value:"default",children:"Font Default"}),b.jsx("option",{value:"Inter",children:"Inter"}),b.jsx("option",{value:"Arial",children:"Arial"}),b.jsx("option",{value:"Helvetica",children:"Helvetica"}),b.jsx("option",{value:"Times",children:"Times"}),b.jsx("option",{value:"Courier",children:"Courier"}),b.jsx("option",{value:"Georgia",children:"Georgia"}),b.jsx("option",{value:"Verdana",children:"Verdana"})]})]}),s&&b.jsx(uT,{onSubmit:v,onClose:()=>a(!1),initialUrl:n.getAttributes("link").href||""}),u&&b.jsx(cT,{onSubmit:g,onClose:()=>d(!1)}),f&&b.jsx(dT,{onSubmit:x,onClose:()=>p(!1)})]})},hT=({content:n="",onChange:e,placeholder:t="Mulai menulis di sini..."})=>{const[r,i]=J.useState(n),s=PE({extensions:[IM.configure({bulletList:{keepMarks:!0,keepAttributes:!1},orderedList:{keepMarks:!0,keepAttributes:!1}}),wd,jM.configure({types:[wd.name,Qd.name]}),FM.configure({types:["heading","paragraph"]}),gN,xN.configure({multicolor:!0}),kN.configure({types:[wd.name,Qd.name]}),u2.configure({openOnClick:!1,autolink:!0,defaultProtocol:"https"}),_M.configure({inline:!0,allowBase64:!0}),fN.configure({resizable:!0}),hN,mN,pN,wN.configure({limit:1e4}),SN.configure({className:"has-focus",mode:"all"})],content:r,onUpdate:({editor:a})=>{const u=a.getHTML();i(u),e==null||e(u)},editorProps:{attributes:{class:"prose prose-sm sm:prose lg:prose-lg xl:prose-2xl mx-auto focus:outline-none min-h-[400px] p-4",placeholder:t}}});return b.jsxs("div",{className:"w-full max-w-6xl mx-auto bg-white border border-gray-200 rounded-lg shadow-lg",children:[b.jsx(fT,{editor:s}),b.jsx("div",{className:"border-t border-gray-200",children:b.jsx(CE,{editor:s,className:"min-h-[400px] max-h-[600px] overflow-y-auto p-4 focus-within:ring-2 focus-within:ring-blue-500 focus-within:border-blue-500"})}),s&&b.jsxs("div",{className:"border-t border-gray-200 px-4 py-2 bg-gray-50 text-sm text-gray-600 flex justify-between items-center",children:[b.jsxs("div",{children:["Karakter: ",s.storage.characterCount.characters()," / 10,000"]}),b.jsxs("div",{children:["Kata: ",s.storage.characterCount.words()]})]})]})};function pT(){const[n,e]=J.useState(`
    <h1>Selamat Datang di Rich Text Editor</h1>
    <p>Ini adalah editor teks yang lengkap dan canggih yang memungkinkan Anda untuk:</p>
    <ul>
      <li><strong>Format teks</strong> dengan berbagai pilihan styling</li>
      <li><em>Menambahkan gambar</em> dan konten multimedia</li>
      <li><u>Membuat tabel</u> yang interaktif</li>
      <li>Dan masih banyak lagi...</li>
    </ul>
    <p>Mulai menulis konten Anda di sini dan nikmati pengalaman editing yang menyenangkan!</p>
    <blockquote>
      <p>"Kreativitas dimulai dengan satu kata, satu kalimat, satu paragraf..."</p>
    </blockquote>
  `),[t,r]=J.useState(!1),[i,s]=J.useState("Dokumen Baru"),a=f=>{e(f)},u=()=>{const f=new Blob([n],{type:"text/html"}),p=URL.createObjectURL(f),g=document.createElement("a");g.href=p,g.download=`${i}.html`,document.body.appendChild(g),g.click(),document.body.removeChild(g),URL.revokeObjectURL(p)},d=()=>{const f=document.createElement("div");f.innerHTML=n;const p=f.textContent||f.innerText||"",g=new Blob([p],{type:"text/plain"}),v=URL.createObjectURL(g),x=document.createElement("a");x.href=v,x.download=`${i}.txt`,document.body.appendChild(x),x.click(),document.body.removeChild(x),URL.revokeObjectURL(v)};return b.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:[b.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:b.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:b.jsxs("div",{className:"flex justify-between items-center h-16",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx(ov,{className:"w-8 h-8 text-blue-600"}),b.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Rich Text Editor"})]}),b.jsx("div",{className:"hidden sm:block text-sm text-gray-500",children:"Editor WYSIWYG yang lengkap dan modern"})]}),b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsxs("button",{onClick:()=>r(!t),className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${t?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,title:"Toggle Preview",children:[b.jsx(DN,{className:"w-4 h-4 inline mr-1"}),"Preview"]}),b.jsxs("button",{onClick:u,className:"px-3 py-2 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700 transition-colors",title:"Simpan Dokumen",children:[b.jsx(HN,{className:"w-4 h-4 inline mr-1"}),"Simpan"]}),b.jsxs("div",{className:"relative",children:[b.jsxs("select",{className:"appearance-none bg-white border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",onChange:f=>{f.target.value==="text"?d():f.target.value==="html"&&u(),f.target.value=""},children:[b.jsx("option",{value:"",children:"Export"}),b.jsx("option",{value:"html",children:"HTML"}),b.jsx("option",{value:"text",children:"Text"})]}),b.jsx(iv,{className:"w-4 h-4 absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none"})]})]})]})})}),b.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:b.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-4",children:b.jsx("input",{type:"text",value:i,onChange:f=>s(f.target.value),className:"text-2xl font-bold text-gray-900 border-none outline-none w-full bg-transparent",placeholder:"Masukkan judul dokumen..."})})}),b.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-8",children:t?b.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[b.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-gray-200",children:[b.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Preview Dokumen"}),b.jsx("button",{onClick:()=>r(!1),className:"px-3 py-1 text-sm text-blue-600 hover:bg-blue-50 rounded",children:"Kembali ke Editor"})]}),b.jsxs("div",{className:"prose prose-lg max-w-none",children:[b.jsx("h1",{className:"text-3xl font-bold mb-4",children:i}),b.jsx("div",{dangerouslySetInnerHTML:{__html:n},className:"leading-relaxed"})]})]}):b.jsxs("div",{className:"space-y-6",children:[b.jsx(hT,{content:n,onChange:a,placeholder:"Mulai menulis konten Anda di sini..."}),b.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[b.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[b.jsx($N,{className:"w-5 h-5"}),"Tips & Keyboard Shortcuts"]}),b.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx("h4",{className:"font-medium text-gray-700",children:"Format Teks"}),b.jsxs("div",{className:"space-y-1 text-gray-600",children:[b.jsxs("p",{children:[b.jsx("kbd",{className:"kbd",children:"Ctrl+B"})," - Tebal"]}),b.jsxs("p",{children:[b.jsx("kbd",{className:"kbd",children:"Ctrl+I"})," - Miring"]}),b.jsxs("p",{children:[b.jsx("kbd",{className:"kbd",children:"Ctrl+U"})," - Garis Bawah"]})]})]}),b.jsxs("div",{className:"space-y-2",children:[b.jsx("h4",{className:"font-medium text-gray-700",children:"Aksi Editor"}),b.jsxs("div",{className:"space-y-1 text-gray-600",children:[b.jsxs("p",{children:[b.jsx("kbd",{className:"kbd",children:"Ctrl+Z"})," - Undo"]}),b.jsxs("p",{children:[b.jsx("kbd",{className:"kbd",children:"Ctrl+Y"})," - Redo"]}),b.jsxs("p",{children:[b.jsx("kbd",{className:"kbd",children:"Ctrl+S"})," - Simpan"]})]})]}),b.jsxs("div",{className:"space-y-2",children:[b.jsx("h4",{className:"font-medium text-gray-700",children:"Fitur Khusus"}),b.jsxs("div",{className:"space-y-1 text-gray-600",children:[b.jsx("p",{children:" Drag & drop gambar"}),b.jsx("p",{children:" Auto-save setiap perubahan"}),b.jsx("p",{children:" Export ke berbagai format"})]})]})]})]})]})})]})}mk.createRoot(document.getElementById("root")).render(b.jsx(J.StrictMode,{children:b.jsx(yk,{children:b.jsx(pT,{})})}));
